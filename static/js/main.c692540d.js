/*! For license information please see main.c692540d.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),a=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(s(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===j?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return D(e(t))}catch(Vt){}}return null}var M=Array.isArray,P=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},R=[],z=-1;function F(e){return{current:e}}function V(e){0>z||(e.current=R[z],R[z]=null,z--)}function U(e,t){z++,R[z]=e.current,e.current=t}var B,q,H=F(null),G=F(null),Q=F(null),K=F(null);function W(e,t){switch(U(Q,t),U(G,e),U(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(H),U(H,e)}function Y(){V(H),V(G),V(Q)}function X(e){null!==e.memoizedState&&U(K,e);var t=H.current,n=bd(t,e.type);t!==n&&(U(G,e),U(H,n))}function $(e){G.current===e&&(V(H),V(G)),K.current===e&&(V(K),dh._currentValue=O)}function J(e){if(void 0===B)try{throw Error()}catch(Vt){var t=Vt.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",q=-1<Vt.stack.indexOf("\n    at")?" (<anonymous>)":-1<Vt.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+q}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Vt){var r=Vt}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(Vt){return"\nError generating stack: "+Vt.message+"\n"+Vt.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,se=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(xe(e)/ke|0)|0},xe=Math.log,ke=Math.LN2;var Se=256,Ee=262144,Ne=4194304;function _e(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?i=_e(r):0!==(s&=o)?i=_e(s):n||0!==(n=o&~e)&&(i=_e(n)):0!==(o=r&~a)?i=_e(o):0!==s?i=_e(s):n||0!==(n=r&~e)&&(i=_e(n)),0===i?0:0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:i}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=Ne;return 0===(62914560&(Ne<<=1))&&(Ne=4194304),e}function je(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Me(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Pe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Oe(n))&(e.suspendedLanes|t))?0:n}function Oe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Re(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function Fe(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var Ve=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Ve,Be="__reactProps$"+Ve,qe="__reactContainer$"+Ve,He="__reactEvents$"+Ve,Ge="__reactListeners$"+Ve,Qe="__reactHandles$"+Ve,Ke="__reactResources$"+Ve,We="__reactMarker$"+Ve;function Ye(e){delete e[Ue],delete e[Be],delete e[He],delete e[Ge],delete e[Qe]}function Xe(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Rd(e);null!==e;){if(n=e[Ue])return n;e=Rd(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[Ue]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function Ze(e){var t=e[Ke];return t||(t=e[Ke]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[We]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(st,i)&&(at.test(i)?ot[i]=!0:(st[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,a,s,o){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?wt(e,s,dt(t)):null!=n?wt(e,s,dt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,i,a,s,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),ft(e)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(s(92));if(M(r)){if(1<r.length)throw Error(s(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&_t(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&_t(e,a,t[a])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Mt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,Ot=null;function Rt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Be]||null;if(!i)throw Error(s(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var zt=!1;function Ft(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Lt||null!==Ot)&&(eu(),Lt&&(t=Lt,e=Ot,Ot=Lt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Bt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),qt=!1;if(Bt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Jh){qt=!1}var Gt=null,Qt=null,Kt=null;function Wt(){if(Kt)return Kt;var e,t,n=Qt,r=n.length,i="value"in Gt?Gt.value:Gt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Kt=i.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Xt(){return!0}function $t(){return!1}function Jt(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Xt:$t,this.isPropagationStopped=$t,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),t}var Zt,en,tn,nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rn=Jt(nn),an=f({},nn,{view:0,detail:0}),sn=Jt(an),on=f({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tn&&(tn&&"mousemove"===e.type?(Zt=e.screenX-tn.screenX,en=e.screenY-tn.screenY):en=Zt=0,tn=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:en}}),ln=Jt(on),cn=Jt(f({},on,{dataTransfer:0})),un=Jt(f({},an,{relatedTarget:0})),dn=Jt(f({},nn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Jt(f({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),fn=Jt(f({},nn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gn[e])&&!!t[e]}function vn(){return yn}var bn=Jt(f({},an,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=Jt(f({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Jt(f({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),kn=Jt(f({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=Jt(f({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Jt(f({},nn,{newState:0,oldState:0})),Nn=[9,13,27,32],_n=Bt&&"CompositionEvent"in window,Cn=null;Bt&&"documentMode"in document&&(Cn=document.documentMode);var Tn=Bt&&"TextEvent"in window&&!Cn,In=Bt&&(!_n||Cn&&8<Cn&&11>=Cn),An=String.fromCharCode(32),jn=!1;function Dn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ln[e.type]:"textarea"===t}function Rn(e,t,n,r){Lt?Ot?Ot.push(r):Ot=[r]:Lt=r,0<(t=id(t,"onChange")).length&&(n=new rn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zn=null,Fn=null;function Vn(e){Xu(e,0)}function Un(e){if(pt(Je(e)))return e}function Bn(e,t){if("change"===e)return t}var qn=!1;if(Bt){var Hn;if(Bt){var Gn="oninput"in document;if(!Gn){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),Gn="function"===typeof Qn.oninput}Hn=Gn}else Hn=!1;qn=Hn&&(!document.documentMode||9<document.documentMode)}function Kn(){zn&&(zn.detachEvent("onpropertychange",Wn),Fn=zn=null)}function Wn(e){if("value"===e.propertyName&&Un(Fn)){var t=[];Rn(t,Fn,e,Pt(e)),Ft(Vn,t)}}function Yn(e,t,n){"focusin"===e?(Kn(),Fn=n,(zn=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Kn()}function Xn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Fn)}function $n(e,t){if("click"===e)return Un(t)}function Jn(e,t){if("input"===e||"change"===e)return Un(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function er(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Zn(e[i],t[i]))return!1}return!0}function tr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nr(e,t){var n,r=tr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tr(r)}}function rr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?rr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ir(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=Bt&&"documentMode"in document&&11>=document.documentMode,or=null,lr=null,cr=null,ur=!1;function dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ur||null==or||or!==mt(r)||("selectionStart"in(r=or)&&ar(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},cr&&er(cr,r)||(cr=r,0<(r=id(lr,"onSelect")).length&&(t=new rn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=or)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},pr={},mr={};function gr(e){if(pr[e])return pr[e];if(!fr[e])return e;var t,n=fr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return pr[e]=n[t];return e}Bt&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);var yr=gr("animationend"),vr=gr("animationiteration"),br=gr("animationstart"),wr=gr("transitionrun"),xr=gr("transitionstart"),kr=gr("transitioncancel"),Sr=gr("transitionend"),Er=new Map,Nr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Er.set(e,t),rt(t,[e])}Nr.push("scrollEnd");var Cr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Tr=[],Ir=0,Ar=0;function jr(){for(var e=Ir,t=Ar=Ir=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var a=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var s=r.pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}0!==a&&Lr(n,i,a)}}function Dr(e,t,n,r){Tr[Ir++]=e,Tr[Ir++]=t,Tr[Ir++]=n,Tr[Ir++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Mr(e,t,n,r){return Dr(e,t,n,r),Or(e)}function Pr(e,t){return Dr(e,null,null,t),Or(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,i&&null!==t&&(i=31-we(n),null===(r=(e=a.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),a):null}function Or(e){if(50<Gc)throw Gc=0,Qc=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rr={};function zr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new zr(e,t,n,r)}function Vr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,n,r,i,a){var o=0;if(r=e,"function"===typeof e)Vr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fr(31,n,t,i)).elementType=C,e.lanes=a,e;case y:return Hr(n.children,i,a,t);case v:o=8,i|=24;break;case b:return(e=Fr(12,n,t,2|i)).elementType=b,e.lanes=a,e;case S:return(e=Fr(13,n,t,i)).elementType=S,e.lanes=a,e;case E:return(e=Fr(19,n,t,i)).elementType=E,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case w:o=9;break e;case k:o=11;break e;case N:o=14;break e;case _:o=16,r=null;break e}o=29,n=Error(s(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Hr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Qr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=new WeakMap;function Yr(e,t){if("object"===typeof e&&null!==e){var n=Wr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Wr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Xr=[],$r=0,Jr=null,Zr=0,ei=[],ti=0,ni=null,ri=1,ii="";function ai(e,t){Xr[$r++]=Zr,Xr[$r++]=Jr,Jr=e,Zr=t}function si(e,t,n){ei[ti++]=ri,ei[ti++]=ii,ei[ti++]=ni,ni=e;var r=ri;e=ii;var i=32-we(r)-1;r&=~(1<<i),n+=1;var a=32-we(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ri=1<<32-we(t)+i|n<<i|r,ii=a+e}else ri=1<<a|n<<i|r,ii=e}function oi(e){null!==e.return&&(ai(e,1),si(e,1,0))}function li(e){for(;e===Jr;)Jr=Xr[--$r],Xr[$r]=null,Zr=Xr[--$r],Xr[$r]=null;for(;e===ni;)ni=ei[--ti],ei[ti]=null,ii=ei[--ti],ei[ti]=null,ri=ei[--ti],ei[ti]=null}function ci(e,t){ei[ti++]=ri,ei[ti++]=ii,ei[ti++]=ni,ri=t.id,ii=t.overflow,ni=e}var ui=null,di=null,hi=!1,fi=null,pi=!1,mi=Error(s(519));function gi(e){throw ki(Yr(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),mi}function yi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[Be]=r,n){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(n=0;n<Wu.length;n++)$u(Wu[n],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ud(t.textContent,n)?(null!=r.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=r.onScroll&&$u("scroll",t),null!=r.onScrollEnd&&$u("scrollend",t),null!=r.onClick&&(t.onclick=Dt),t=!0):t=!1,t||gi(e,!0)}function vi(e){for(ui=e.return;ui;)switch(ui.tag){case 5:case 31:case 13:return void(pi=!1);case 27:case 3:return void(pi=!0);default:ui=ui.return}}function bi(e){if(e!==ui)return!1;if(!hi)return vi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&di&&gi(e),vi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));di=Od(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));di=Od(e)}else 27===n?(n=di,Cd(e.type)?(e=Ld,Ld=null,di=e):di=n):di=ui?Pd(e.stateNode.nextSibling):null;return!0}function wi(){di=ui=null,hi=!1}function xi(){var e=fi;return null!==e&&(null===jc?jc=e:jc.push.apply(jc,e),fi=null),e}function ki(e){null===fi?fi=[e]:fi.push(e)}var Si=F(null),Ei=null,Ni=null;function _i(e,t,n){U(Si,t._currentValue),t._currentValue=n}function Ci(e){e._currentValue=Si.current,V(Si)}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ti(a.return,n,e),r||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Ti(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ai(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(0!==(524288&i.flags))a=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=i.type;Zn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===K.current){if(null===(o=i.alternate))throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(dh):e=[dh])}i=i.return}null!==e&&Ii(t,e,n,r),t.flags|=262144}function ji(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Di(e){Ei=e,Ni=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Mi(e){return Li(Ei,e)}function Pi(e,t){return null===Ei&&Di(e),Li(e,t)}function Li(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Ni){if(null===e)throw Error(s(308));Ni=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ni=Ni.next=t;return n}var Oi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=r.unstable_scheduleCallback,zi=r.unstable_NormalPriority,Fi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vi(){return{controller:new Oi,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&Ri(zi,function(){e.controller.abort()})}var Bi=null,qi=0,Hi=0,Gi=null;function Qi(){if(0===--qi&&null!==Bi){null!==Gi&&(Gi.status="fulfilled");var e=Bi;Bi=null,Hi=0,Gi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ki=P.S;P.S=function(e,t){Pc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bi){var n=Bi=[];qi=0,Hi=qu(),Gi={status:"pending",value:void 0,then:function(e){n.push(e)}}}qi++,t.then(Qi,Qi)}(0,t),null!==Ki&&Ki(e,t)};var Wi=F(null);function Yi(){var e=Wi.current;return null!==e?e:mc.pooledCache}function Xi(e,t){U(Wi,null===t?Wi.current:t.pool)}function $i(){var e=Yi();return null===e?null:{parent:Fi._currentValue,pool:e}}var Ji=Error(s(460)),Zi=Error(s(474)),ea=Error(s(542)),ta={then:function(){}};function na(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ra(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Dt,Dt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oa(e=t.reason),e;default:if("string"===typeof t.status)t.then(Dt,Dt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oa(e=t.reason),e}throw aa=t,Ji}}function ia(e){try{return(0,e._init)(e._payload)}catch(Vt){if(null!==Vt&&"object"===typeof Vt&&"function"===typeof Vt.then)throw aa=Vt,Ji;throw Vt}}var aa=null;function sa(){if(null===aa)throw Error(s(459));var e=aa;return aa=null,e}function oa(e){if(e===Ji||e===ea)throw Error(s(483))}var la=null,ca=0;function ua(e){var t=ca;return ca+=1,null===la&&(la=[]),ra(la,e,t)}function da(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ha(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===_&&ia(a)===t.type)?(da(t=i(t,n.props),n),t.return=e,t):(da(t=qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return da(n=qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case _:return h(e,t=ia(t),n)}if(M(t)||A(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ua(t),n);if(t.$$typeof===x)return h(e,Pi(e,t),n);ha(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case _:return f(e,t,n=ia(n),r)}if(M(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ua(n),r);if(n.$$typeof===x)return f(e,t,Pi(e,n),r);ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return p(e,t,n,r=ia(r),i)}if(M(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,ua(r),i);if(r.$$typeof===x)return p(e,t,n,Pi(t,r),i);ha(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===_&&ia(b)===c.type){n(l,c.sibling),da(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(da(d=qr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Kr(u,l.mode,d)).return=l,l=d}return o(l);case _:return v(l,c,u=ia(u),d)}if(M(u))return function(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(i,d),hi&&ai(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return hi&&ai(i,m),c}for(d=r(d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),hi&&ai(i,m),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(s(150));return function(i,o,l,c){if(null==l)throw Error(s(151));for(var u=null,d=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),hi&&ai(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return hi&&ai(i,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),hi&&ai(i,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,ua(u),d);if(u.$$typeof===x)return v(l,c,Pi(l,u),d);ha(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Gr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ca=0;var i=v(e,t,n,r);return la=null,i}catch(Vt){if(Vt===Ji||Vt===ea)throw Vt;var a=Fr(29,Vt,null,e.mode);return a.lanes=r,a.return=e,a}}}var pa=fa(!0),ma=fa(!1),ga=!1;function ya(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function va(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Or(e),Lr(e,null,n),t}return Dr(e,r,t,n),Or(e)}function xa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}function ka(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Sa=!1;function Ea(){if(Sa){if(null!==Gi)throw Gi}}function Na(e,t,n,r){Sa=!1;var i=e.updateQueue;ga=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(s=0,u=c=l=null,o=a;;){var h=-536870913&o.lane,p=h!==o.lane;if(p?(yc&h)===h:(r&h)===h){0!==h&&h===Hi&&(Sa=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(y,d,h):m)||void 0===h)break e;d=f({},d,h);break e;case 2:ga=!0}}null!==(h=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===a&&(i.shared.lanes=0),Nc|=s,e.lanes=s,e.memoizedState=d}}function _a(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Ca(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)_a(n[e],t)}var Ta=F(null),Ia=F(0);function Aa(e,t){U(Ia,e=Sc),U(Ta,t),Sc=e|t.baseLanes}function ja(){U(Ia,Sc),U(Ta,Ta.current)}function Da(){Sc=Ia.current,V(Ta),V(Ia)}var Ma=F(null),Pa=null;function La(e){var t=e.alternate;U(Va,1&Va.current),U(Ma,e),null===Pa&&(null===t||null!==Ta.current||null!==t.memoizedState)&&(Pa=e)}function Oa(e){U(Va,Va.current),U(Ma,e),null===Pa&&(Pa=e)}function Ra(e){22===e.tag?(U(Va,Va.current),U(Ma,e),null===Pa&&(Pa=e)):za()}function za(){U(Va,Va.current),U(Ma,Ma.current)}function Fa(e){V(Ma),Pa===e&&(Pa=null),V(Va)}var Va=F(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Dd(n)||Md(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=0,qa=null,Ha=null,Ga=null,Qa=!1,Ka=!1,Wa=!1,Ya=0,Xa=0,$a=null,Ja=0;function Za(){throw Error(s(321))}function es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function ts(e,t,n,r,i,a){return Ba=a,qa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?yo:vo,Wa=!1,a=n(r,i),Wa=!1,Ka&&(a=rs(t,n,r,i)),ns(e),a}function ns(e){P.H=go;var t=null!==Ha&&null!==Ha.next;if(Ba=0,Ga=Ha=qa=null,Qa=!1,Xa=0,$a=null,t)throw Error(s(300));null===e||Po||null!==(e=e.dependencies)&&ji(e)&&(Po=!0)}function rs(e,t,n,r){qa=e;var i=0;do{if(Ka&&($a=null),Xa=0,Ka=!1,25<=i)throw Error(s(301));if(i+=1,Ga=Ha=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}P.H=bo,a=t(n,r)}while(Ka);return a}function is(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?us(t):t,e=e.useState()[0],(null!==Ha?Ha.memoizedState:null)!==e&&(qa.flags|=1024),t}function as(){var e=0!==Ya;return Ya=0,e}function ss(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function os(e){if(Qa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Qa=!1}Ba=0,Ga=Ha=qa=null,Ka=!1,Xa=Ya=0,$a=null}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ga?qa.memoizedState=Ga=e:Ga=Ga.next=e,Ga}function cs(){if(null===Ha){var e=qa.alternate;e=null!==e?e.memoizedState:null}else e=Ha.next;var t=null===Ga?qa.memoizedState:Ga.next;if(null!==t)Ga=t,Ha=e;else{if(null===e){if(null===qa.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Ha=e).memoizedState,baseState:Ha.baseState,baseQueue:Ha.baseQueue,queue:Ha.queue,next:null},null===Ga?qa.memoizedState=Ga=e:Ga=Ga.next=e}return Ga}function us(e){var t=Xa;return Xa+=1,null===$a&&($a=[]),e=ra($a,e,t),t=qa,null===(null===Ga?t.memoizedState:Ga.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?yo:vo),e}function ds(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return us(e);if(e.$$typeof===x)return Mi(e)}throw Error(s(438,String(e)))}function hs(e){var t=null,n=qa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=qa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function fs(e,t){return"function"===typeof t?t(e):t}function ps(e){return ms(cs(),Ha,e)}function ms(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(yc&h)===h:(Ba&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hi&&(d=!0);else{if((Ba&f)===f){u=u.next,f===Hi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,qa.lanes|=f,Nc|=f}h=u.action,Wa&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=a):c=c.next=f,qa.lanes|=h,Nc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!Zn(a,e.memoizedState)&&(Po=!0,d&&null!==(n=Gi)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function gs(e){var t=cs(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Zn(a,t.memoizedState)||(Po=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ys(e,t,n){var r=qa,i=cs(),a=hi;if(a){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!Zn((Ha||i).memoizedState,n);if(o&&(i.memoizedState=n,Po=!0),i=i.queue,Bs(ws.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Ga&&1&Ga.memoizedState.tag){if(r.flags|=2048,Rs(9,{destroy:void 0},bs.bind(null,r,i,n,t),null),null===mc)throw Error(s(349));a||0!==(127&Ba)||vs(r,t,n)}return n}function vs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=qa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function bs(e,t,n,r){t.value=n,t.getSnapshot=r,xs(t)&&ks(e)}function ws(e,t,n){return n(function(){xs(t)&&ks(e)})}function xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(r){return!0}}function ks(e){var t=Pr(e,2);null!==t&&Yc(t,e,2)}function Ss(e){var t=ls();if("function"===typeof e){var n=e;if(e=n(),Wa){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t}function Es(e,t,n,r){return e.baseState=n,ms(e,Ha,"function"===typeof r?r:fs)}function Ns(e,t,n,r,i){if(fo(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==P.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,_s(t,a)):(a.next=n.next,t.pending=n.next=a)}}function _s(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=P.T,s={};P.T=s;try{var o=n(i,r),l=P.S;null!==l&&l(s,o),Cs(e,t,o)}catch(c){Is(e,t,c)}finally{null!==a&&null!==s.types&&(a.types=s.types),P.T=a}}else try{Cs(e,t,a=n(i,r))}catch(u){Is(e,t,u)}}function Cs(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ts(e,t,n)},function(n){return Is(e,t,n)}):Ts(e,t,n)}function Ts(e,t,n){t.status="fulfilled",t.value=n,As(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,_s(e,n)))}function Is(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,As(t),t=t.next}while(t!==r)}e.action=null}function As(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function js(e,t){return t}function Ds(e,t){if(hi){var n=mc.formState;if(null!==n){e:{var r=qa;if(hi){if(di){t:{for(var i=di,a=pi;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=Pd(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){di=Pd(i.nextSibling),r="F!"===i.data;break e}}gi(r)}r=!1}r&&(t=n[0])}}return(n=ls()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:t},n.queue=r,n=co.bind(null,qa,r),r.dispatch=n,r=Ss(!1),a=ho.bind(null,qa,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=ls()).queue=i,n=Ns.bind(null,qa,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ms(e){return Ps(cs(),Ha,e)}function Ps(e,t,n){if(t=ms(e,t,js)[0],e=ps(fs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=us(t)}catch(Vt){if(Vt===Ji)throw ea;throw Vt}else r=t;var i=(t=cs()).queue,a=i.dispatch;return n!==t.memoizedState&&(qa.flags|=2048,Rs(9,{destroy:void 0},Ls.bind(null,i,n),null)),[r,a,e]}function Ls(e,t){e.action=t}function Os(e){var t=cs(),n=Ha;if(null!==n)return Ps(t,n,e);cs(),t=t.memoizedState;var r=(n=cs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Rs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=qa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zs(){return cs().memoizedState}function Fs(e,t,n,r){var i=ls();qa.flags|=e,i.memoizedState=Rs(1|t,{destroy:void 0},n,void 0===r?null:r)}function Vs(e,t,n,r){var i=cs();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==Ha&&null!==r&&es(r,Ha.memoizedState.deps)?i.memoizedState=Rs(t,a,n,r):(qa.flags|=e,i.memoizedState=Rs(1|t,a,n,r))}function Us(e,t){Fs(8390656,8,e,t)}function Bs(e,t){Vs(2048,8,e,t)}function qs(e){var t=cs().memoizedState;return function(e){qa.flags|=4;var t=qa.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},qa.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Hs(e,t){return Vs(4,2,e,t)}function Gs(e,t){return Vs(4,4,e,t)}function Qs(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ks(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,Qs.bind(null,t,e),n)}function Ws(){}function Ys(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xs(e,t){var n=cs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&es(t,r[1]))return r[0];if(r=e(),Wa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function $s(e,t,n){return void 0===n||0!==(1073741824&Ba)&&0===(261930&yc)?e.memoizedState=t:(e.memoizedState=n,e=Wc(),qa.lanes|=e,Nc|=e,n)}function Js(e,t,n,r){return Zn(n,t)?n:null!==Ta.current?(e=$s(e,n,r),Zn(e,t)||(Po=!0),e):0===(42&Ba)||0!==(1073741824&Ba)&&0===(261930&yc)?(Po=!0,e.memoizedState=n):(e=Wc(),qa.lanes|=e,Nc|=e,t)}function Zs(e,t,n,r,i){var a=L.p;L.p=0!==a&&8>a?a:8;var s=P.T,o={};P.T=o,ho(e,!1,t,n);try{var l=i(),c=P.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Kc());else uo(e,t,r,Kc())}catch(u){uo(e,t,{then:function(){},status:"rejected",reason:u},Kc())}finally{L.p=a,null!==s&&null!==o.types&&(s.types=o.types),P.T=s}}function eo(){}function to(e,t,n,r){if(5!==e.tag)throw Error(s(476));var i=no(e).queue;Zs(e,i,t,O,null===n?eo:function(){return ro(e),n(r)})}function no(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ro(e){var t=no(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},Kc())}function io(){return Mi(dh)}function ao(){return cs().memoizedState}function so(){return cs().memoizedState}function oo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),r=wa(t,e=ba(n),n);return null!==r&&(Yc(r,t,n),xa(r,t,n)),t={cache:Vi()},void(e.payload=t)}t=t.return}}function lo(e,t,n){var r=Kc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fo(e)?po(t,n):null!==(n=Mr(e,t,n,r))&&(Yc(n,e,r),mo(n,t,r))}function co(e,t,n){uo(e,t,n,Kc())}function uo(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fo(e))po(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Zn(o,s))return Dr(e,t,i,0),null===mc&&jr(),!1}catch(l){}if(null!==(n=Mr(e,t,i,r)))return Yc(n,e,r),mo(n,t,r),!0}return!1}function ho(e,t,n,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(s(479))}else null!==(t=Mr(e,n,r,2))&&Yc(t,e,2)}function fo(e){var t=e.alternate;return e===qa||null!==t&&t===qa}function po(e,t){Ka=Qa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}var go={readContext:Mi,use:ds,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useLayoutEffect:Za,useInsertionEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useSyncExternalStore:Za,useId:Za,useHostTransitionStatus:Za,useFormState:Za,useActionState:Za,useOptimistic:Za,useMemoCache:Za,useCacheRefresh:Za};go.useEffectEvent=Za;var yo={readContext:Mi,use:ds,useCallback:function(e,t){return ls().memoizedState=[e,void 0===t?null:t],e},useContext:Mi,useEffect:Us,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fs(4194308,4,Qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){Fs(4,2,e,t)},useMemo:function(e,t){var n=ls();t=void 0===t?null:t;var r=e();if(Wa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ls();if(void 0!==n){var i=n(t);if(Wa){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=lo.bind(null,qa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ls().memoizedState=e},useState:function(e){var t=(e=Ss(e)).queue,n=co.bind(null,qa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ws,useDeferredValue:function(e,t){return $s(ls(),e,t)},useTransition:function(){var e=Ss(!1);return e=Zs.bind(null,qa,e.queue,!0,!1),ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=qa,i=ls();if(hi){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===mc)throw Error(s(349));0!==(127&yc)||vs(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Us(ws.bind(null,r,a,e),[e]),r.flags|=2048,Rs(9,{destroy:void 0},bs.bind(null,r,a,n,t),null),n},useId:function(){var e=ls(),t=mc.identifierPrefix;if(hi){var n=ii;t="_"+t+"R_"+(n=(ri&~(1<<32-we(ri)-1)).toString(32)+n),0<(n=Ya++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ja++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:io,useFormState:Ds,useActionState:Ds,useOptimistic:function(e){var t=ls();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ho.bind(null,qa,!0,n),n.dispatch=t,[e,t]},useMemoCache:hs,useCacheRefresh:function(){return ls().memoizedState=oo.bind(null,qa)},useEffectEvent:function(e){var t=ls(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},vo={readContext:Mi,use:ds,useCallback:Ys,useContext:Mi,useEffect:Bs,useImperativeHandle:Ks,useInsertionEffect:Hs,useLayoutEffect:Gs,useMemo:Xs,useReducer:ps,useRef:zs,useState:function(){return ps(fs)},useDebugValue:Ws,useDeferredValue:function(e,t){return Js(cs(),Ha.memoizedState,e,t)},useTransition:function(){var e=ps(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:ys,useId:ao,useHostTransitionStatus:io,useFormState:Ms,useActionState:Ms,useOptimistic:function(e,t){return Es(cs(),0,e,t)},useMemoCache:hs,useCacheRefresh:so};vo.useEffectEvent=qs;var bo={readContext:Mi,use:ds,useCallback:Ys,useContext:Mi,useEffect:Bs,useImperativeHandle:Ks,useInsertionEffect:Hs,useLayoutEffect:Gs,useMemo:Xs,useReducer:gs,useRef:zs,useState:function(){return gs(fs)},useDebugValue:Ws,useDeferredValue:function(e,t){var n=cs();return null===Ha?$s(n,e,t):Js(n,Ha.memoizedState,e,t)},useTransition:function(){var e=gs(fs)[0],t=cs().memoizedState;return["boolean"===typeof e?e:us(e),t]},useSyncExternalStore:ys,useId:ao,useHostTransitionStatus:io,useFormState:Os,useActionState:Os,useOptimistic:function(e,t){var n=cs();return null!==Ha?Es(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hs,useCacheRefresh:so};function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=qs;var xo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kc(),i=ba(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=wa(e,i,r))&&(Yc(t,e,r),xa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kc(),i=ba(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=wa(e,i,r))&&(Yc(t,e,r),xa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kc(),r=ba(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=wa(e,r,n))&&(Yc(t,e,n),xa(t,e,n))}};function ko(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!er(n,r)||!er(i,a))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function Eo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function No(e){Cr(e)}function _o(e){console.error(e)}function Co(e){Cr(e)}function To(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Io(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ao(e,t,n){return(n=ba(n)).tag=3,n.payload={element:null},n.callback=function(){To(e,t)},n}function jo(e){return(e=ba(e)).tag=3,e}function Do(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Io(t,n,r)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Io(t,n,r),"function"!==typeof i&&(null===Rc?Rc=new Set([this]):Rc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Mo=Error(s(461)),Po=!1;function Lo(e,t,n,r){t.child=null===e?ma(t,null,n,r):pa(t,e.child,n,r)}function Oo(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var s={};for(var o in r)"ref"!==o&&(s[o]=r[o])}else s=r;return Di(t),r=ts(e,t,n,s,a,i),o=as(),null===e||Po?(hi&&o&&oi(t),t.flags|=1,Lo(e,t,r,i),t.child):(ss(e,t,i),al(e,t,i))}function Ro(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Vr(a)||void 0!==a.defaultProps||null!==n.compare?((e=qr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,zo(e,t,a,r,i))}if(a=e.child,!sl(e,i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:er)(s,r)&&e.ref===t.ref)return al(e,t,i)}return t.flags|=1,(e=Ur(a,r)).ref=t.ref,e.return=t,t.child=e}function zo(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(er(a,r)&&e.ref===t.ref){if(Po=!1,t.pendingProps=r=a,!sl(e,i))return t.lanes=e.lanes,al(e,t,i);0!==(131072&e.flags)&&(Po=!0)}}return Go(e,t,n,r,i)}function Fo(e,t,n,r){var i=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return Uo(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Uo(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xi(0,null!==a?a.cachePool:null),null!==a?Aa(t,a):ja(),Ra(t)}else null!==a?(Xi(0,a.cachePool),Aa(t,a),za(),t.memoizedState=null):(null!==e&&Xi(0,null),ja(),za());return Lo(e,t,i,n),t.child}function Vo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uo(e,t,n,r,i){var a=Yi();return a=null===a?null:{parent:Fi._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Xi(0,null),ja(),Ra(t),null!==e&&Ai(e,t,r,!0),t.childLanes=i,null}function Bo(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return pa(t,e.child,null,n),(e=Bo(t,t.pendingProps)).flags|=2,Fa(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Go(e,t,n,r,i){return Di(t),n=ts(e,t,n,r,void 0,i),r=as(),null===e||Po?(hi&&r&&oi(t),t.flags|=1,Lo(e,t,n,i),t.child):(ss(e,t,i),al(e,t,i))}function Qo(e,t,n,r,i,a){return Di(t),t.updateQueue=null,n=rs(t,r,n,i),ns(e),r=as(),null===e||Po?(hi&&r&&oi(t),t.flags|=1,Lo(e,t,n,a),t.child):(ss(e,t,a),al(e,t,a))}function Ko(e,t,n,r,i){if(Di(t),null===t.stateNode){var a=Rr,s=n.contextType;"object"===typeof s&&null!==s&&(a=Mi(s)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=xo,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ya(t),s=n.contextType,a.context="object"===typeof s&&null!==s?Mi(s):Rr,a.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(wo(t,n,s,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(s=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&xo.enqueueReplaceState(a,a.state,null),Na(t,r,a,i),Ea(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=Eo(n,o);a.props=l;var c=a.context,u=n.contextType;s=Rr,"object"===typeof u&&null!==u&&(s=Mi(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==s)&&So(t,a,r,s),ga=!1;var h=t.memoizedState;a.state=h,Na(t,r,a,i),Ea(),c=t.memoizedState,o||h!==c||ga?("function"===typeof d&&(wo(t,n,d,r),c=t.memoizedState),(l=ga||ko(t,n,l,r,h,c,s))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=s,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,va(e,t),u=Eo(n,s=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Rr,"object"===typeof c&&null!==c&&(l=Mi(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&So(t,a,r,l),ga=!1,h=t.memoizedState,a.state=h,Na(t,r,a,i),Ea();var f=t.memoizedState;s!==d||h!==f||ga||null!==e&&null!==e.dependencies&&ji(e.dependencies)?("function"===typeof o&&(wo(t,n,o,r),f=t.memoizedState),(u=ga||ko(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&ji(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Ho(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=pa(t,e.child,null,i),t.child=pa(t,null,n,i)):Lo(e,t,n,i),t.memoizedState=a.state,e=t.child):e=al(e,t,i),e}function Wo(e,t,n,r){return wi(),t.flags|=256,Lo(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:$i()}}function $o(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tc),e}function Jo(e,t,n){var r,i=t.pendingProps,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Va.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hi){if(a?La(t):za(),(e=di)?null!==(e=null!==(e=jd(e,pi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ni?{id:ri,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},(n=Qr(e)).return=t,t.child=n,ui=t,di=null):e=null,null===e)throw gi(t);return Md(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(za(),l=el({mode:"hidden",children:l},a=t.mode),i=Hr(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Xo(n),i.childLanes=$o(e,r,n),t.memoizedState=Yo,Vo(null,i)):(La(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(La(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(za(),t.child=e.child,t.flags|=128,t=null):(za(),l=i.fallback,a=t.mode,i=el({mode:"visible",children:i.children},a),(l=Hr(l,a,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,pa(t,e.child,null,n),(i=t.child).memoizedState=Xo(n),i.childLanes=$o(e,r,n),t.memoizedState=Yo,t=Vo(null,i));else if(La(t),Md(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(s(419))).stack="",i.digest=r,ki({value:i,source:null,stack:null}),t=tl(e,t,n)}else if(Po||Ai(e,t,n,!1),r=0!==(n&e.childLanes),Po||r){if(null!==(r=mc)&&(0!==(i=Le(r,n))&&i!==c.retryLane))throw c.retryLane=i,Pr(e,i),Yc(r,e,i),Mo;Dd(l)||ou(),t=tl(e,t,n)}else Dd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,di=Pd(l.nextSibling),ui=t,hi=!0,fi=null,pi=!1,null!==e&&ci(t,e),(t=Zo(t,i.children)).flags|=4096);return t}return a?(za(),l=i.fallback,a=t.mode,u=(c=e.child).sibling,(i=Ur(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ur(u,l):(l=Hr(l,a,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Vo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(a=l.cachePool)?(c=Fi._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=$i(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=$o(e,r,n),t.memoizedState=Yo,Vo(e.child,i)):(La(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function tl(e,t,n){return pa(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function rl(e,t,n,r,i,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.treeForkCount=a)}function il(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var s=Va.current,o=0!==(2&s);if(o?(s=1&s|2,t.flags|=128):s&=1,U(Va,s),Lo(e,t,r,n),r=hi?Zr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rl(t,!1,i,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rl(t,!0,n,null,a,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ai(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ji(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Po=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Po=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),_i(0,Fi,e.memoizedState.cache),wi();break;case 27:case 5:X(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:_i(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Oa(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(La(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Jo(e,t,n):(La(t),null!==(e=al(e,t,n))?e.sibling:null);La(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ai(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return il(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),U(Va,Va.current),r)break;return null;case 22:return t.lanes=0,Fo(e,t,n,t.pendingProps);case 24:_i(0,Fi,e.memoizedState.cache)}return al(e,t,n)}(e,t,n);Po=0!==(131072&e.flags)}else Po=!1,hi&&0!==(1048576&t.flags)&&si(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ia(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===k){t.tag=11,t=Oo(null,t,e,r,n);break e}if(i===N){t.tag=14,t=Ro(null,t,e,r,n);break e}}throw t=D(e)||e,Error(s(306,t,""))}Vr(e)?(r=Eo(e,r),t.tag=1,t=Ko(null,t,e,r,n)):(t.tag=0,t=Go(null,t,e,r,n))}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return Ko(e,t,r=t.type,i=Eo(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(s(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,va(e,t),Na(t,r,null,n);var o=t.memoizedState;if(r=o.cache,_i(0,Fi,r),r!==a.cache&&Ii(t,[Fi],n,!0),Ea(),r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Wo(e,t,r,n);break e}if(r!==i){ki(i=Yr(Error(s(424)),t)),t=Wo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(di=Pd(e.firstChild),ui=t,hi=!0,fi=null,pi=!0,n=ma(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wi(),r===i){t=al(e,t,n);break e}Lo(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Qd(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(r=yd(Q.current).createElement(n))[Ue]=t,r[Be]=e,fd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Qd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&hi&&(r=t.stateNode=zd(t.type,t.pendingProps,Q.current),ui=t,pi=!0,i=di,Cd(t.type)?(Ld=i,di=Pd(r.firstChild)):di=i),Lo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((i=r=di)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[We])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=Pd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,pi))?(t.stateNode=r,ui=t,di=Pd(r.firstChild),pi=!1,i=!0):i=!1),i||gi(t)),X(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,wd(i,a)?r=null:null!==o&&wd(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ts(e,t,is,null,null,n),dh._currentValue=i),Ho(e,t),Lo(e,t,r,n),t.child;case 6:return null===e&&hi&&((e=n=di)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}(n,t.pendingProps,pi))?(t.stateNode=n,ui=t,di=null,e=!0):e=!1),e||gi(t)),null;case 13:return Jo(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pa(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return Oo(e,t,t.type,t.pendingProps,n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_i(0,t.type,r.value),Lo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Di(t),r=r(i=Mi(i)),t.flags|=1,Lo(e,t,r,n),t.child;case 14:return Ro(e,t,t.type,t.pendingProps,n);case 15:return zo(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===r.mode)return e=Bo(t,r),t.lanes=536870912,Vo(null,e);if(Oa(t),(e=di)?null!==(e=null!==(e=jd(e,pi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ni?{id:ri,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},(n=Qr(e)).return=t,t.child=n,ui=t,di=null):e=null,null===e)throw gi(t);return t.lanes=536870912,null}return Bo(t,r)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(Oa(t),i)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Po||Ai(e,t,n,!1),i=0!==(n&e.childLanes),Po||i){if(null!==(r=mc)&&0!==(o=Le(r,n))&&o!==a.retryLane)throw a.retryLane=o,Pr(e,o),Yc(r,e,o),Mo;ou(),t=qo(e,t,n)}else e=a.treeContext,di=Pd(o.nextSibling),ui=t,hi=!0,fi=null,pi=!1,null!==e&&ci(t,e),(t=Bo(t,r)).flags|=4096;return t}return(e=Ur(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Fo(e,t,n,t.pendingProps);case 24:return Di(t),r=Mi(Fi),null===e?(null===(i=Yi())&&(i=mc,a=Vi(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},ya(t),_i(0,Fi,i)):(0!==(e.lanes&n)&&(va(e,t),Na(t,null,null,n),Ea()),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),_i(0,Fi,r)):(r=a.cache,_i(0,Fi,r),r!==i.cache&&Ii(t,[Fi],n,!0))),Lo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!iu())throw aa=ta,Zi;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ah(t)){if(!iu())throw aa=ta,Zi;e.flags|=8192}}function dl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Ic|=t)}function hl(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(li(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ci(Fi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bi(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,xi())),fl(t),null;case 26:var i=t.type,a=t.memoizedState;return null===e?(ll(t),null!==a?(fl(t),ul(t,a)):(fl(t),cl(t,i,0,0,n))):a?a!==e.memoizedState?(ll(t),fl(t),ul(t,a)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,i,0,0,n)),null;case 27:if($(t),n=Q.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return fl(t),null}e=H.current,bi(t)?yi(t):(e=zd(i,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if($(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(s(166));return fl(t),null}if(a=H.current,bi(t))yi(t);else{var o=yd(Q.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?o.createElement(i,{is:r.is}):o.createElement(i)}}a[Ue]=t,a[Be]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(fd(a,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=Q.current,bi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ui))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ud(e.nodeValue,n)))||gi(t,!0)}else(e=yd(e).createTextNode(r))[Ue]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bi(t),null!==n){if(null===e){if(!r)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ue]=t}else wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=xi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fa(t),t):(Fa(t),null);if(0!==(128&t.flags))throw Error(s(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=bi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[Ue]=t}else wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),i=!1}else i=xi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Fa(t),t):(Fa(t),null)}return Fa(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),fl(t),null);case 4:return Y(),null===e&&ed(t.stateNode.containerInfo),fl(t),null;case 10:return Ci(t.type),fl(t),null;case 19:if(V(Va),null===(r=t.memoizedState))return fl(t),null;if(i=0!==(128&t.flags),null===(a=r.rendering))if(i)hl(r,!1);else{if(0!==Ec||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ua(e))){for(t.flags|=128,hl(r,!1),e=a.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return U(Va,1&Va.current|2),hi&&ai(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Lc&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Ua(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!hi)return fl(t),null}else 2*le()-r.renderingStartTime>Lc&&536870912!==n&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Va.current,U(Va,i?1&n|2:1&n),hi&&ai(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return Fa(t),Da(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&dl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Wi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ci(Fi),fl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function ml(e,t){switch(li(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ci(Fi),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Fa(t),null===t.alternate)throw Error(s(340));wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fa(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Va),null;case 4:return Y(),null;case 10:return Ci(t.type),null;case 22:case 23:return Fa(t),Da(),null!==e&&V(Wi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ci(Fi),null;default:return null}}function gl(e,t){switch(li(t),t.tag){case 3:Ci(Fi),Y();break;case 26:case 27:case 5:$(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Fa(t);break;case 13:Fa(t);break;case 19:V(Va);break;case 10:Ci(t.type);break;case 22:case 23:Fa(t),Da(),null!==e&&V(Wi);break;case 24:Ci(Fi)}}function yl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,s=n.inst;r=a(),s.destroy=r}n=n.next}while(n!==i)}}catch(o){Eu(t,t.return,o)}}function vl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var s=r.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){Eu(i,l,u)}}}r=r.next}while(r!==a)}}catch(u){Eu(t,t.return,u)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ca(t,n)}catch(r){Eu(e,e.return,r)}}}function wl(e,t,n){n.props=Eo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Eu(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){Eu(e,t,i)}}function kl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){Eu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){Eu(e,t,a)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Eu(e,e.return,i)}}function El(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||dd(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==h&&dd(e,t,f,p,r,h)}}return void vt(e,o,l,c,u,d,a,i);case"select":for(a in p=o=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(a)||dd(e,t,a,null,r,c)}for(i in r)if(a=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=a||null!=c))switch(i){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&dd(e,t,i,a,r,c)}return t=l,n=o,r=p,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:dd(e,t,l,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(s(91));break;default:i!==a&&dd(e,t,o,i,r,a)}return void kt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else dd(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else dd(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&dd(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:dd(e,t,u,f,r,p)}return;default:if(Tt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&hd(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||hd(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&dd(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||dd(e,t,h,f,r,p)}(r,e.type,n,t),r[Be]=t}catch(i){Eu(e,e.return,i)}}function Nl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function _l(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Nl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Dt));else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Cd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);fd(t,r,n),t[Ue]=e,t[Be]=n}catch(a){Eu(e,e.return,a)}}var Al=!1,jl=!1,Dl=!1,Ml="function"===typeof WeakSet?WeakSet:Set,Pl=null;function Ll(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&yl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){Eu(n,n.return,s)}else{var i=Eo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Eu(n,n.return,o)}}64&r&&bl(n),512&r&&xl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ca(e,t)}catch(s){Eu(n,n.return,s)}}break;case 27:null===t&&4&r&&Il(n);case 26:case 5:Yl(e,n),null===t&&4&r&&Sl(n),512&r&&xl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Ul(e,n);break;case 13:Yl(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Tu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Al)){t=null!==t&&null!==t.memoizedState||jl,i=Al;var a=jl;Al=r,(jl=t)&&!a?$l(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Al=i,jl=a}break;case 30:break;default:Yl(e,n)}}function Ol(e){var t=e.alternate;null!==t&&(e.alternate=null,Ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rl=null,zl=!1;function Fl(e,t,n){for(n=n.child;null!==n;)Vl(e,t,n),n=n.sibling}function Vl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(a){}switch(n.tag){case 26:jl||kl(n,t),Fl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:jl||kl(n,t);var r=Rl,i=zl;Cd(n.type)&&(Rl=n.stateNode,zl=!1),Fl(e,t,n),Fd(n.stateNode),Rl=r,zl=i;break;case 5:jl||kl(n,t);case 6:if(r=Rl,i=zl,Rl=null,Fl(e,t,n),zl=i,null!==(Rl=r))if(zl)try{(9===Rl.nodeType?Rl.body:"HTML"===Rl.nodeName?Rl.ownerDocument.body:Rl).removeChild(n.stateNode)}catch(s){Eu(n,t,s)}else try{Rl.removeChild(n.stateNode)}catch(s){Eu(n,t,s)}break;case 18:null!==Rl&&(zl?(Td(9===(e=Rl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):Td(Rl,n.stateNode));break;case 4:r=Rl,i=zl,Rl=n.stateNode.containerInfo,zl=!0,Fl(e,t,n),Rl=r,zl=i;break;case 0:case 11:case 14:case 15:vl(2,n,t),jl||vl(4,n,t),Fl(e,t,n);break;case 1:jl||(kl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),Fl(e,t,n);break;case 21:Fl(e,t,n);break;case 22:jl=(r=jl)||null!==n.memoizedState,Fl(e,t,n),jl=r;break;default:Fl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gh(e)}catch(n){Eu(t,t.return,n)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gh(e)}catch(n){Eu(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ml),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ml),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Iu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Cd(l.type)){Rl=l.stateNode,zl=!1;break e}break;case 5:Rl=l.stateNode,zl=!1;break e;case 3:case 4:Rl=l.stateNode.containerInfo,zl=!0;break e}l=l.return}if(null===Rl)throw Error(s(160));Vl(a,o,i),Rl=null,zl=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ql(t,e),t=t.sibling}var Gl=null;function Ql(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Kl(e),4&r&&(vl(3,e,e.return),yl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Kl(e),512&r&&(jl||null===n||kl(n,n.return)),64&r&&Al&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Gl;if(Hl(t,e),Kl(e),512&r&&(jl||null===n||kl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[We]||a[Ue]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),fd(a,r,n),a[Ue]=e,et(a),r=a;break e;case"link":var o=rh("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}fd(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(o=rh("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}fd(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(s(468,r))}a[Ue]=e,et(a),r=a}e.stateNode=r}else ih(i,e.type,e.stateNode);else e.stateNode=Jd(i,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?ih(i,e.type,e.stateNode):Jd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&El(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Kl(e),512&r&&(jl||null===n||kl(n,n.return)),null!==n&&4&r&&El(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Kl(e),512&r&&(jl||null===n||kl(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(m){Eu(e,e.return,m)}}4&r&&null!=e.stateNode&&El(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Dl=!0);break;case 6:if(Hl(t,e),Kl(e),4&r){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Eu(e,e.return,m)}}break;case 3:if(nh=null,i=Gl,Gl=Bd(t.containerInfo),Hl(t,e),Gl=i,Kl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(m){Eu(e,e.return,m)}Dl&&(Dl=!1,Wl(e));break;case 4:r=Gl,Gl=Bd(e.stateNode.containerInfo),Hl(t,e),Kl(e),Gl=r;break;case 12:default:Hl(t,e),Kl(e);break;case 31:case 19:Hl(t,e),Kl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 13:Hl(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Mc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Al,d=jl;if(Al=u||i,jl=d||c,Hl(t,e),jl=d,Al=u,Kl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Al||jl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,i)"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Eu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){Eu(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Id(p,!0):Id(c.stateNode,!1)}catch(m){Eu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,ql(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Nl(r)){n=r;break}r=r.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode;Tl(e,_l(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(Et(a,""),n.flags&=-33),Tl(e,_l(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Cl(e,_l(e),o);break;default:throw Error(s(161))}}catch(l){Eu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Wl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Wl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ll(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Xl(t);break;case 1:kl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),Xl(t);break;case 27:Fd(t.stateNode);case 26:case 5:kl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function $l(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:$l(i,a,n),yl(4,a);break;case 1:if($l(i,a,n),"function"===typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){Eu(r,r.return,c)}if(null!==(i=(r=a).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)_a(l[i],o)}catch(c){Eu(r,r.return,c)}}n&&64&s&&bl(a),xl(a,a.return);break;case 27:Il(a);case 26:case 5:$l(i,a,n),n&&null===r&&4&s&&Sl(a),xl(a,a.return);break;case 12:$l(i,a,n);break;case 31:$l(i,a,n),n&&4&s&&Ul(i,a);break;case 13:$l(i,a,n),n&&4&s&&Bl(i,a);break;case 22:null===a.memoizedState&&$l(i,a,n),xl(a,a.return);break;case 30:break;default:$l(i,a,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&i&&yl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){ec(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"===typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Eu(t,t.return,l)}}else ec(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?ec(e,t,n,r):rc(e,t):2&a._visibility?ec(e,t,n,r):(a._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Jl(s,t);break;case 24:ec(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function nc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,s=t,o=n,l=r,c=s.flags;switch(s.tag){case 0:case 11:case 15:nc(a,s,o,l,i),yl(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u._visibility?nc(a,s,o,l,i):rc(a,s):(u._visibility|=2,nc(a,s,o,l,i)),i&&2048&c&&Jl(s.alternate,s);break;case 24:nc(a,s,o,l,i),i&&2048&c&&Zl(s.alternate,s);break;default:nc(a,s,o,l,i)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:rc(n,r),2048&i&&Jl(r.alternate,r);break;case 24:rc(n,r),2048&i&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var ic=8192;function ac(e,t,n){if(e.subtreeFlags&ic)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&ic&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Kd(r.href),a=t.querySelector(Wd(i));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=Yd(r),(i=Vd.get(i))&&eh(r,i),et(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),fd(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:ac(e,t,n);break;case 3:case 4:var r=Gl;Gl=Bd(e.stateNode.containerInfo),ac(e,t,n),Gl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=ic,ic=16777216,ac(e,t,n),ic=r):ac(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function dc(e,t){for(;null!==Pl;){var n=Pl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Pl=r;else e:for(n=e;null!==Pl;){var i=(r=Pl).sibling,a=r.return;if(Ol(r),r===n){Pl=null;break e}if(null!==i){i.return=a,Pl=i;break e}Pl=a}}}var hc={getCacheForType:function(e){var t=Mi(Fi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Mi(Fi).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,pc=0,mc=null,gc=null,yc=0,vc=0,bc=null,wc=!1,xc=!1,kc=!1,Sc=0,Ec=0,Nc=0,_c=0,Cc=0,Tc=0,Ic=0,Ac=null,jc=null,Dc=!1,Mc=0,Pc=0,Lc=1/0,Oc=null,Rc=null,zc=0,Fc=null,Vc=null,Uc=0,Bc=0,qc=null,Hc=null,Gc=0,Qc=null;function Kc(){return 0!==(2&pc)&&0!==yc?yc&-yc:null!==P.T?qu():ze()}function Wc(){if(0===Tc)if(0===(536870912&yc)||hi){var e=Ee;0===(3932160&(Ee<<=1))&&(Ee=262144),Tc=e}else Tc=536870912;return null!==(e=Ma.current)&&(e.flags|=32),Tc}function Yc(e,t,n){(e!==mc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,yc,Tc,!1)),De(e,n),0!==(2&pc)&&e===mc||(e===mc&&(0===(2&pc)&&(_c|=n),4===Ec&&Zc(e,yc,Tc,!1)),Ou(e))}function Xc(e,t,n){if(0!==(6&pc))throw Error(s(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),i=r?function(e,t){var n=pc;pc|=2;var r=au(),i=su();mc!==e||yc!==t?(Oc=null,Lc=le()+500,nu(e,t)):xc=Te(e,t);e:for(;;)try{if(0!==vc&&null!==gc){t=gc;var a=bc;t:switch(vc){case 1:vc=0,bc=null,fu(e,t,a,1);break;case 2:case 9:if(na(a)){vc=0,bc=null,hu(t);break}t=function(){2!==vc&&9!==vc||mc!==e||(vc=7),Ou(e)},a.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:na(a)?(vc=0,bc=null,hu(t)):(vc=0,bc=null,fu(e,t,a,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?ah(o):l.stateNode.complete){vc=0,bc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,pu(u)):gc=null}break t}}vc=0,bc=null,fu(e,t,a,5);break;case 6:vc=0,bc=null,fu(e,t,a,6);break;case 8:tu(),Ec=6;break e;default:throw Error(s(462))}}uu();break}catch(d){ru(e,d)}return Ni=Ei=null,P.H=r,P.A=i,pc=n,null!==gc?0:(mc=null,yc=0,jr(),Ec)}(e,t):lu(e,t,!0),a=r;;){if(0===i){xc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!a||Jc(n)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Ac;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,o).flags|=256),2!==(o=lu(l,o,!1))){if(kc&&!c){l.errorRecoveryDisabledLanes|=a,_c|=a,i=4;break e}a=jc,jc=i,null!==a&&(null===jc?jc=a:jc.push.apply(jc,a))}i=o}if(a=!1,2!==i)continue}}if(1===i){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,a=i){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Tc,!wc);break e;case 2:jc=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(i=Mc+300-le())){if(Zc(r,t,Tc,!wc),0!==Ce(r,0,!0))break e;Uc=t,r.timeoutHandle=kd($c.bind(null,r,n,jc,Oc,Dc,t,Tc,_c,Ic,wc,a,"Throttled",-0,0),i)}else $c(r,n,jc,Oc,Dc,t,Tc,_c,Ic,wc,a,null,-0,0)}break}i=lu(e,t,!1),a=!1}Ou(e)}function $c(e,t,n,r,i,a,s,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){sc(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var p=(62914560&a)===a?Mc-le():(4194048&a)===a?Pc-le():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,s=i.initiatorType,o=i.duration;if(a&&o&&pd(s)){for(s=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&pd(d)&&(s+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(a+s)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(d,p),null!==p)return Uc=a,e.cancelPendingCommit=p(gu.bind(null,e,t,a,n,r,i,s,o,l,u,d,null,h,f)),void Zc(e,a,s,!c)}gu(e,t,a,n,r,i,s,o,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Zn(a(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Cc,t&=~_c,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-we(i),s=1<<a;r[a]=-1,i&=~s}0!==n&&Me(e,n,t)}function eu(){return 0!==(6&pc)||(Ru(0,!1),!1)}function tu(){if(null!==gc){if(0===vc)var e=gc.return;else Ni=Ei=null,os(e=gc),la=null,ca=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,tu(),mc=e,gc=n=Ur(e.current,null),yc=t,vc=0,bc=null,wc=!1,xc=Te(e,t),kc=!1,Ic=Tc=Cc=_c=Nc=Ec=0,jc=Ac=null,Dc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-we(r),a=1<<i;t|=e[i],r&=~a}return Sc=t,jr(),n}function ru(e,t){qa=null,P.H=go,t===Ji||t===ea?(t=sa(),vc=3):t===Zi?(t=sa(),vc=4):vc=t===Mo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===gc&&(Ec=1,To(e,Yr(t,e.current)))}function iu(){var e=Ma.current;return null===e||((4194048&yc)===yc?null===Pa:((62914560&yc)===yc||0!==(536870912&yc))&&e===Pa)}function au(){var e=P.H;return P.H=go,null===e?go:e}function su(){var e=P.A;return P.A=hc,e}function ou(){Ec=4,wc||(4194048&yc)!==yc&&null!==Ma.current||(xc=!0),0===(134217727&Nc)&&0===(134217727&_c)||null===mc||Zc(mc,yc,Tc,!1)}function lu(e,t,n){var r=pc;pc|=2;var i=au(),a=su();mc===e&&yc===t||(Oc=null,nu(e,t)),t=!1;var s=Ec;e:for(;;)try{if(0!==vc&&null!==gc){var o=gc,l=bc;switch(vc){case 8:tu(),s=6;break e;case 3:case 2:case 9:case 6:null===Ma.current&&(t=!0);var c=vc;if(vc=0,bc=null,fu(e,o,l,c),n&&xc){s=0;break e}break;default:c=vc,vc=0,bc=null,fu(e,o,l,c)}}cu(),s=Ec;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Ni=Ei=null,pc=r,P.H=i,P.A=a,null===gc&&(mc=null,yc=0,jr()),s}function cu(){for(;null!==gc;)du(gc)}function uu(){for(;null!==gc&&!se();)du(gc)}function du(e){var t=ol(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qo(n,t,t.pendingProps,t.type,void 0,yc);break;case 11:t=Qo(n,t,t.pendingProps,t.type.render,t.ref,yc);break;case 5:os(t);default:gl(n,t),t=ol(n,t=gc=Br(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function fu(e,t,n,r){Ni=Ei=null,os(t),la=null,ca=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ai(t,n,i,!0),null!==(n=Ma.current)){switch(n.tag){case 31:case 13:return null===Pa?ou():null===n.alternate&&0===Ec&&(Ec=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Nu(e,r,i)),!1;case 22:return n.flags|=65536,r===ta?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Nu(e,r,i)),!1}throw Error(s(435,n.tag))}return Nu(e,r,i),ou(),!1}if(hi)return null!==(t=Ma.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==mi&&ki(Yr(e=Error(s(422),{cause:r}),n))):(r!==mi&&ki(Yr(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Yr(r,n),ka(e,i=Ao(e.stateNode,r,i)),4!==Ec&&(Ec=2)),!1;var a=Error(s(520),{cause:r});if(a=Yr(a,n),null===Ac?Ac=[a]:Ac.push(a),4!==Ec&&(Ec=2),null===t)return!0;r=Yr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ka(n,e=Ao(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Rc||!Rc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Do(i=jo(i),e,n,r),ka(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,yc))return Ec=1,To(e,Yr(n,e.current)),void(gc=null)}catch(a){if(null!==i)throw gc=i,a;return Ec=1,To(e,Yr(n,e.current)),void(gc=null)}32768&t.flags?(hi||1===r?e=!0:xc||0!==(536870912&yc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ma.current)&&13===r.tag&&(r.flags|=16384))),mu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void mu(t,wc);e=t.return;var n=pl(t.alternate,t,Sc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===Ec&&(Ec=5)}function mu(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);Ec=6,gc=null}function gu(e,t,n,r,i,a,o,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==zc);if(0!==(6&pc))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-we(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Me(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,n,a|=Ar,o,l,c),e===mc&&(gc=mc=null,yc=0),Vc=t,Fc=e,Uc=n,Bc=a,qc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(he,function(){return ku(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,i=L.p,L.p=2,o=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,md=wh,ar(e=ir(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},wh=!1,Pl=t;null!==Pl;)if(e=(t=Pl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Pl=e;else for(;null!==Pl;){switch(a=(t=Pl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=Eo(n.type,i);e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){Eu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ad(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ad(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Pl=e;break}Pl=t.return}}(e,t)}finally{pc=o,L.p=i,P.T=r}}zc=1,yu(),vu(),bu()}}function yu(){if(1===zc){zc=0;var e=Fc,t=Vc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=L.p;L.p=2;var i=pc;pc|=4;try{Ql(t,e);var a=gd,s=ir(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(s!==o&&o&&o.ownerDocument&&rr(o.ownerDocument.documentElement,o)){if(null!==l&&ar(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var y=nr(o,m),v=nr(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}wh=!!md,gd=md=null}finally{pc=i,L.p=r,P.T=n}}e.current=t,zc=2}}function vu(){if(2===zc){zc=0;var e=Fc,t=Vc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=L.p;L.p=2;var i=pc;pc|=4;try{Ll(e,t.alternate,t)}finally{pc=i,L.p=r,P.T=n}}zc=3}}function bu(){if(4===zc||3===zc){zc=0,oe();var e=Fc,t=Vc,n=Uc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?zc=5:(zc=0,Vc=Fc=null,wu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Rc=null),Re(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=P.T,i=L.p,L.p=2,P.T=null;try{for(var a=e.onRecoverableError,s=0;s<r.length;s++){var o=r[s];a(o.value,{componentStack:o.stack})}}finally{P.T=t,L.p=i}}0!==(3&Uc)&&xu(),Ou(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Qc?Gc++:(Gc=0,Qc=e):Gc=0,Ru(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t)))}function xu(){return yu(),vu(),bu(),ku()}function ku(){if(5!==zc)return!1;var e=Fc,t=Bc;Bc=0;var n=Re(Uc),r=P.T,i=L.p;try{L.p=32>n?32:n,P.T=null,n=qc,qc=null;var a=Fc,o=Uc;if(zc=0,Vc=Fc=null,Uc=0,0!==(6&pc))throw Error(s(331));var l=pc;if(pc|=4,cc(a.current),tc(a,a.current,o,n),pc=l,Ru(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,a)}catch(c){}return!0}finally{L.p=i,P.T=r,wu(e,t)}}function Su(e,t,n){t=Yr(n,t),null!==(e=wa(e,t=Ao(e.stateNode,t,2),2))&&(De(e,2),Ou(e))}function Eu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Rc||!Rc.has(r))){e=Yr(n,e),null!==(r=wa(t,n=jo(2),2))&&(Do(n,r,t,e),De(r,2),Ou(r));break}}t=t.return}}function Nu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(kc=!0,i.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(yc&n)===n&&(4===Ec||3===Ec&&(62914560&yc)===yc&&300>le()-Mc?0===(2&pc)&&nu(e,0):Cc|=n,Ic===yc&&(Ic=0)),Ou(e)}function Cu(e,t){0===t&&(t=Ae()),null!==(e=Pr(e,t))&&(De(e,t),Ou(e))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cu(e,n)}var Au=null,ju=null,Du=!1,Mu=!1,Pu=!1,Lu=0;function Ou(e){e!==ju&&null===e.next&&(null===ju?Au=ju=e:ju=ju.next=e),Mu=!0,Du||(Du=!0,Nd(function(){0!==(6&pc)?ie(ue,zu):Fu()}))}function Ru(e,t){if(!Pu&&Mu){Pu=!0;do{for(var n=!1,r=Au;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var s=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-we(42|e)+1)-1,a=201326741&(a&=i&~(s&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Bu(r,a))}else a=yc,0===(3&(a=Ce(r,r===mc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,a)||(n=!0,Bu(r,a));r=r.next}}while(n);Pu=!1}}function zu(){Fu()}function Fu(){Mu=Du=!1;var e=0;0!==Lu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xd&&(xd=e,!0);return xd=null,!1}()&&(e=Lu);for(var t=le(),n=null,r=Au;null!==r;){var i=r.next,a=Vu(r,t);0===a?(r.next=null,null===n?Au=i:n.next=i,null===i&&(ju=n)):(n=r,(0!==e||0!==(3&a))&&(Mu=!0)),r=i}0!==zc&&5!==zc||Ru(e,!1),0!==Lu&&(Lu=0)}function Vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var s=31-we(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=yc,n=Ce(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),Re(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=Uu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==zc&&5!==zc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=yc;return 0===(r=Ce(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,r,t),Vu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function Bu(e,t){if(xu())return null;Xc(e,t,!0)}function qu(){if(0===Lu){var e=Hi;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Lu=e}return Lu}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:jt(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Qu=0;Qu<Nr.length;Qu++){var Ku=Nr[Qu];_r(Ku.toLowerCase(),"on"+(Ku[0].toUpperCase()+Ku.slice(1)))}_r(yr,"onAnimationEnd"),_r(vr,"onAnimationIteration"),_r(br,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(wr,"onTransitionRun"),_r(xr,"onTransitionStart"),_r(kr,"onTransitionCancel"),_r(Sr,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wu));function Xu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Cr(u)}i.currentTarget=null,a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;a=o,i.currentTarget=c;try{a(i)}catch(u){Cr(u)}i.currentTarget=null,a=l}}}}function $u(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(td(t,e,2,!1),n.add(r))}function Ju(e,t,n){var r=0;t&&(r|=4),td(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Ju("selectionchange",!1,t))}}function td(e,t,n,r){switch(Ch(t)){case 2:var i=xh;break;case 8:i=kh;break;default:i=Sh}n=i.bind(null,t,n,e),i=void 0,!qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nd(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==o;){if(null===(s=Xe(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){r=a=s;continue e}o=o.parentNode}}r=r.return}Ft(function(){var r=a,i=Pt(n),s=[];e:{var o=Er.get(e);if(void 0!==o){var c=rn,u=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=bn;break;case"focusin":u="focus",c=un;break;case"focusout":u="blur",c=un;break;case"beforeblur":case"afterblur":c=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=cn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case yr:case vr:case br:c=dn;break;case Sr:c=kn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Sn;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=wn;break;case"toggle":case"beforetoggle":c=En}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&d.push(rd(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,i),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Mt||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[qe])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=ln,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:Je(c),p=null==u?o:Je(u),(o=new d(g,m+"leave",c,n,i)).target=h,o.relatedTarget=p,g=null,Xe(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=ad,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var y=m;y;y=d(y))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&sd(s,o,c,d,!1),null!==u&&null!==h&&sd(s,h,u,d,!0)}if("select"===(c=(o=r?Je(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Bn;else if(On(o))if(qn)v=Jn;else{v=Xn;var b=Yn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(v=Bn):v=$n;switch(v&&(v=v(e,r))?Rn(s,v,n,i):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&wt(o,"number",o.value)),b=r?Je(r):window,e){case"focusin":(On(b)||"true"===b.contentEditable)&&(or=b,lr=r,cr=null);break;case"focusout":cr=lr=or=null;break;case"mousedown":ur=!0;break;case"contextmenu":case"mouseup":case"dragend":ur=!1,dr(s,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":dr(s,n,i)}var w;if(_n)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Pn?Dn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(In&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Pn&&(w=Wt()):(Qt="value"in(Gt=i)?Gt.value:Gt.textContent,Pn=!0)),0<(b=id(r,x)).length&&(x=new fn(x,e,null,n,i),s.push({event:x,listeners:b}),w?x.data=w:null!==(w=Mn(n))&&(x.data=w))),(w=Tn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(jn=!0,An);case"textInput":return(e=t.data)===An&&jn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!_n&&Dn(e,t)?(e=Wt(),Kt=Qt=Gt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=id(r,"onBeforeInput")).length&&(b=new fn("onBeforeInput","beforeinput",null,n,i),s.push({event:b,listeners:x}),b.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var a=Hu((i[Be]||null).action),s=r.submitter;s&&null!==(t=(t=s[Be]||null)?Hu(t.formAction):s.getAttribute("formAction"))&&(a=t,s=null);var o=new rn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Lu){var e=s?Gu(i,s):new FormData(i);to(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=s?Gu(i,s):new FormData(i),to(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(s,e,r,n,i)}Xu(s,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function id(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Ut(e,n))&&r.unshift(rd(e,i,a)),null!=(i=Ut(e,t))&&r.push(rd(e,i,a))),3===e.tag)return r;e=e.return}return[]}function ad(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sd(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Ut(n,a))&&s.unshift(rd(n,c,l)):i||null!=(c=Ut(n,a))&&s.push(rd(n,c,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var od=/\r\n?/g,ld=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(ld,"")}function ud(e,t){return t=cd(t),cd(e)===t}function dd(e,t,n,r,i,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Ct(e,r,a);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=jt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&dd(e,t,"name",i.name,i,null),dd(e,t,"formEncType",i.formEncType,i,null),dd(e,t,"formMethod",i.formMethod,i,null),dd(e,t,"formTarget",i.formTarget,i,null)):(dd(e,t,"encType",i.encType,i,null),dd(e,t,"method",i.method,i,null),dd(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=jt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=jt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":$u("beforetoggle",e),$u("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function hd(e,t,n,r,i,a){switch(n){case"style":Ct(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(s(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Be]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function fd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:dd(e,t,r,o,n,null)}}return a&&dd(e,t,"srcSet",n.srcSet,n,null),void(i&&dd(e,t,"src",n.src,n,null));case"input":$u("invalid",e);var l=r=o=a=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(s(137,t));break;default:dd(e,t,i,d,n,null)}}return void bt(e,r,l,c,u,o,a,!1);case"select":for(a in $u("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:dd(e,t,a,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(o in $u("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:dd(e,t,o,l,n,null)}return void St(e,i,a,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else dd(e,t,c,i,n,null);return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(i=0;i<Wu.length;i++)$u(Wu[i],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:dd(e,t,u,i,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&hd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&dd(e,t,l,i,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var md=null,gd=null;function yd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xd=null;var kd="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,Ed="function"===typeof Promise?Promise:void 0,Nd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ed?function(e){return Ed.resolve(null).then(e).catch(_d)}:kd;function _d(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function Td(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Gh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Fd(e.ownerDocument.documentElement);else if("head"===n){Fd(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var s=a.nextSibling,o=a.nodeName;a[We]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}else"body"===n&&Fd(e.ownerDocument.body);n=i}while(n);Gh(t)}function Id(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ad(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ad(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function jd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}function Dd(e){return"$?"===e.data||"$~"===e.data}function Md(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Pd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Ld=null;function Od(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Pd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Rd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function zd(e,t,n){switch(t=yd(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function Fd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Vd=new Map,Ud=new Set;function Bd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qd=L.d;L.d={f:function(){var e=qd.f(),t=eu();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?ro(t):qd.r(e)},D:function(e){qd.D(e),Gd("dns-prefetch",e,null)},C:function(e,t){qd.C(e,t),Gd("preconnect",e,t)},L:function(e,t,n){qd.L(e,t,n);var r=Hd;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var a=i;switch(t){case"style":a=Kd(e);break;case"script":a=Xd(e)}Vd.has(a)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Vd.set(a,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Wd(a))||"script"===t&&r.querySelector($d(a))||(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){qd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Xd(e)}if(!Vd.has(a)&&(e=f({rel:"modulepreload",href:e},t),Vd.set(a,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($d(a)))return}fd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){qd.X(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,i=Xd(e),a=r.get(i);a||((a=n.querySelector($d(i)))||(e=f({src:e,async:!0},t),(t=Vd.get(i))&&th(e,t),et(a=n.createElement("script")),fd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}},S:function(e,t,n){qd.S(e,t,n);var r=Hd;if(r&&e){var i=Ze(r).hoistableStyles,a=Kd(e);t=t||"default";var s=i.get(a);if(!s){var o={loading:0,preload:null};if(s=r.querySelector(Wd(a)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Vd.get(a))&&eh(e,n);var l=s=r.createElement("link");et(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:o},i.set(a,s)}}},M:function(e,t){qd.M(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,i=Xd(e),a=r.get(i);a||((a=n.querySelector($d(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Vd.get(i))&&th(e,t),et(a=n.createElement("script")),fd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}};var Hd="undefined"===typeof document?null:document;function Gd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Ud.has(i)||(Ud.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Qd(e,t,n,r){var i,a,o,l,c=(c=Q.current)?Bd(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Wd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Vd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Vd.set(e,n),u||(i=c,a=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),fd(a,"link",o),et(a),i.head.appendChild(a))))),t&&null===r)throw Error(s(528,""));return d}if(t&&null!==r)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Kd(e){return'href="'+yt(e)+'"'}function Wd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Xd(e){return'[src="'+yt(e)+'"]'}function $d(e){return"script[async]"+e}function Jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fd(r,"style",i),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Kd(n.href);var a=e.querySelector(Wd(i));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=Yd(n),(i=Vd.get(i))&&eh(r,i),et(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fd(a,"link",r),t.state.loading|=4,Zd(a,n.precedence,e),t.instance=a;case"script":return a=Xd(n.src),(i=e.querySelector($d(a)))?(t.instance=i,et(i),i):(r=n,(i=Vd.get(a))&&th(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),fd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,s=0;s<r.length;s++){var o=r[s];if(o.dataset.precedence===t)a=o;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nh=null;function rh(e,t,n){if(null===nh){var r=new Map,i=nh=new Map;i.set(n,r)}else(r=(i=nh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[We]||a[Ue]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var s=a.getAttribute(t)||"";s=e+s;var o=r.get(s);o?o.push(a):r.set(s,[a])}}return r}function ih(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(uh,e),lh=null,oh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var r=n.get(null);else{n=new Map,lh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var s=i[a];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}s=(i=t.instance).getAttribute("data-precedence"),(a=n.get(s)||r)===r&&n.set(null,i),n.set(s,i),this.count++,r=oh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var dh={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function hh(e,t,n,r,i,a,s,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fh(e,t,n,r,i,a,s,o,l,c,u,d){return e=new hh(e,t,n,s,l,c,u,d,o),t=1,!0===a&&(t|=24),a=Fr(3,null,null,t),e.current=a,a.stateNode=e,(t=Vi()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ya(a),e}function ph(e){return e?e=Rr:Rr}function mh(e,t,n,r,i,a){i=ph(i),null===r.context?r.context=i:r.pendingContext=i,(r=ba(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=wa(e,r,t))&&(Yc(n,0,t),xa(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=Pr(e,67108864);null!==t&&Yc(t,0,67108864),yh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Pr(e,t=Oe(t));null!==n&&Yc(n,0,t),yh(e,t)}}var wh=!0;function xh(e,t,n,r){var i=P.T;P.T=null;var a=L.p;try{L.p=2,Sh(e,t,n,r)}finally{L.p=a,P.T=i}}function kh(e,t,n,r){var i=P.T;P.T=null;var a=L.p;try{L.p=8,Sh(e,t,n,r)}finally{L.p=a,P.T=i}}function Sh(e,t,n,r){if(wh){var i=Eh(r);if(null===i)nd(e,t,r,Nh,n),Oh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ih=Rh(Ih,e,t,n,r,i),!0;case"dragenter":return Ah=Rh(Ah,e,t,n,r,i),!0;case"mouseover":return jh=Rh(jh,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dh.set(a,Rh(Dh.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Mh.set(a,Rh(Mh.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Oh(e,r),4&t&&-1<Lh.indexOf(e)){for(;null!==i;){var a=$e(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var s=_e(a.pendingLanes);if(0!==s){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-we(s);o.entanglements[1]|=l,s&=~l}Ou(a),0===(6&pc)&&(Lc=le()+500,Ru(0,!1))}}break;case 31:case 13:null!==(o=Pr(a,2))&&Yc(o,0,2),eu(),yh(a,2)}if(null===(a=Eh(r))&&nd(e,t,r,Nh,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else nd(e,t,r,null,n)}}function Eh(e){return _h(e=Pt(e))}var Nh=null;function _h(e){if(Nh=null,null!==(e=Xe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Th=!1,Ih=null,Ah=null,jh=null,Dh=new Map,Mh=new Map,Ph=[],Lh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oh(e,t){switch(e){case"focusin":case"focusout":Ih=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":jh=null;break;case"pointerover":case"pointerout":Dh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(t.pointerId)}}function Rh(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=$e(t))&&vh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zh(e){var t=Xe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Eh(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&vh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Mt=r,n.target.dispatchEvent(r),Mt=null,t.shift()}return!0}function Vh(e,t,n){Fh(e)&&n.delete(t)}function Uh(){Th=!1,null!==Ih&&Fh(Ih)&&(Ih=null),null!==Ah&&Fh(Ah)&&(Ah=null),null!==jh&&Fh(jh)&&(jh=null),Dh.forEach(Vh),Mh.forEach(Vh)}function Bh(e,t){e.blockedOn===t&&(e.blockedOn=null,Th||(Th=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Uh)))}var qh=null;function Hh(e){qh!==e&&(qh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qh===e&&(qh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===_h(r||n))continue;break}var a=$e(n);null!==a&&(e.splice(t,3),t-=3,to(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Gh(e){function t(t){return Bh(t,e)}null!==Ih&&Bh(Ih,e),null!==Ah&&Bh(Ah,e),null!==jh&&Bh(jh,e),Dh.forEach(t),Mh.forEach(t);for(var n=0;n<Ph.length;n++){var r=Ph[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ph.length&&null===(n=Ph[0]).blockedOn;)zh(n),null===n.blockedOn&&Ph.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],s=i[Be]||null;if("function"===typeof a)s||Hh(n);else if(s){var o=null;if(a&&a.hasAttribute("formAction")){if(i=a,s=a[Be]||null)o=s.formAction;else if(null!==_h(i))continue}else o=s.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hh(n)}}}function Qh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Kh(e){this._internalRoot=e}function Wh(e){this._internalRoot=e}Wh.prototype.render=Kh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));mh(t.current,Kc(),e,t,null,null)},Wh.prototype.unmount=Kh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mh(e.current,2,null,e,null,null),eu(),t[qe]=null}},Wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ph.length&&0!==t&&t<Ph[n].priority;n++);Ph.splice(n,0,e),0===n&&zh(e)}};var Yh=i.version;if("19.2.3"!==Yh)throw Error(s(527,Yh,"19.2.3"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return d(i),e;if(a===r)return d(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{ye=$h.inject(Xh),ve=$h}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,r="",i=No,a=_o,l=Co;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fh(e,1,!1,null,0,n,r,null,i,a,l,Qh),e[qe]=t.current,ed(e),new Kh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var r=!1,i="",a=No,l=_o,c=Co,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fh(e,1,!0,t,0,r,i,u,a,l,c,Qh)).context=ph(null),n=t.current,(i=ba(r=Oe(r=Kc()))).callback=null,wa(n,i,r),n=r,t.current.lanes=n,De(t,n),Ou(t),e[qe]=t.current,ed(e),new Wh(t)},t.version="19.2.3"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=w.prototype=new b;x.constructor=w,g(x,v.prototype),x.isPureReactComponent=!0;var k=Array.isArray;function S(){}var E={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function _(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,i,a,s)}}if(u)return s=s(e),u=""===a?"."+I(e,0):a,k(s)?(i="",null!=u&&(i=u.replace(T,"$&/")+"/"),A(s,t,i,"",function(e){return e})):null!=s&&(C(s)&&(l=s,c=i+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+u,s=_(l.type,c,l.props)),t.push(s)),1;u=0;var d,f=""===a?".":a+":";if(k(e))for(var m=0;m<e.length;m++)u+=A(a=e[m],t,i,o=f+I(a,m),s);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)u+=A(a=a.value,t,i,o=f+I(a,m++),s);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function j(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},P={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=P,t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(a in void 0!==t.key&&(i=""+t.key),t)!N.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var s=Array(a),o=0;o<a;o++)s[o]=arguments[o+2];r.children=s}return _(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)N.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return _(e,a,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),i=E.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,M)}catch(a){M(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useEffectEvent=function(e){return E.H.useEffectEvent(e)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.2.3"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):"script"===n&&s.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,E||(E=!0,S());else{var t=r(u);null!==t&&D(k,t.startTime-e)}}var S,E=!1,N=-1,_=5,C=-1;function T(){return!!y||!(t.unstable_now()-C<_)}function I(){if(y=!1,E){var e=t.unstable_now();C=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(N),N=-1),p=!0;var a=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&D(k,l.startTime-e),n=!1}}break e}finally{h=null,f=a,p=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,j=A.port2;A.port1.onmessage=I,S=function(){j.postMessage(null)}}else S=function(){v(I,0)};function D(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(N),N=-1):g=!0,D(k,a-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".fd8ba581.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="team-accounting:";n.l=(r,i,a,s)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.p="/team-accounting/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,a,[s,o,l]=r,c=0;if(s.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkteam_accounting=self.webpackChunkteam_accounting||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function o(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const d=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const p=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],m=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:d}=e,m=u(e,p);return(0,r.createElement)("svg",c(c(c({ref:t},f),{},{width:i,height:i,stroke:n,strokeWidth:s?24*Number(a)/Number(i):a,className:h("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"}),m),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),g=["className"],y=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{className:a}=n,s=u(n,g);return(0,r.createElement)(m,c({ref:i,iconNode:t,className:h("lucide-".concat((o=d(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),a)},s));var o});return n.displayName=d(e),n},v=y("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),b=y("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),w=y("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),x=y("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),k=y("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),S=y("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),E=y("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),N=y("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),_=y("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),C=y("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),T=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new A;const l=t<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j=function(e){return function(e){const t=T(e);return I.encodeByteArray(t,!0)}(e).replace(/\./g,"")},D=function(e){try{return I.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function M(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const P=()=>{try{return M().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/team-accounting",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&D(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},L=e=>{const t=(e=>{var t;return null===(t=P())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},O=()=>{var e;return null===(e=P())||void 0===e?void 0:e.config};class R{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function z(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}const F={};let V=!1;function U(e,t){if("undefined"===typeof window||"undefined"===typeof document||!z(window.location.host)||F[e]===t||F[e]||V)return;function n(e){return"__firebase__banner__".concat(e)}F[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(F))F[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function a(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{V=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function B(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function q(){var e;const t=null===(e=P())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function H(){return!q()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Q extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(W,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Q(n,a,t)}}const W=/\{\$([^}]+)}/g;function Y(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(X(n)&&X(a)){if(!Y(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function X(e){return null!==e&&"object"===typeof e}function $(e){return e&&e._delegate?e._delegate:e}class J{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Z="[DEFAULT]";class ee{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new R;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Z?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.component?this.component.multipleInstances?e:Z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ee(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ne=[];var re;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(re||(re={}));const ie={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},ae=re.INFO,se={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},oe=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=se[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class le{constructor(e){this.name=e,this._logLevel=ae,this._logHandler=oe,this._userLogHandler=null,ne.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...t),this._logHandler(this,re.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...t),this._logHandler(this,re.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.INFO,...t),this._logHandler(this,re.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.WARN,...t),this._logHandler(this,re.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.ERROR,...t),this._logHandler(this,re.ERROR,...t)}}let ce,ue;const de=new WeakMap,he=new WeakMap,fe=new WeakMap,pe=new WeakMap,me=new WeakMap;let ge={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return he.get(e);if("objectStoreNames"===t)return e.objectStoreNames||fe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return be(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ye(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(we(this),n),be(de.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return be(e.apply(we(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(we(this),t,...r);return fe.set(a,t.sort?t.sort():[t]),be(a)}}function ve(e){return"function"===typeof e?ye(e):(e instanceof IDBTransaction&&function(e){if(he.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});he.set(e,t)}(e),t=e,(ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ge):e);var t}function be(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(be(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&de.set(t,e)}).catch(()=>{}),me.set(t,e),t}(e);if(pe.has(e))return pe.get(e);const t=ve(e);return t!==e&&(pe.set(e,t),me.set(t,e)),t}const we=e=>me.get(e);const xe=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],Se=new Map;function Ee(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Se.get(t))return Se.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ke.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!xe.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),i&&t.done]))[0]};return Se.set(t,a),a}ge=(e=>c(c({},e),{},{get:(t,n,r)=>Ee(t,n)||e.get(t,n,r),has:(t,n)=>!!Ee(t,n)||e.has(t,n)}))(ge);class Ne{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const _e="@firebase/app",Ce="0.14.6",Te=new le("@firebase/app"),Ie="@firebase/app-compat",Ae="@firebase/analytics-compat",je="@firebase/analytics",De="@firebase/app-check-compat",Me="@firebase/app-check",Pe="@firebase/auth",Le="@firebase/auth-compat",Oe="@firebase/database",Re="@firebase/data-connect",ze="@firebase/database-compat",Fe="@firebase/functions",Ve="@firebase/functions-compat",Ue="@firebase/installations",Be="@firebase/installations-compat",qe="@firebase/messaging",He="@firebase/messaging-compat",Ge="@firebase/performance",Qe="@firebase/performance-compat",Ke="@firebase/remote-config",We="@firebase/remote-config-compat",Ye="@firebase/storage",Xe="@firebase/storage-compat",$e="@firebase/firestore",Je="@firebase/ai",Ze="@firebase/firestore-compat",et="firebase",tt="[DEFAULT]",nt={[_e]:"fire-core",[Ie]:"fire-core-compat",[je]:"fire-analytics",[Ae]:"fire-analytics-compat",[Me]:"fire-app-check",[De]:"fire-app-check-compat",[Pe]:"fire-auth",[Le]:"fire-auth-compat",[Oe]:"fire-rtdb",[Re]:"fire-data-connect",[ze]:"fire-rtdb-compat",[Fe]:"fire-fn",[Ve]:"fire-fn-compat",[Ue]:"fire-iid",[Be]:"fire-iid-compat",[qe]:"fire-fcm",[He]:"fire-fcm-compat",[Ge]:"fire-perf",[Qe]:"fire-perf-compat",[Ke]:"fire-rc",[We]:"fire-rc-compat",[Ye]:"fire-gcs",[Xe]:"fire-gcs-compat",[$e]:"fire-fst",[Ze]:"fire-fst-compat",[Je]:"fire-vertex","fire-js":"fire-js",[et]:"fire-js-all"},rt=new Map,it=new Map,at=new Map;function st(e,t){try{e.container.addComponent(t)}catch(n){Te.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ot(e){const t=e.name;if(at.has(t))return Te.debug("There were multiple attempts to register component ".concat(t,".")),!1;at.set(t,e);for(const n of rt.values())st(n,e);for(const n of it.values())st(n,e);return!0}function lt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ct=new K("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ut{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new J("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}function dt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:tt,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw ct.create("bad-app-name",{appName:String(i)});if(n||(n=O()),!n)throw ct.create("no-options");const a=rt.get(i);if(a){if(Y(n,a.options)&&Y(r,a.config))return a;throw ct.create("duplicate-app",{appName:i})}const s=new te(i);for(const l of at.values())s.addComponent(l);const o=new ut(n,r,s);return rt.set(i,o),o}function ht(e,t,n){var r;let i=null!==(r=nt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Te.warn(e.join(" "))}ot(new J("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const ft="firebase-heartbeat-store";let pt=null;function mt(){return pt||(pt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=be(s);return r&&s.addEventListener("upgradeneeded",e=>{r(be(s.result),e.oldVersion,e.newVersion,be(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ft)}catch(n){console.warn(n)}}}).catch(e=>{throw ct.create("idb-open",{originalErrorMessage:e.message})})),pt}async function gt(e,t){try{const n=(await mt()).transaction(ft,"readwrite"),r=n.objectStore(ft);await r.put(t,yt(e)),await n.done}catch(n){if(n instanceof Q)Te.warn(n.message);else{const e=ct.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Te.warn(e.message)}}}function yt(e){return"".concat(e.name,"!").concat(e.options.appId)}class vt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Te.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=bt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),xt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=j(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Te.warn(t),""}}}function bt(){return(new Date).toISOString().substring(0,10)}class wt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!G()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await mt()).transaction(ft),n=await t.objectStore(ft).get(yt(e));return await t.done,n}catch(t){if(t instanceof Q)Te.warn(t.message);else{const e=ct.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Te.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return gt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return gt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function xt(e){return j(JSON.stringify({version:2,heartbeats:e})).length}var kt;kt="",ot(new J("platform-logger",e=>new Ne(e),"PRIVATE")),ot(new J("heartbeat",e=>new vt(e),"PRIVATE")),ht(_e,Ce,kt),ht(_e,Ce,"esm2020"),ht("fire-js","");var St,Et,Nt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},_t={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a,s=e.g[3];a=t+(s^n&(i^s))+r[0]+3614090360&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[1]+3905402710&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[2]+606105819&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[3]+3250441966&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[4]+4118548399&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[5]+1200080426&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[6]+2821735955&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[7]+4249261313&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[8]+1770035416&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[9]+2336552879&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[10]+4294925233&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[11]+2304563134&4294967295,a=t+(s^(n=i+(a<<22&4294967295|a>>>10))&(i^s))+r[12]+1804603682&4294967295,a=s+(i^(t=n+(a<<7&4294967295|a>>>25))&(n^i))+r[13]+4254626195&4294967295,s=t+(a<<12&4294967295|a>>>20),a=i+(n^s&(t^n))+r[14]+2792965006&4294967295,a=n+(t^(i=s+(a<<17&4294967295|a>>>15))&(s^t))+r[15]+1236535329&4294967295,a=t+(i^s&((n=i+(a<<22&4294967295|a>>>10))^i))+r[1]+4129170786&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[6]+3225465664&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[11]+643717713&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[0]+3921069994&4294967295,a=t+(i^s&((n=i+(a<<20&4294967295|a>>>12))^i))+r[5]+3593408605&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[10]+38016083&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[15]+3634488961&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[4]+3889429448&4294967295,a=t+(i^s&((n=i+(a<<20&4294967295|a>>>12))^i))+r[9]+568446438&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[14]+3275163606&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[3]+4107603335&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[8]+1163531501&4294967295,a=t+(i^s&((n=i+(a<<20&4294967295|a>>>12))^i))+r[13]+2850285829&4294967295,a=s+(n^i&((t=n+(a<<5&4294967295|a>>>27))^n))+r[2]+4243563512&4294967295,s=t+(a<<9&4294967295|a>>>23),a=i+(t^n&(s^t))+r[7]+1735328473&4294967295,a=n+(s^t&((i=s+(a<<14&4294967295|a>>>18))^s))+r[12]+2368359562&4294967295,a=t+((n=i+(a<<20&4294967295|a>>>12))^i^s)+r[5]+4294588738&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[8]+2272392833&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[11]+1839030562&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[14]+4259657740&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[1]+2763975236&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[4]+1272893353&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[7]+4139469664&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[10]+3200236656&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[13]+681279174&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[0]+3936430074&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[3]+3572445317&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[6]+76029189&4294967295,a=t+((n=i+(a<<23&4294967295|a>>>9))^i^s)+r[9]+3654602809&4294967295,a=s+((t=n+(a<<4&4294967295|a>>>28))^n^i)+r[12]+3873151461&4294967295,s=t+(a<<11&4294967295|a>>>21),a=i+(s^t^n)+r[15]+530742520&4294967295,a=n+((i=s+(a<<16&4294967295|a>>>16))^s^t)+r[2]+3299628645&4294967295,a=t+(i^((n=i+(a<<23&4294967295|a>>>9))|~s))+r[0]+4096336452&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[7]+1126891415&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[14]+2878612391&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[5]+4237533241&4294967295,a=t+(i^((n=i+(a<<21&4294967295|a>>>11))|~s))+r[12]+1700485571&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[3]+2399980690&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[10]+4293915773&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[1]+2240044497&4294967295,a=t+(i^((n=i+(a<<21&4294967295|a>>>11))|~s))+r[8]+1873313359&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[15]+4264355552&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[6]+2734768916&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[13]+1309151649&4294967295,a=t+(i^((n=i+(a<<21&4294967295|a>>>11))|~s))+r[4]+4149444226&4294967295,a=s+(n^((t=n+(a<<6&4294967295|a>>>26))|~i))+r[11]+3174756917&4294967295,s=t+(a<<10&4294967295|a>>>22),a=i+(t^(s|~n))+r[2]+718787259&4294967295,a=n+(s^((i=s+(a<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let a=this.h,s=0;for(;s<t;){if(0==a)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[a++]=e.charCodeAt(s++),a==this.blockSize){n(this,i),a=0;break}}else for(;s<t;)if(i[a++]=e[s++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function a(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(s(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),a=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=a.add(r);c.l(e)<=0&&(i=i.add(n),a=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(a=s(n)).j(t);d(c)||c.l(e)>0;)c=(a=s(n-=r)).j(t);u(a)&&(a=l),i=i.add(a),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,a=[];for(let r=0;r<i;r++)a[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=s(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let a=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return a+r;for(;a.length<6;)a="0"+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),a=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=a>>>16,t&=65535,a&=65535,n[r]=a<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return s(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,a=65535&this.i(i),s=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=a*o,p(n,2*i+2*t),n[2*i+2*t+1]+=r*o,p(n,2*i+2*t+1),n[2*i+2*t+1]+=a*s,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*s,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Et=_t.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=s(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+a),n);a<8?(a=s(Math.pow(n,a)),i=i.j(a).add(s(e))):(i=i.j(r),i=i.add(s(e)))}return i},St=_t.Integer=r}).apply("undefined"!==typeof Nt?Nt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ct,Tt,It,At,jt,Dt,Mt,Pt,Lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ot={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Lt&&Lt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var s=e[a];if(!(s in i))break e;i=i[s]}(r=r(a=i[e=e[e.length-1]]))!=a&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},a=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){a.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(k)}};function k(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(n){}return e}();function _(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,E),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var T="closure_listenable_"+(1e6*Math.random()|0),I=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function D(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function M(e){const t={};for(const n in e)t[n]=e[n];return t}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function O(e){this.src=e,this.g={},this.h=0}function R(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],a=Array.prototype.indexOf.call(i,t,void 0);(r=a>=0)&&Array.prototype.splice.call(i,a,1),r&&(j(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(let i=0;i<e.length;++i){const a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}O.prototype.add=function(e,t,n,r,i){const a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);const s=z(e,t,r,i);return s>-1?(t=e[s],n||(t.fa=!1)):((t=new A(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),V={};function U(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)U(e,t[a],n,r,i);return null}return n=X(n),e&&e[T]?e.J(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");const o=s(i)?!!i.capture:!!i;let l=W(e);if(l||(e[F]=l=new O(e)),(n=l.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)N||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)q(e,t[a],n,r,i);return null}return n=X(n),e&&e[T]?e.K(t,n,s(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)H(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=X(n),e&&e[T]?(e=e.i,(a=String(t).toString())in e.g&&((n=z(t=e.g[a],n,r,i))>-1&&(j(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[a],e.h--)))):e&&(e=W(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=e>-1?t[e]:null)&&G(n))}function G(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[T])R(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=W(t))?(R(n,e),0==n.h&&(n.src=null,t[F]=null)):j(e)}}}function Q(e){return e in V?V[e]:V[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&G(e),e=n.call(r,t)}return e}function W(e){return(e=e[F])instanceof O?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function $(){S.call(this),this.i=new O(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;L(t=new E(r,e),i)}let a,s;if(i=!0,n)for(s=n.length-1;s>=0;s--)a=t.g=n[s],i=Z(a,r,!0,t)&&i;if(a=t.g=e,i=Z(a,r,!0,t)&&i,i=Z(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.g=n[s],i=Z(a,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){const s=t[a];if(s&&!s.da&&s.capture==n){const t=s.listener,n=s.ha||s.src;s.fa&&R(e.i,s),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:a.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u($,S),$.prototype[T]=!0,$.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},$.prototype.N=function(){if($.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)j(n[e]);delete e.g[t],e.h--}}this.G=null},$.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function ie(e){D(e.g,function(e,t){this.g.hasOwnProperty(t)&&G(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=a.JSON.stringify,se=a.JSON.parse,oe=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){E.call(this,"d")}function he(){E.call(this,"c")}u(de,E),u(he,E);var fe={},pe=null;function me(){return pe=pe||new $}function ge(e){E.call(this,fe.Ia,e)}function ye(e){const t=me();J(t,new ge(t))}function ve(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();J(t,new ve(t,e))}function we(e,t){E.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const a=JSON.parse(t);if(a)for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ae(a)}catch(a){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ve,E),fe.Ja="timingevent",u(we,E),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var Ee,Ne={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_e={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Te(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Ee=new Ce;var De={},Me={};function Pe(e,t,n){e.M=1,e.A=at(et(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),ze(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new je,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let a=0;a<i.length;a++){const e=U(n,i[a],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?M(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var s="",o=a.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");s=t.length>=2&&"type"==t[1]?s+(e+"=")+l+"&":s+(e+"=redacted&")}}}else s=null;else s=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Oe(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Re(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Me:(n=Number(t.substring(n,r)),isNaN(n)?De:(r+=1)+n>t.length?Me:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(a.clearTimeout(e.D),e.D=null)}function Ue(e){0==e.j.I||e.K||hn(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||We(n.h,e)))if(!e.L&&We(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;dn(n),en(n)}ln(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else pn(n,11)}else if((e.L||n.g==e)&&dn(n),!_(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ye(a,a.h),a.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=e;if((r=n).na=gn(r,r.L?r.ba:null,r.W),s.L){Xe(r.h,s);var o=s,c=r.O;c&&(o.H=c),o.D&&(Ve(o),ze(o)),r.g=s}else on(r);n.i.length>0&&nn(n)}else"stop"!=l[0]&&"close"!=l[0]||pn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pn(n,7):Zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Yt(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Yt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Oe(e))return e.g.la();const t=Xt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Yt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),Ue(e),"";e.h.i=new a.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,a,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+s})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,be(12),Be(this),Ue(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Re(this,n),t==Me){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==De){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),qe(this,t)}if(Oe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),cn(o),o.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),Ue(this)}else Se(this.i,this.l,n,null),qe(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?hn(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&Yt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(_(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[i]||[];t[i]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),Ue(this)}}}catch(yn){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,Ue(this)):Fe(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,a.PerformanceNavigationTiming?e=(e=a.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function We(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $e(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}Ge.prototype.cancel=function(){if(this.i=$e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=st(t[2]||""),this.g=st(t[3]||"",!0),nt(this,t[4]),this.h=st(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=st(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?st(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function at(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function st(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Te(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(a){}}function St(){this.g=new oe}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function Nt(e,t){$.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function _t(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ft(e)}function Ft(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Vt(e){let t="";return D(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ut(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vt(n),"string"===typeof e?null!=n&&Te(n):it(e,t,n))}function Bt(e){$.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Te(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Te(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new Nt(this.i,this.h)},u(Nt,$),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ft(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||a).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ft(this)),this.g&&(this.readyState=3,Ft(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_t(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Ft(this),3==this.readyState&&_t(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Na=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Bt,$);var qt=/^https?$/i,Ht=["POST","PUT"];function Gt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Qt(e),Wt(e)}function Qt(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Kt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Yt(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Je)[1]||null;!t&&a.self&&a.self.location&&(t=a.self.location.protocol.slice(0,-1)),r=!qt.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var s=Yt(e)>2?e.g.statusText:""}catch(o){s=""}e.l=s+" ["+e.ca()+"]",Qt(e)}}finally{Wt(e)}}}function Wt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||J(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Yt(e){return e.g?e.g.readyState:0}function Xt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$t("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$t("baseRetryDelayMs",5e3,e),this.Za=$t("retryDelaySeedMs",1e4,e),this.Ta=$t("forwardChannelMaxRetries",2,e),this.va=$t("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Zt(e){if(tn(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),an(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=at(et(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),ze(t)}mn(e)}function en(e){e.g&&(cn(e),e.g.cancel(),e.g=null)}function tn(e){en(e),e.v&&(a.clearTimeout(e.v),e.v=null),dn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&a.clearTimeout(e.m),e.m=null)}function nn(e){if(!Qe(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function rn(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),an(e,r),e.u&&e.o&&Ut(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=sn(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Pe(n,r,t)}function an(e,t){e.H&&D(e.H,function(e,n){it(t,n,e)}),e.l&&D({},function(e,n){it(t,n,e)})}function sn(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var a=i[c].g;const n=i[c].map;if((a-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{a="req"+a+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;s(n)&&(r=ae(n)),e.push(a+t+"="+encodeURIComponent(r))}}catch(zt){throw e.push(a+"type="+encodeURIComponent("_badmap")),zt}}catch(zt){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function on(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function ln(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),fn(e,e.A)),e.A++,!0)}function cn(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function un(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),an(e,t),e.u&&e.o&&Ut(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=at(et(t)),n.u=null,n.R=!0,Le(n,e)}function dn(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function hn(e,t){var n=null;if(e.g==t){dn(e),cn(e),e.g=null;var r=2}else{if(!We(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;J(r=me(),new we(r,n)),nn(e)}else on(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&ln(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||tt(r,"https"),at(r),t?function(e,t){const n=new ke;if(a.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),mn(e),tn(e)}function mn(e){if(e.I=0,e.ja=[],e.l){const t=$e(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function gn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),an(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Bt(new Et({ab:n})):new Bt(e.ma)).Fa(e.L),t}function bn(){}function wn(){}function xn(e,t){$.call(this),this.g=new Jt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!_(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function kn(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sn(){he.call(this),this.status=1}function En(e){this.g=e}(e=Bt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Gt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=a.FormData&&e instanceof a.FormData,!(Array.prototype.indexOf.call(Ht,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(s){Gt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),Wt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wt(this,!0)),Bt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Kt(this):this.Xa())},e.Xa=function(){Kt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Yt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),se(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Jt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=gn(this,null,this.W),nn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let a=this.o;if(this.U&&(a?(a=M(a),L(a,this.U)):a=this.U),null!==this.u||this.R||(i.J=a,a=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=sn(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),an(this,n),a&&(this.R?t="headers="+Te(Vt(a))+"&"+t:this.u&&Ut(n,this.u,a)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Pe(i,n,null)):Pe(i,n,t),this.I=2}}else 3==this.I&&(e?rn(this,e):0==this.i.length||Qe(this.h)||rn(this))},e.Da=function(){if(this.v=null,un(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),en(this),un(this))},e.Va=function(){null!=this.C&&(this.C=null,en(this),ln(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},wn.prototype.g=function(e,t){return new xn(e,t)},u(xn,$),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Zt(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ae(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&nn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,Zt(this.g),delete this.g,xn.Z.N.call(this)},u(kn,de),u(Sn,he),u(En,bn),En.prototype.ra=function(){J(this.g,"a")},En.prototype.qa=function(e){J(this.g,new kn(e))},En.prototype.pa=function(e){J(this.g,new Sn)},En.prototype.oa=function(){J(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Pt=Ot.createWebChannelTransport=function(){return new wn},Mt=Ot.getStatEventTarget=function(){return me()},Dt=Ot.Event=fe,jt=Ot.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,At=Ot.ErrorCode=Ne,_e.COMPLETE="complete",It=Ot.EventType=_e,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",$.prototype.listen=$.prototype.J,Tt=Ot.WebChannel=ce,Ot.FetchXmlHttpFactory=Et,Bt.prototype.listenOnce=Bt.prototype.K,Bt.prototype.getLastError=Bt.prototype.Ha,Bt.prototype.getLastErrorCode=Bt.prototype.ya,Bt.prototype.getStatus=Bt.prototype.ca,Bt.prototype.getResponseJson=Bt.prototype.La,Bt.prototype.getResponseText=Bt.prototype.la,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Fa,Ct=Ot.XhrIo=Bt}).apply("undefined"!==typeof Lt?Lt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Rt="@firebase/firestore",zt="4.9.2";class Ft{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let Vt="12.3.0";const Ut=new le("@firebase/firestore");function Bt(){return Ut.logLevel}function qt(e){if(Ut.logLevel<=re.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Qt);Ut.debug("Firestore (".concat(Vt,"): ").concat(e),...i)}}function Ht(e){if(Ut.logLevel<=re.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Qt);Ut.error("Firestore (".concat(Vt,"): ").concat(e),...i)}}function Gt(e){if(Ut.logLevel<=re.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Qt);Ut.warn("Firestore (".concat(Vt,"): ").concat(e),...i)}}function Qt(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Kt(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Wt(e,r,n)}function Wt(e,t,n){let r="FIRESTORE (".concat(Vt,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ht(r),new Error(r)}function Yt(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Wt(t,i,r)}function Xt(e,t){return e}const $t={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends Q{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Zt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class en{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class tn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}}class nn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rn{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Yt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zt)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Yt("string"==typeof t.accessToken,31837,{l:t}),new en(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yt(null===e||"string"==typeof e,2055,{h:e}),new Ft(e)}}class an{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sn{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new an(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class on{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ln{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!==(n=e)&&void 0!==n&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Yt(void 0===this.o,3512);const n=e=>{null!=e.error&&qt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,qt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new on(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Yt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new on(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class un{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=cn(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function dn(e,t){return e<t?-1:e>t?1:0}function hn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return mn(n)===mn(i)?dn(n,i):mn(n)?1:-1}return dn(e.length,t.length)}const fn=55296,pn=57343;function mn(e){const t=e.charCodeAt(0);return t>=fn&&t<=pn}function gn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const yn="__name__";class vn{constructor(e,t,n){void 0===t?t=0:t>e.length&&Kt(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Kt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===vn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=vn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return dn(e.length,t.length)}static compareSegments(e,t){const n=vn.isNumericId(e),r=vn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?vn.extractNumericId(e).compare(vn.extractNumericId(t)):hn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return St.fromString(e.substring(4,e.length-2))}}class bn extends vn{construct(e,t,n){return new bn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Jt($t.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new bn(e)}static emptyPath(){return new bn([])}}const wn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends vn{construct(e,t,n){return new xn(e,t,n)}static isValidIdentifier(e){return wn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===yn}static keyField(){return new xn([yn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Jt($t.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Jt($t.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Jt($t.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(i(),r++)}if(i(),a)throw new Jt($t.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(t)}static emptyPath(){return new xn([])}}class kn{constructor(e){this.path=e}static fromPath(e){return new kn(bn.fromString(e))}static fromName(e){return new kn(bn.fromString(e).popFirst(5))}static empty(){return new kn(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kn(new bn(e.slice()))}}function Sn(e,t,n){if(!n)throw new Jt($t.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function En(e){if(!kn.isDocumentKey(e))throw new Jt($t.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Nn(e){if(kn.isDocumentKey(e))throw new Jt($t.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function _n(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Cn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Kt(12329,{type:typeof e})}function Tn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Jt($t.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cn(e);throw new Jt($t.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function In(e,t){if(t<=0)throw new Jt($t.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function An(e,t){const n={typeString:e};return t&&(n.value=t),n}function jn(e,t){if(!_n(e))throw new Jt($t.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(i&&typeof s!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==a&&s!==a.value){n="Expected '".concat(r,"' field to equal '").concat(a.value,"'");break}}if(n)throw new Jt($t.INVALID_ARGUMENT,n);return!0}const Dn=-62135596800,Mn=1e6;class Pn{static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Mn);return new Pn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Jt($t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Jt($t.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Dn)throw new Jt($t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt($t.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mn}_compareTo(e){return this.seconds===e.seconds?dn(this.nanoseconds,e.nanoseconds):dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jn(e,Pn._jsonSchema))return new Pn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pn._jsonSchemaVersion="firestore/timestamp/1.0",Pn._jsonSchema={type:An("string",Pn._jsonSchemaVersion),seconds:An("number"),nanoseconds:An("number")};class Ln{static fromTimestamp(e){return new Ln(e)}static min(){return new Ln(new Pn(0,0))}static max(){return new Ln(new Pn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const On=-1;class Rn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Rn.UNKNOWN_ID=-1;function zn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ln.fromTimestamp(1e9===r?new Pn(n+1,0):new Pn(n,r));return new Vn(i,kn.empty(),t)}function Fn(e){return new Vn(e.readTime,e.key,On)}class Vn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vn(Ln.min(),kn.empty(),On)}static max(){return new Vn(Ln.max(),kn.empty(),On)}}function Un(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=kn.comparator(e.documentKey,t.documentKey),0!==n?n:dn(e.largestBatchId,t.largestBatchId))}const Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Hn(e){if(e.code!==$t.FAILED_PRECONDITION||e.message!==Bn)throw e;qt("LocalStore","Unexpectedly lost primary lease")}class Gn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Kt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Gn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Gn?t:Gn.resolve(t)}catch(e){return Gn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Gn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Gn.reject(t)}static resolve(e){return new Gn((t,n)=>{t(e)})}static reject(e){return new Gn((t,n)=>{n(e)})}static waitFor(e){return new Gn((t,n)=>{let r=0,i=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++i,a&&i===r&&t()},e=>n(e))}),a=!0,i===r&&t()})}static or(e){let t=Gn.resolve(!1);for(const n of e)t=t.next(e=>e?Gn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Gn((n,r)=>{const i=e.length,a=new Array(i);let s=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{a[l]=e,++s,s===i&&n(a)},e=>r(e))}})}static doWhile(e,t){return new Gn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Qn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kn(e){return"IndexedDbTransactionError"===e.name}class Wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wn.ce=-1;const Yn=-1;function Xn(e){return null==e}function $n(e){return 0===e&&1/e==-1/0}function Jn(e){return"number"==typeof e&&Number.isInteger(e)&&!$n(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Zn="\x01";function er(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=nr(t)),t=tr(e.get(n),t);return nr(t)}function tr(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Zn:n+="\x01\x11";break;default:n+=t}}return n}function nr(e){return e+Zn+"\x01"}const rr="remoteDocuments",ir="owner",ar="mutationQueues",sr="mutations";const or="documentMutations",lr="remoteDocumentsV14",cr="remoteDocumentGlobal",ur="targets",dr="targetDocuments",hr="targetGlobal",fr="collectionParents",pr="clientMetadata",mr="bundles",gr="namedQueries",yr="indexConfiguration",vr="indexState",br="indexEntries",wr="documentOverlays",xr="globals",kr=[ar,sr,or,rr,ur,ir,hr,dr,pr,cr,fr,mr,gr],Sr=[ar,sr,or,lr,ur,ir,hr,dr,pr,cr,fr,mr,gr,wr],Er=Sr,Nr=[...Er,yr,vr,br];function _r(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ir{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new Ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ar(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ar(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ar(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ar(this.root,e,this.comparator,!0)}}class Ar{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:jr.RED,this.left=null!=r?r:jr.EMPTY,this.right=null!=i?i:jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new jr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return jr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Kt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Kt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Kt(27949);return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Kt(57766)}get value(){throw Kt(16141)}get color(){throw Kt(16727)}get left(){throw Kt(29726)}get right(){throw Kt(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dr{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mr(this.data.getIterator())}getIteratorFrom(e){return new Mr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Dr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dr(this.comparator);return t.data=e,t}}class Mr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pr{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new Pr([])}unionWith(e){let t=new Dr(xn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Lr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Lr("Invalid base64 string: "+e):e}}(e);return new Or(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const Rr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(e){if(Yt(!!e,39018),"string"==typeof e){let t=0;const n=Rr.exec(e);if(Yt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fr(e.seconds),nanos:Fr(e.nanos)}}function Fr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Vr(e){return"string"==typeof e?Or.fromBase64String(e):Or.fromUint8Array(e)}const Ur="server_timestamp",Br="__type__",qr="__previous_value__",Hr="__local_write_time__";function Gr(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Br])||void 0===t?void 0:t.stringValue)===Ur}function Qr(e){const t=e.mapValue.fields[qr];return Gr(t)?Qr(t):t}function Kr(e){const t=zr(e.mapValue.fields[Hr].timestampValue);return new Pn(t.seconds,t.nanos)}class Wr{constructor(e,t,n,r,i,a,s,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Yr="(default)";class Xr{constructor(e,t){this.projectId=e,this.database=t||Yr}static empty(){return new Xr("","")}get isDefaultDatabase(){return this.database===Yr}isEqual(e){return e instanceof Xr&&e.projectId===this.projectId&&e.database===this.database}}const $r="__type__",Jr="__max__",Zr={mapValue:{fields:{__type__:{stringValue:Jr}}}},ei="__vector__",ti="value";function ni(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gr(e)?4:bi(e)?9007199254740991:yi(e)?10:11:Kt(28295,{value:e})}function ri(e,t){if(e===t)return!0;const n=ni(e);if(n!==ni(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kr(e).isEqual(Kr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=zr(e.timestampValue),r=zr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Vr(e.bytesValue).isEqual(Vr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fr(e.geoPointValue.latitude)===Fr(t.geoPointValue.latitude)&&Fr(e.geoPointValue.longitude)===Fr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fr(e.integerValue)===Fr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fr(e.doubleValue),r=Fr(t.doubleValue);return n===r?$n(n)===$n(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return gn(e.arrayValue.values||[],t.arrayValue.values||[],ri);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_r(n)!==_r(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ri(n[i],r[i])))return!1;return!0}(e,t);default:return Kt(52216,{left:e})}}function ii(e,t){return void 0!==(e.values||[]).find(e=>ri(e,t))}function ai(e,t){if(e===t)return 0;const n=ni(e),r=ni(t);if(n!==r)return dn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fr(e.integerValue||e.doubleValue),r=Fr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return si(e.timestampValue,t.timestampValue);case 4:return si(Kr(e),Kr(t));case 5:return hn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Vr(e),r=Vr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=dn(n[i],r[i]);if(0!==e)return e}return dn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=dn(Fr(e.latitude),Fr(t.latitude));return 0!==n?n:dn(Fr(e.longitude),Fr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return oi(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,a;const s=e.fields||{},o=t.fields||{},l=null===(n=s[ti])||void 0===n?void 0:n.arrayValue,c=null===(r=o[ti])||void 0===r?void 0:r.arrayValue,u=dn((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(a=c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:oi(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Zr.mapValue&&t===Zr.mapValue)return 0;if(e===Zr.mapValue)return 1;if(t===Zr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let s=0;s<r.length&&s<a.length;++s){const e=hn(r[s],a[s]);if(0!==e)return e;const t=ai(n[r[s]],i[a[s]]);if(0!==t)return t}return dn(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Kt(23264,{he:n})}}function si(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return dn(e,t);const n=zr(e),r=zr(t),i=dn(n.seconds,r.seconds);return 0!==i?i:dn(n.nanos,r.nanos)}function oi(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ai(n[i],r[i]);if(e)return e}return dn(n.length,r.length)}function li(e){return ci(e)}function ci(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=zr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Vr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return kn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ci(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ci(e.fields[i]));return n+"}"}(e.mapValue):Kt(61005,{value:e})}function ui(e){switch(ni(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qr(e);return t?16+ui(t):16;case 5:return 2*e.stringValue.length;case 6:return Vr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ui(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Cr(e.fields,(e,n)=>{t+=e.length+ui(n)}),t}(e.mapValue);default:throw Kt(13486,{value:e})}}function di(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function hi(e){return!!e&&"integerValue"in e}function fi(e){return!!e&&"arrayValue"in e}function pi(e){return!!e&&"nullValue"in e}function mi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function gi(e){return!!e&&"mapValue"in e}function yi(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[$r])||void 0===t?void 0:t.stringValue)===ei}function vi(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Cr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=vi(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vi(e.arrayValue.values[n]);return t}return c({},e)}function bi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Jr}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!gi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vi(t)}setAll(e){let t=xn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=vi(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());gi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];gi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Cr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new wi(vi(this.value))}}function xi(e){const t=[];return Cr(e.fields,(e,n)=>{const r=new xn([e]);if(gi(n)){const e=xi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Pr(t)}class ki{constructor(e,t,n,r,i,a,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=s}static newInvalidDocument(e){return new ki(e,0,Ln.min(),Ln.min(),Ln.min(),wi.empty(),0)}static newFoundDocument(e,t,n,r){return new ki(e,1,t,Ln.min(),n,r,0)}static newNoDocument(e,t){return new ki(e,2,t,Ln.min(),Ln.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new ki(e,3,t,Ln.min(),Ln.min(),wi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ln.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ki&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ki(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Si{constructor(e,t){this.position=e,this.inclusive=t}}function Ei(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const a=t[i],s=e.position[i];if(r=a.field.isKeyField()?kn.comparator(kn.fromName(s.referenceValue),n.key):ai(s,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ni(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ri(e.position[n],t.position[n]))return!1;return!0}class _i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ci(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ti{}class Ii extends Ti{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ri(e,t,n):"array-contains"===t?new Ui(e,n):"in"===t?new Bi(e,n):"not-in"===t?new qi(e,n):"array-contains-any"===t?new Hi(e,n):new Ii(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new zi(e,n):new Fi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ai(t,this.value)):null!==t&&ni(this.value)===ni(t)&&this.matchesComparison(ai(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends Ti{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ai(e,t)}matches(e){return ji(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ji(e){return"and"===e.op}function Di(e){return Mi(e)&&ji(e)}function Mi(e){for(const t of e.filters)if(t instanceof Ai)return!1;return!0}function Pi(e){if(e instanceof Ii)return e.field.canonicalString()+e.op.toString()+li(e.value);if(Di(e))return e.filters.map(e=>Pi(e)).join(",");{const t=e.filters.map(e=>Pi(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Li(e,t){return e instanceof Ii?function(e,t){return t instanceof Ii&&e.op===t.op&&e.field.isEqual(t.field)&&ri(e.value,t.value)}(e,t):e instanceof Ai?function(e,t){return t instanceof Ai&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Li(n,t.filters[r]),!0)}(e,t):void Kt(19439)}function Oi(e){return e instanceof Ii?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(li(e.value))}(e):e instanceof Ai?function(e){return e.op.toString()+" {"+e.getFilters().map(Oi).join(" ,")+"}"}(e):"Filter"}class Ri extends Ii{constructor(e,t,n){super(e,t,n),this.key=kn.fromName(n.referenceValue)}matches(e){const t=kn.comparator(e.key,this.key);return this.matchesComparison(t)}}class zi extends Ii{constructor(e,t){super(e,"in",t),this.keys=Vi("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fi extends Ii{constructor(e,t){super(e,"not-in",t),this.keys=Vi("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>kn.fromName(e.referenceValue))}class Ui extends Ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fi(t)&&ii(t.arrayValue,this.value)}}class Bi extends Ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ii(this.value.arrayValue,t)}}class qi extends Ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(ii(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ii(this.value.arrayValue,t)}}class Hi extends Ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fi(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ii(this.value.arrayValue,e))}}class Gi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=s,this.Te=null}}function Qi(e){return new Gi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ki(e){const t=Xt(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Pi(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Xn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>li(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>li(e)).join(",")),t.Te=e}return t.Te}function Wi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ci(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Li(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ni(e.startAt,t.startAt)&&Ni(e.endAt,t.endAt)}function Yi(e){return kn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Xi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=s,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $i(e,t,n,r,i,a,s,o){return new Xi(e,t,n,r,i,a,s,o)}function Ji(e){return new Xi(e)}function Zi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ea(e){return null!==e.collectionGroup}function ta(e){const t=Xt(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Dr(xn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new _i(r,n))}),e.has(xn.keyField().canonicalString())||t.Ie.push(new _i(xn.keyField(),n))}return t.Ie}function na(e){const t=Xt(e);return t.Ee||(t.Ee=ra(t,ta(e))),t.Ee}function ra(e,t){if("F"===e.limitType)return Qi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new _i(e.field,t)});const n=e.endAt?new Si(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Si(e.startAt.position,e.startAt.inclusive):null;return Qi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ia(e,t){const n=e.filters.concat([t]);return new Xi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function aa(e,t,n){return new Xi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function sa(e,t){return Wi(na(e),na(t))&&e.limitType===t.limitType}function oa(e){return"".concat(Ki(na(e)),"|lt:").concat(e.limitType)}function la(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Oi(e)).join(", "),"]")),Xn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>li(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>li(e)).join(",")),"Target(".concat(t,")")}(na(e)),"; limitType=").concat(e.limitType,")")}function ca(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):kn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ta(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ei(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ta(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ei(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ta(e),t))}(e,t)}function ua(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function da(e){return(t,n)=>{let r=!1;for(const i of ta(e)){const e=ha(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ha(e,t,n){const r=e.field.isKeyField()?kn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ai(r,i):Kt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kt(19790,{direction:e.dir})}}class fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Cr(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Tr(this.inner)}size(){return this.innerSize}}const pa=new Ir(kn.comparator);function ma(){return pa}const ga=new Ir(kn.comparator);function ya(){let e=ga;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function va(e){let t=ga;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ba(){return xa()}function wa(){return xa()}function xa(){return new fa(e=>e.toString(),(e,t)=>e.isEqual(t))}const ka=new Ir(kn.comparator),Sa=new Dr(kn.comparator);function Ea(){let e=Sa;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Na=new Dr(dn);function _a(){return Na}function Ca(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$n(t)?"-0":t}}function Ta(e){return{integerValue:""+e}}function Ia(e,t){return Jn(t)?Ta(t):Ca(e,t)}class Aa{constructor(){this._=void 0}}function ja(e,t,n){return e instanceof Pa?function(e,t){const n={fields:{[Br]:{stringValue:Ur},[Hr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Gr(t)&&(t=Qr(t)),t&&(n.fields[qr]=t),{mapValue:n}}(n,t):e instanceof La?Oa(e,t):e instanceof Ra?za(e,t):function(e,t){const n=Ma(e,t),r=Va(n)+Va(e.Ae);return hi(n)&&hi(e.Ae)?Ta(r):Ca(e.serializer,r)}(e,t)}function Da(e,t,n){return e instanceof La?Oa(e,t):e instanceof Ra?za(e,t):n}function Ma(e,t){return e instanceof Fa?function(e){return hi(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Pa extends Aa{}class La extends Aa{constructor(e){super(),this.elements=e}}function Oa(e,t){const n=Ua(t);for(const r of e.elements)n.some(e=>ri(e,r))||n.push(r);return{arrayValue:{values:n}}}class Ra extends Aa{constructor(e){super(),this.elements=e}}function za(e,t){let n=Ua(t);for(const r of e.elements)n=n.filter(e=>!ri(e,r));return{arrayValue:{values:n}}}class Fa extends Aa{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Va(e){return Fr(e.integerValue||e.doubleValue)}function Ua(e){return fi(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ba{constructor(e,t){this.field=e,this.transform=t}}class qa{constructor(e,t){this.version=e,this.transformResults=t}}class Ha{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ha}static exists(e){return new Ha(void 0,e)}static updateTime(e){return new Ha(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ga(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Qa{}function Ka(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new rs(e.key,Ha.none()):new Ja(e.key,e.data,Ha.none());{const n=e.data,r=wi.empty();let i=new Dr(xn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Za(e.key,r,new Pr(i.toArray()),Ha.none())}}function Wa(e,t,n){e instanceof Ja?function(e,t,n){const r=e.value.clone(),i=ts(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Za?function(e,t,n){if(!Ga(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ts(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(es(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ya(e,t,n,r){return e instanceof Ja?function(e,t,n,r){if(!Ga(e.precondition,t))return n;const i=e.value.clone(),a=ns(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Za?function(e,t,n,r){if(!Ga(e.precondition,t))return n;const i=ns(e.fieldTransforms,r,t),a=t.data;return a.setAll(es(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ga(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xa(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ma(r.transform,e||null);null!=i&&(null===n&&(n=wi.empty()),n.set(r.field,i))}return n||null}function $a(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&gn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof La&&t instanceof La||e instanceof Ra&&t instanceof Ra?gn(e.elements,t.elements,ri):e instanceof Fa&&t instanceof Fa?ri(e.Ae,t.Ae):e instanceof Pa&&t instanceof Pa}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ja extends Qa{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Za extends Qa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function es(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ts(e,t,n){const r=new Map;Yt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const a=e[i],s=a.transform,o=t.data.field(a.field);r.set(a.field,Da(s,o,n[i]))}return r}function ns(e,t,n){const r=new Map;for(const i of e){const e=i.transform,a=n.data.field(i.field);r.set(i.field,ja(e,a,t))}return r}class rs extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class is extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class as{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Wa(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ya(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ya(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=wa();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let s=this.applyToLocalView(a,i.mutatedFields);s=t.has(r.key)?null:s;const o=Ka(a,s);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(Ln.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ea())}isEqual(e){return this.batchId===e.batchId&&gn(this.mutations,e.mutations,(e,t)=>$a(e,t))&&gn(this.baseMutations,e.baseMutations,(e,t)=>$a(e,t))}}class ss{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Yt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ka;const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new ss(e,t,n,r)}}class os{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ls{constructor(e,t){this.count=e,this.unchangedNames=t}}var cs,us;function ds(e){switch(e){case $t.OK:return Kt(64938);case $t.CANCELLED:case $t.UNKNOWN:case $t.DEADLINE_EXCEEDED:case $t.RESOURCE_EXHAUSTED:case $t.INTERNAL:case $t.UNAVAILABLE:case $t.UNAUTHENTICATED:return!1;case $t.INVALID_ARGUMENT:case $t.NOT_FOUND:case $t.ALREADY_EXISTS:case $t.PERMISSION_DENIED:case $t.FAILED_PRECONDITION:case $t.ABORTED:case $t.OUT_OF_RANGE:case $t.UNIMPLEMENTED:case $t.DATA_LOSS:return!0;default:return Kt(15467,{code:e})}}function hs(e){if(void 0===e)return Ht("GRPC error has no .code"),$t.UNKNOWN;switch(e){case cs.OK:return $t.OK;case cs.CANCELLED:return $t.CANCELLED;case cs.UNKNOWN:return $t.UNKNOWN;case cs.DEADLINE_EXCEEDED:return $t.DEADLINE_EXCEEDED;case cs.RESOURCE_EXHAUSTED:return $t.RESOURCE_EXHAUSTED;case cs.INTERNAL:return $t.INTERNAL;case cs.UNAVAILABLE:return $t.UNAVAILABLE;case cs.UNAUTHENTICATED:return $t.UNAUTHENTICATED;case cs.INVALID_ARGUMENT:return $t.INVALID_ARGUMENT;case cs.NOT_FOUND:return $t.NOT_FOUND;case cs.ALREADY_EXISTS:return $t.ALREADY_EXISTS;case cs.PERMISSION_DENIED:return $t.PERMISSION_DENIED;case cs.FAILED_PRECONDITION:return $t.FAILED_PRECONDITION;case cs.ABORTED:return $t.ABORTED;case cs.OUT_OF_RANGE:return $t.OUT_OF_RANGE;case cs.UNIMPLEMENTED:return $t.UNIMPLEMENTED;case cs.DATA_LOSS:return $t.DATA_LOSS;default:return Kt(39323,{code:e})}}(us=cs||(cs={}))[us.OK=0]="OK",us[us.CANCELLED=1]="CANCELLED",us[us.UNKNOWN=2]="UNKNOWN",us[us.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",us[us.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",us[us.NOT_FOUND=5]="NOT_FOUND",us[us.ALREADY_EXISTS=6]="ALREADY_EXISTS",us[us.PERMISSION_DENIED=7]="PERMISSION_DENIED",us[us.UNAUTHENTICATED=16]="UNAUTHENTICATED",us[us.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",us[us.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",us[us.ABORTED=10]="ABORTED",us[us.OUT_OF_RANGE=11]="OUT_OF_RANGE",us[us.UNIMPLEMENTED=12]="UNIMPLEMENTED",us[us.INTERNAL=13]="INTERNAL",us[us.UNAVAILABLE=14]="UNAVAILABLE",us[us.DATA_LOSS=15]="DATA_LOSS";let fs=null;function ps(){return new TextEncoder}const ms=new St([4294967295,4294967295],0);function gs(e){const t=ps().encode(e),n=new Et;return n.update(t),new Uint8Array(n.digest())}function ys(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new St([n,r],0),new St([i,a],0)]}class vs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new bs("Invalid padding: ".concat(t));if(n<0)throw new bs("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new bs("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new bs("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=St.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(St.fromNumber(n)));return 1===r.compare(ms)&&(r=new St([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=gs(e),[n,r]=ys(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new vs(i,r,t);return n.forEach(e=>a.insert(e)),a}insert(e){if(0===this.ge)return;const t=gs(e),[n,r]=ys(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class bs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ws{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,xs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ws(Ln.min(),r,new Ir(dn),ma(),Ea())}}class xs{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new xs(n,t,Ea(),Ea(),Ea())}}class ks{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Ss{constructor(e,t){this.targetId=e,this.Ce=t}}class Es{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Or.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ns{constructor(){this.ve=0,this.Fe=Ts(),this.Me=Or.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ea(),t=Ea(),n=Ea();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Kt(38017,{changeType:i})}}),new xs(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Ts()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _s{constructor(e){this.Ge=e,this.ze=new Map,this.je=ma(),this.Je=Cs(),this.He=Cs(),this.Ye=new Ir(dn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Kt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(Yi(a))if(0===n){const e=new kn(a.path);this.et(t,e,ki.newNoDocument(e,Ln.min()))}else Yt(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),a=n?this.ct(n,e,r):1;if(0!==a){this.it(t);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=fs)||void 0===i||i.lt(function(e,t,n,r,i){var a,s,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(a=null===d||void 0===d?void 0:d.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,a))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let a,s;try{a=Vr(n).toUint8Array()}catch(e){if(e instanceof Lr)return Gt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new vs(a,r,i)}catch(e){return Gt(e instanceof bs?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),a="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(a)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Yi(i.target)){const t=new kn(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ki.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Ea();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ws(e,t,this.Ye,this.je,n);return this.je=ma(),this.Je=Cs(),this.He=Cs(),this.Ye=new Ir(dn),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ns,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Dr(dn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Dr(dn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||qt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ns),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Cs(){return new Ir(kn.comparator)}function Ts(){return new Ir(kn.comparator)}const Is={asc:"ASCENDING",desc:"DESCENDING"},As={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},js={and:"AND",or:"OR"};class Ds{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ms(e,t){return e.useProto3Json||Xn(t)?t:{value:t}}function Ps(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ls(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Os(e,t){return Ps(e,t.toTimestamp())}function Rs(e){return Yt(!!e,49232),Ln.fromTimestamp(function(e){const t=zr(e);return new Pn(t.seconds,t.nanos)}(e))}function zs(e,t){return Fs(e,t).canonicalString()}function Fs(e,t){const n=function(e){return new bn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Vs(e){const t=bn.fromString(e);return Yt(so(t),10190,{key:t.toString()}),t}function Us(e,t){return zs(e.databaseId,t.path)}function Bs(e,t){const n=Vs(t);if(n.get(1)!==e.databaseId.projectId)throw new Jt($t.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Jt($t.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new kn(Qs(n))}function qs(e,t){return zs(e.databaseId,t)}function Hs(e){const t=Vs(e);return 4===t.length?bn.emptyPath():Qs(t)}function Gs(e){return new bn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qs(e){return Yt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ks(e,t,n){return{name:Us(e,t),fields:n.value.mapValue.fields}}function Ws(e,t){let n;if(t instanceof Ja)n={update:Ks(e,t.key,t.value)};else if(t instanceof rs)n={delete:Us(e,t.key)};else if(t instanceof Za)n={update:Ks(e,t.key,t.data),updateMask:ao(t.fieldMask)};else{if(!(t instanceof is))return Kt(16599,{Vt:t.type});n={verify:Us(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Pa)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof La)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ra)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fa)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Kt(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Os(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Kt(27497)}(e,t.precondition)),n}function Ys(e,t){return{documents:[qs(e,t.path)]}}function Xs(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qs(e,i);const a=function(e){if(0!==e.length)return io(Ai.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:no(e.field),direction:Zs(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Ms(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function $s(e){let t=Hs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yt(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=Js(e);return t instanceof Ai&&Di(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new _i(ro(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Xn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Si(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Si(n,t)}(n.endAt)),$i(t,i,s,a,o,"F",l,c)}function Js(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ro(e.unaryFilter.field);return Ii.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ro(e.unaryFilter.field);return Ii.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ro(e.unaryFilter.field);return Ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ro(e.unaryFilter.field);return Ii.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Kt(61313);default:return Kt(60726)}}(e):void 0!==e.fieldFilter?function(e){return Ii.create(ro(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Kt(58110);default:return Kt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ai.create(e.compositeFilter.filters.map(e=>Js(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Kt(1026)}}(e.compositeFilter.op))}(e):Kt(30097,{filter:e})}function Zs(e){return Is[e]}function eo(e){return As[e]}function to(e){return js[e]}function no(e){return{fieldPath:e.canonicalString()}}function ro(e){return xn.fromServerFormat(e.fieldPath)}function io(e){return e instanceof Ii?function(e){if("=="===e.op){if(mi(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NAN"}};if(pi(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mi(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NOT_NAN"}};if(pi(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(e.field),op:eo(e.op),value:e.value}}}(e):e instanceof Ai?function(e){const t=e.getFilters().map(e=>io(e));return 1===t.length?t[0]:{compositeFilter:{op:to(e.op),filters:t}}}(e):Kt(54877,{filter:e})}function ao(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function so(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class oo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ln.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ln.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Or.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lo{constructor(e){this.yt=e}}function co(e){const t=$s({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?aa(t,t.limit,"L"):t}class uo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Fr(e.integerValue));else if("doubleValue"in e){const n=Fr(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),$n(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=zr(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Vr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?bi(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):yi(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Kt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=ti,a=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Fr(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),kn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}uo.Kt=new uo;class ho{constructor(){this.Cn=new fo}addToCollectionParentIndex(e,t){return this.Cn.add(t),Gn.resolve()}getCollectionParents(e,t){return Gn.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Gn.resolve()}deleteFieldIndex(e,t){return Gn.resolve()}deleteAllFieldIndexes(e){return Gn.resolve()}createTargetIndexes(e,t){return Gn.resolve()}getDocumentsMatchingTarget(e,t){return Gn.resolve(null)}getIndexType(e,t){return Gn.resolve(0)}getFieldIndexes(e,t){return Gn.resolve([])}getNextCollectionGroupToUpdate(e){return Gn.resolve(null)}getMinOffset(e,t){return Gn.resolve(Vn.min())}getMinOffsetFromCollectionGroup(e,t){return Gn.resolve(Vn.min())}updateCollectionGroup(e,t,n){return Gn.resolve()}updateIndexEntries(e,t){return Gn.resolve()}}class fo{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Dr(bn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Dr(bn.comparator)).toArray()}}new Uint8Array(0);const po={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mo=41943040;class go{static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(mo,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yo(0)}static cr(){return new yo(-1)}}const vo="LruGarbageCollector",bo=1048576;function wo(e,t){let[n,r]=e,[i,a]=t;const s=dn(n,i);return 0===s?dn(r,a):s}class xo{constructor(e){this.Ir=e,this.buffer=new Dr(wo),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();wo(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ko{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){qt(vo,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Kn(e)?qt(vo,"Ignoring IndexedDB error during garbage collection: ",e):await Hn(e)}await this.Vr(3e5)})}}class So{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Gn.resolve(Wn.ce);const n=new xo(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector","Garbage collection skipped; disabled"),Gn.resolve(po)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),po):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,s,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(qt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Bt()<=re.DEBUG&&qt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Gn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Eo(e,t){return new So(e,t)}class No{constructor(){this.changes=new fa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ki.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Gn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _o{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Co{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ya(n.mutation,e,Pr.empty(),Pn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ea()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ea();const r=ba();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ya();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ba();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ea()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ma();const a=xa(),s=xa();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Za)?i=i.insert(t.key,t):void 0!==s?(a.set(t.key,s.mutation.getFieldMask()),Ya(s.mutation,t,s.mutation.getFieldMask(),Pn.now())):a.set(t.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new _o(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=xa();let r=new Ir((e,t)=>e-t),i=Ea();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let s=n.get(e)||Pr.empty();s=i.applyToLocalView(a,s),n.set(e,s);const o=(r.get(i.batchId)||Ea()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const a=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),o=r.key,l=r.value,c=wa();l.forEach(e=>{if(!i.has(e)){const r=Ka(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Gn.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return kn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ea(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Gn.resolve(ba());let s=On,o=i;return a.next(t=>Gn.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Gn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Ea())).next(e=>({batchId:s,changes:va(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kn(t)).next(e=>{let t=ya();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let a=ya();return this.indexManager.getCollectionParents(e,i).next(s=>Gn.forEach(s,s=>{const o=function(e,t){return new Xi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ki.newInvalidDocument(r)))});let n=ya();return e.forEach((e,r)=>{const a=i.get(e);void 0!==a&&Ya(a.mutation,r,Pr.empty(),Pn.now()),ca(t,r)&&(n=n.insert(e,r))}),n})}}class To{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Gn.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Rs(e.createTime)}}(t)),Gn.resolve()}getNamedQuery(e,t){return Gn.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:co(e.bundledQuery),readTime:Rs(e.readTime)}}(t)),Gn.resolve()}}class Io{constructor(){this.overlays=new Ir(kn.comparator),this.qr=new Map}getOverlay(e,t){return Gn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ba();return Gn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Gn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Gn.resolve()}getOverlaysForCollection(e,t,n){const r=ba(),i=t.length+1,a=new kn(t.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const e=s.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Gn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ir((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ba(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=ba(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return Gn.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new os(t,n));let i=this.qr.get(t);void 0===i&&(i=Ea(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Ao{constructor(){this.sessionToken=Or.EMPTY_BYTE_STRING}getSessionToken(e){return Gn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Gn.resolve()}}class jo{constructor(){this.Qr=new Dr(Do.$r),this.Ur=new Dr(Do.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Do(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Do(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new kn(new bn([])),n=new Do(t,e),r=new Do(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new kn(new bn([])),n=new Do(t,e),r=new Do(t,e+1);let i=Ea();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Do(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Do{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return kn.comparator(e.key,t.key)||dn(e.Yr,t.Yr)}static Kr(e,t){return dn(e.Yr,t.Yr)||kn.comparator(e.key,t.key)}}class Mo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Dr(Do.$r)}checkEmpty(e){return Gn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new as(i,t,n,r);this.mutationQueue.push(a);for(const s of r)this.Zr=this.Zr.add(new Do(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Gn.resolve(a)}lookupMutationBatch(e,t){return Gn.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Gn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Gn.resolve(0===this.mutationQueue.length?Yn:this.tr-1)}getAllMutationBatches(e){return Gn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Do(t,0),r=new Do(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Gn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Dr(dn);return t.forEach(e=>{const t=new Do(e,0),r=new Do(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Gn.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;kn.isDocumentKey(i)||(i=i.child(""));const a=new Do(new kn(i),0);let s=new Dr(dn);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Yr)),!0)},a),Gn.resolve(this.ti(s))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Yt(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Gn.forEach(t.mutations,r=>{const i=new Do(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Do(t,0),r=this.Zr.firstAfterOrEqual(n);return Gn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Gn.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Po{constructor(e){this.ri=e,this.docs=new Ir(kn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Gn.resolve(n?n.document.mutableCopy():ki.newInvalidDocument(t))}getEntries(e,t){let n=ma();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ki.newInvalidDocument(e))}),Gn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ma();const a=t.path,s=new kn(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Un(Fn(s),n)<=0||(r.has(s.key)||ca(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Gn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Kt(9500)}ii(e,t){return Gn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Lo(this)}getSize(e){return Gn.resolve(this.size)}}class Lo extends No{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Gn.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Oo{constructor(e){this.persistence=e,this.si=new fa(e=>Ki(e),Wi),this.lastRemoteSnapshotVersion=Ln.min(),this.highestTargetId=0,this.oi=0,this._i=new jo,this.targetCount=0,this.ai=yo.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Gn.resolve()}getLastRemoteSnapshotVersion(e){return Gn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Gn.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Gn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Gn.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new yo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Gn.resolve()}updateTargetData(e,t){return this.Pr(t),Gn.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Gn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((a,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),Gn.waitFor(i).next(()=>r)}getTargetCount(e){return Gn.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Gn.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Gn.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Gn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Gn.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Gn.resolve(n)}containsKey(e,t){return Gn.resolve(this._i.containsKey(t))}}class Ro{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wn(0),this.li=!1,this.li=!0,this.hi=new Ao,this.referenceDelegate=e(this),this.Pi=new Oo(this),this.indexManager=new ho,this.remoteDocumentCache=function(e){return new Po(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new lo(t),this.Ii=new To(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Io,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Mo(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){qt("MemoryPersistence","Starting transaction:",e);const r=new zo(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Gn.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class zo extends qn{constructor(e){super(),this.currentSequenceNumber=e}}class Fo{constructor(e){this.persistence=e,this.Ri=new jo,this.Vi=null}static mi(e){return new Fo(e)}get fi(){if(this.Vi)return this.Vi;throw Kt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Gn.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Gn.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Gn.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gn.forEach(this.fi,n=>{const r=kn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Ln.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Gn.or([()=>Gn.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Vo{constructor(e,t){this.persistence=e,this.pi=new fa(e=>er(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Eo(this,t)}static mi(e,t){return new Vo(e,t)}Ei(){}di(e){return Gn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Gn.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Gn.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Ln.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Gn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Gn.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Gn.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Gn.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ui(e.data.value)),t}br(e,t,n){return Gn.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Gn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Uo{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Ea(),r=Ea();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Uo(e,t.fromCache,n,r)}}class Bo{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class qo{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=H()?8:Qn(B())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Bo;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Bt()<=re.DEBUG&&qt("QueryEngine","SDK will not create cache indexes for query:",la(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Gn.resolve()):(Bt()<=re.DEBUG&&qt("QueryEngine","Query:",la(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Bt()<=re.DEBUG&&qt("QueryEngine","The SDK decides to create cache indexes for query:",la(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,na(t))):Gn.resolve())}ys(e,t){if(Zi(t))return Gn.resolve(null);let n=na(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=aa(t,null,"F"),n=na(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Ea(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,aa(t,null,"F")):this.vs(e,a,t,n)}))})))}ws(e,t,n,r){return Zi(t)||r.isEqual(Ln.min())?Gn.resolve(null):this.ps.getDocuments(e,n).next(i=>{const a=this.Ds(t,i);return this.Cs(t,a,n,r)?Gn.resolve(null):(Bt()<=re.DEBUG&&qt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),la(t)),this.vs(e,a,t,zn(r,On)).next(e=>e))})}Ds(e,t){let n=new Dr(da(e));return t.forEach((t,r)=>{ca(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Bt()<=re.DEBUG&&qt("QueryEngine","Using full collection scan to execute query:",la(t)),this.ps.getDocumentsMatchingQuery(e,t,Vn.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ho="LocalStore";class Go{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Ir(dn),this.xs=new fa(e=>Ki(e),Wi),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Co(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Qo(e,t,n,r){return new Go(e,t,n,r)}async function Ko(e,t){const n=Xt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],a=[];let s=Ea();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:a}))})})}function Wo(e){const t=Xt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Yo(e,t,n){let r=Ea(),i=Ea();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ma();return n.forEach((n,a)=>{const s=e.get(n);a.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ln.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):qt(Ho,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),{ks:r,qs:i}})}function Xo(e,t){const n=Xt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Yn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function $o(e,t){const n=Xt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Gn.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new oo(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Jo(e,t,n){const r=Xt(e),i=r.Ms.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Kn(e))throw e;qt(Ho,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Zo(e,t,n){const r=Xt(e);let i=Ln.min(),a=Ea();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Xt(e),i=r.xs.get(n);return void 0!==i?Gn.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,na(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{a=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Ln.min(),n?a:Ea())).next(e=>(el(r,ua(t),e),{documents:e,Qs:a})))}function el(e,t,n){let r=e.Os.get(t)||Ln.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class tl{constructor(){this.activeTargetIds=_a()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nl{constructor(){this.Mo=new tl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rl{Oo(e){}shutdown(){}}const il="ConnectivityMonitor";class al{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){qt(il,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){qt(il,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sl=null;function ol(){return null===sl?sl=268435456+Math.round(2147483648*Math.random()):sl++,"0x"+sl.toString(16)}const ll="RestConnection",cl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ul{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Yr?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const a=ol(),s=this.zo(e,t.toUriEncodedString());qt(ll,"Sending RPC '".concat(e,"' ").concat(a,":"),s,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(s),c=z(l);return this.Jo(e,s,o,n,c).then(t=>(qt(ll,"Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw Gt(ll,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",s,"request:",n),t})}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=cl[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class dl{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const hl="WebChannelConnection";class fl extends ul{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const a=ol();return new Promise((i,s)=>{const o=new Ct;o.setWithCredentials(!0),o.listenOnce(It.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case At.NO_ERROR:const n=o.getResponseJson();qt(hl,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(n)),i(n);break;case At.TIMEOUT:qt(hl,"RPC '".concat(e,"' ").concat(a," timed out")),s(new Jt($t.DEADLINE_EXCEEDED,"Request time out"));break;case At.HTTP_ERROR:const r=o.getStatus();if(qt(hl,"RPC '".concat(e,"' ").concat(a," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($t).indexOf(t)>=0?t:$t.UNKNOWN}(n.status);s(new Jt(e,n.message))}else s(new Jt($t.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Jt($t.UNAVAILABLE,"Connection failed."));break;default:Kt(9055,{l_:e,streamId:a,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{qt(hl,"RPC '".concat(e,"' ").concat(a," completed."))}});const l=JSON.stringify(r);qt(hl,"RPC '".concat(e,"' ").concat(a," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=ol(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Pt(),s=Mt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");qt(hl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=a.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new dl({Yo:t=>{h?qt(hl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(qt(hl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),qt(hl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Tt.EventType.OPEN,()=>{h||(qt(hl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Tt.EventType.CLOSE,()=>{h||(h=!0,qt(hl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Tt.EventType.ERROR,t=>{h||(h=!0,Gt(hl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Jt($t.UNAVAILABLE,"The operation could not be completed")))}),p(u,Tt.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Yt(!!i,16349);const a=i,s=(null===a||void 0===a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(s){qt(hl,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=cs[e];if(void 0!==t)return hs(t)}(t),i=s.message;void 0===n&&(n=$t.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.a_(new Jt(n,i)),u.close()}else qt(hl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(s,Dt.STAT_EVENT,t=>{t.stat===jt.PROXY?qt(hl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===jt.NOPROXY&&qt(hl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function pl(){return"undefined"!=typeof document?document:null}function ml(e){return new Ds(e,!0)}class gl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&qt("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const yl="PersistentStream";class vl{constructor(e,t,n,r,i,a,s,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gl(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===$t.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$t.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Jt($t.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return qt(yl,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(qt(yl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bl extends vl{constructor(e,t,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Kt(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Yt(void 0===t||"string"==typeof t,58123),Or.fromBase64String(t||"")):(Yt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Or.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(e){const t=void 0===e.code?$t.UNKNOWN:hs(e.code);return new Jt(t,e.message||"")}(s);n=new Es(r,i,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bs(e,r.document.name),a=Rs(r.document.updateTime),s=r.document.createTime?Rs(r.document.createTime):Ln.min(),o=new wi({mapValue:{fields:r.document.fields}}),l=ki.newFoundDocument(i,a,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ks(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Bs(e,r.document),a=r.readTime?Rs(r.readTime):Ln.min(),s=ki.newNoDocument(i,a),o=r.removedTargetIds||[];n=new ks([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Bs(e,r.document),a=r.removedTargetIds||[];n=new ks([],a,i,null)}else{if(!("filter"in t))return Kt(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,a=new ls(r,i),s=e.targetId;n=new Ss(s,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ln.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ln.min():t.readTime?Rs(t.readTime):Ln.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Gs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Yi(r)?{documents:Ys(e,r)}:{query:Xs(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ls(e,t.resumeToken);const r=Ms(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ln.min())>0){n.readTime=Ps(e,t.snapshotVersion.toTimestamp());const r=Ms(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kt(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Gs(this.serializer),t.removeTarget=e,this.q_(t)}}class wl extends vl{constructor(e,t,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Yt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Yt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Rs(e.updateTime):Rs(t);return n.isEqual(Ln.min())&&(n=Rs(t)),new qa(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Rs(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Gs(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ws(this.serializer,e))};this.q_(t)}}class xl{}class kl extends xl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Jt($t.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,s]=i;return this.connection.Go(e,Fs(t,n),r,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jt($t.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[s,o]=a;return this.connection.Ho(e,Fs(t,n),r,s,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$t.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Jt($t.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Sl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Ht(t),this.aa=!1):qt("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const El="RemoteStore";class Nl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Pl(this)&&(qt(El,"Restarting streams for network reachability change."),await async function(e){const t=Xt(e);t.Ea.add(4),await Cl(t),t.Ra.set("Unknown"),t.Ea.delete(4),await _l(t)}(this))})}),this.Ra=new Sl(n,r)}}async function _l(e){if(Pl(e))for(const t of e.da)await t(!0)}async function Cl(e){for(const t of e.da)await t(!1)}function Tl(e,t){const n=Xt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Ml(n)?Dl(n):Zl(n).O_()&&Al(n,t))}function Il(e,t){const n=Xt(e),r=Zl(n);n.Ia.delete(t),r.O_()&&jl(n,t),0===n.Ia.size&&(r.O_()?r.L_():Pl(n)&&n.Ra.set("Unknown"))}function Al(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ln.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Zl(e).Y_(t)}function jl(e,t){e.Va.Ue(t),Zl(e).Z_(t)}function Dl(e){e.Va=new _s({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Zl(e).start(),e.Ra.ua()}function Ml(e){return Pl(e)&&!Zl(e).x_()&&e.Ia.size>0}function Pl(e){return 0===Xt(e).Ea.size}function Ll(e){e.Va=void 0}async function Ol(e){e.Ra.set("Online")}async function Rl(e){e.Ia.forEach((t,n)=>{Al(e,t)})}async function zl(e,t){Ll(e),Ml(e)?(e.Ra.ha(t),Dl(e)):e.Ra.set("Unknown")}async function Fl(e,t,n){if(e.Ra.set("Online"),t instanceof Es&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){qt(El,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Vl(e,n)}else if(t instanceof ks?e.Va.Ze(t):t instanceof Ss?e.Va.st(t):e.Va.tt(t),!n.isEqual(Ln.min()))try{const t=await Wo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Or.EMPTY_BYTE_STRING,r.snapshotVersion)),jl(e,t);const i=new oo(r.target,t,n,r.sequenceNumber);Al(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){qt(El,"Failed to raise snapshot:",t),await Vl(e,t)}}async function Vl(e,t,n){if(!Kn(t))throw t;e.Ea.add(1),await Cl(e),e.Ra.set("Offline"),n||(n=()=>Wo(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{qt(El,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await _l(e)})}function Ul(e,t){return t().catch(n=>Vl(e,n,t))}async function Bl(e){const t=Xt(e),n=ec(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Yn;for(;ql(t);)try{const e=await Xo(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Hl(t,e)}catch(e){await Vl(t,e)}Gl(t)&&Ql(t)}function ql(e){return Pl(e)&&e.Ta.length<10}function Hl(e,t){e.Ta.push(t);const n=ec(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Gl(e){return Pl(e)&&!ec(e).x_()&&e.Ta.length>0}function Ql(e){ec(e).start()}async function Kl(e){ec(e).ra()}async function Wl(e){const t=ec(e);for(const n of e.Ta)t.ea(n.mutations)}async function Yl(e,t,n){const r=e.Ta.shift(),i=ss.from(r,t,n);await Ul(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Bl(e)}async function Xl(e,t){t&&ec(e).X_&&await async function(e,t){if(function(e){return ds(e)&&e!==$t.ABORTED}(t.code)){const n=e.Ta.shift();ec(e).B_(),await Ul(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Bl(e)}}(e,t),Gl(e)&&Ql(e)}async function $l(e,t){const n=Xt(e);n.asyncQueue.verifyOperationInProgress(),qt(El,"RemoteStore received new credentials");const r=Pl(n);n.Ea.add(3),await Cl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await _l(n)}async function Jl(e,t){const n=Xt(e);t?(n.Ea.delete(2),await _l(n)):t||(n.Ea.add(2),await Cl(n),n.Ra.set("Unknown"))}function Zl(e){return e.ma||(e.ma=function(e,t,n){const r=Xt(e);return r.sa(),new bl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Ol.bind(null,e),t_:Rl.bind(null,e),r_:zl.bind(null,e),H_:Fl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Ml(e)?Dl(e):e.Ra.set("Unknown")):(await e.ma.stop(),Ll(e))})),e.ma}function ec(e){return e.fa||(e.fa=function(e,t,n){const r=Xt(e);return r.sa(),new wl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kl.bind(null,e),r_:Xl.bind(null,e),ta:Wl.bind(null,e),na:Yl.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Bl(e)):(await e.fa.stop(),e.Ta.length>0&&(qt(El,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class tc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const a=Date.now()+n,s=new tc(e,t,a,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jt($t.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nc(e,t){if(Ht("AsyncQueue","".concat(t,": ").concat(e)),Kn(e))return new Jt($t.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class rc{static emptySet(e){return new rc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||kn.comparator(t.key,n.key):(e,t)=>kn.comparator(e.key,t.key),this.keyedMap=ya(),this.sortedSet=new Ir(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new rc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ic{constructor(){this.ga=new Ir(kn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Kt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class ac{constructor(e,t,n,r,i,a,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new ac(e,t,rc.emptySet(t),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class sc{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class oc{constructor(){this.queries=lc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Xt(e),r=n.queries;n.queries=lc(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Jt($t.ABORTED,"Firestore shutting down"))}}function lc(){return new fa(e=>oa(e),sa)}async function cc(e,t){const n=Xt(e);let r=3;const i=t.query;let a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new sc,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=nc(e,"Initialization of query '".concat(la(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&fc(n)}async function uc(e,t){const n=Xt(e),r=t.query;let i=3;const a=n.queries.get(r);if(a){const e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),0===a.Sa.length?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dc(e,t){const n=Xt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&fc(n)}function hc(e,t,n){const r=Xt(e),i=r.queries.get(t);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(t)}function fc(e){e.Ca.forEach(e=>{e.next()})}var pc,mc;(mc=pc||(pc={})).Ma="default",mc.Cache="cache";class gc{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ac(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pc.Cache}}class yc{constructor(e){this.key=e}}class vc{constructor(e){this.key=e}}class bc{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ea(),this.mutatedKeys=Ea(),this.eu=da(e),this.tu=new rc(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new ic,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=r,s=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ca(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(s=!0)),f&&(u?(a=a.add(u),i=h?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:s,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kt(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==a.length||l?{snapshot:new ac(this.query,e.tu,i,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ic,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ea(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new vc(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new yc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ea();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ac.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const wc="SyncEngine";class xc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class kc{constructor(e){this.key=e,this.hu=!1}}class Sc{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new fa(e=>oa(e),sa),this.Iu=new Map,this.Eu=new Set,this.du=new Ir(kn.comparator),this.Au=new Map,this.Ru=new jo,this.Vu={},this.mu=new Map,this.fu=yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Ec(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Gc(e);let i;const a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await _c(r,t,n,!0),i}async function Nc(e,t){const n=Gc(e);await _c(n,t,!0,!1)}async function _c(e,t,n,r){const i=await $o(e.localStore,na(t)),a=i.targetId,s=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await Cc(e,t,a,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&Tl(e.remoteStore,i),o}async function Cc(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Zo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const a=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,a,s);return Fc(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const a=await Zo(e.localStore,t,!0),s=new bc(t,a.Qs),o=s.ru(a.documents),l=xs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(o,e.isPrimaryClient,l);Fc(e,n,c.au);const u=new xc(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Tc(e,t,n){const r=Xt(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(e=>!sa(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Il(r.remoteStore,i.targetId),Rc(r,i.targetId)}).catch(Hn)):(Rc(r,i.targetId),await Jo(r.localStore,i.targetId,!0))}async function Ic(e,t){const n=Xt(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Il(n.remoteStore,r.targetId))}async function Ac(e,t){const n=Xt(e);try{const e=await function(e,t){const n=Xt(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const s=[];t.targetChanges.forEach((a,o)=>{const l=i.get(o);if(!l)return;s.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,a.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Or.EMPTY_BYTE_STRING,Ln.min()).withLastLimboFreeSnapshotVersion(Ln.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,a)&&s.push(n.Pi.updateTargetData(e,c))});let o=ma(),l=Ea();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(Yo(e,a,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Ln.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return Gn.waitFor(s).next(()=>a.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Yt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Yt(r.hu,14607):e.removedDocuments.size>0&&(Yt(r.hu,42227),r.hu=!1))}),await Bc(n,e,t)}catch(e){await Hn(e)}}function jc(e,t,n){const r=Xt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Xt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&fc(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dc(e,t,n){const r=Xt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),a=i&&i.key;if(a){let e=new Ir(kn.comparator);e=e.insert(a,ki.newNoDocument(a,Ln.min()));const n=Ea().add(a),i=new ws(Ln.min(),new Map,new Ir(dn),e,n);await Ac(r,i),r.du=r.du.remove(a),r.Au.delete(t),Uc(r)}else await Jo(r.localStore,t,!1).then(()=>Rc(r,t,n)).catch(Hn)}async function Mc(e,t){const n=Xt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Xt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,a=i.keys();let s=Gn.resolve();return a.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const a=n.docVersions.get(e);Yt(null!==a,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ea();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Oc(n,r,null),Lc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bc(n,e)}catch(e){await Hn(e)}}async function Pc(e,t,n){const r=Xt(e);try{const e=await function(e,t){const n=Xt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Yt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Oc(r,t,n),Lc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Bc(r,e)}catch(n){await Hn(n)}}function Lc(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Oc(e,t,n){const r=Xt(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Rc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||zc(e,t)})}function zc(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Il(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Uc(e))}function Fc(e,t,n){for(const r of n)r instanceof yc?(e.Ru.addReference(r.key,t),Vc(e,r)):r instanceof vc?(qt(wc,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||zc(e,r.key)):Kt(19791,{wu:r})}function Vc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(qt(wc,"New document in limbo: "+n),e.Eu.add(r),Uc(e))}function Uc(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new kn(bn.fromString(t)),r=e.fu.next();e.Au.set(r,new kc(n)),e.du=e.du.insert(n,r),Tl(e.remoteStore,new oo(na(Ji(n.path)),r,"TargetPurposeLimboResolution",Wn.ce))}}async function Bc(e,t,n){const r=Xt(e),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{s.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Uo.As(o.targetId,e);a.push(t)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(e,t){const n=Xt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Gn.forEach(t,t=>Gn.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Gn.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Kn(e))throw e;qt(Ho,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,a))}async function qc(e,t){const n=Xt(e);if(!n.currentUser.isEqual(t)){qt(wc,"User change. New user:",t.toKey());const e=await Ko(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Jt($t.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Bc(n,e.Ls)}}function Hc(e,t){const n=Xt(e),r=n.Au.get(t);if(r&&r.hu)return Ea().add(r.key);{let e=Ea();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Gc(e){const t=Xt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ac.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dc.bind(null,t),t.Pu.H_=dc.bind(null,t.eventManager),t.Pu.yu=hc.bind(null,t.eventManager),t}function Qc(e){const t=Xt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Pc.bind(null,t),t}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ml(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Qo(this.persistence,new qo,e.initialUser,this.serializer)}Cu(e){return new Ro(Fo.mi,this.serializer)}Du(e){return new nl}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class Wc extends Kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Yt(this.persistence.referenceDelegate instanceof Vo,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ko(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new Ro(e=>Vo.mi(e,t),this.serializer)}}class Yc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>jc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=qc.bind(null,this.syncEngine),await Jl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oc}createDatastore(e){const t=ml(e.databaseInfo.databaseId),n=function(e){return new fl(e)}(e.databaseInfo);return function(e,t,n,r){return new kl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Nl(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>jc(this.syncEngine,e,0),al.v()?new al:new rl)}createSyncEngine(e,t){return function(e,t,n,r,i,a,s){const o=new Sc(e,t,n,r,i,a);return s&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Xt(e);qt(El,"RemoteStore shutting down."),t.Ea.add(5),await Cl(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Yc.provider={build:()=>new Yc};class Xc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class $c{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Jt($t.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Xt(e),r={documents:t.map(e=>Us(n.serializer,e))},i=await n.Ho("BatchGetDocuments",n.serializer.databaseId,bn.emptyPath(),r,t.length),a=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Yt(!!t.found,43571),t.found.name,t.found.updateTime;const n=Bs(e,t.found.name),r=Rs(t.found.updateTime),i=t.found.createTime?Rs(t.found.createTime):Ln.min(),a=new wi({mapValue:{fields:t.found.fields}});return ki.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Yt(!!t.missing,3894),Yt(!!t.readTime,22933);const n=Bs(e,t.missing),r=Rs(t.readTime);return ki.newNoDocument(n,r)}(e,t):Kt(7234,{result:t})}(n.serializer,e);a.set(t.key.toString(),t)});const s=[];return t.forEach(e=>{const t=a.get(e.toString());Yt(!!t,55234,{key:e}),s.push(t)}),s}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new rs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=kn.fromPath(t);this.mutations.push(new is(n,this.precondition(n)))}),await async function(e,t){const n=Xt(e),r={writes:t.map(e=>Ws(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,bn.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kt(50498,{Gu:e.constructor.name});t=Ln.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Jt($t.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ln.min())?Ha.exists(!1):Ha.updateTime(t):Ha.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ln.min()))throw new Jt($t.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ha.updateTime(t)}return Ha.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Jc{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new gl(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new $c(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!Xn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ds(t)}return!1}}const Zc="FirestoreClient";class eu{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ft.UNAUTHENTICATED,this.clientId=un.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{qt(Zc,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(qt(Zc,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=nc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function tu(e,t){e.asyncQueue.verifyOperationInProgress(),qt(Zc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ko(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function nu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ru(e);qt(Zc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>$l(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>$l(t.remoteStore,n)),e._onlineComponents=t}async function ru(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){qt(Zc,"Using user provided OfflineComponentProvider");try{await tu(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===$t.FAILED_PRECONDITION||e.code===$t.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Gt("Error using user provided cache. Falling back to memory cache: "+n),await tu(e,new Kc)}}else qt(Zc,"Using default OfflineComponentProvider"),await tu(e,new Wc(void 0));return e._offlineComponents}async function iu(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(qt(Zc,"Using user provided OnlineComponentProvider"),await nu(e,e._uninitializedComponentsProvider._online)):(qt(Zc,"Using default OnlineComponentProvider"),await nu(e,new Yc))),e._onlineComponents}function au(e){return iu(e).then(e=>e.syncEngine)}function su(e){return iu(e).then(e=>e.datastore)}async function ou(e){const t=await iu(e),n=t.eventManager;return n.onListen=Ec.bind(null,t.syncEngine),n.onUnlisten=Tc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Nc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ic.bind(null,t.syncEngine),n}function lu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new Xc({next:o=>{a.Nu(),t.enqueueAndForget(()=>uc(e,s));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Jt($t.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Jt($t.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new gc(Ji(n.path),a,{includeMetadataChanges:!0,qa:!0});return cc(e,s)}(await ou(e),e.asyncQueue,t,n,r)),r.promise}function cu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const a=new Xc({next:n=>{a.Nu(),t.enqueueAndForget(()=>uc(e,s)),n.fromCache&&"server"===r.source?i.reject(new Jt($t.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new gc(n,a,{includeMetadataChanges:!0,qa:!0});return cc(e,s)}(await ou(e),e.asyncQueue,t,n,r)),r.promise}function uu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const du=new Map,hu="firestore.googleapis.com",fu=!0;class pu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jt($t.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hu,this.ssl=fu}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:fu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=mo;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<bo)throw new Jt($t.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Jt($t.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Jt($t.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Jt($t.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Jt($t.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Jt($t.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jt($t.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tn;switch(e.type){case"firstParty":return new sn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Jt($t.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=du.get(e);t&&(qt("ComponentProvider","Removing Datastore"),du.delete(e),t.terminate())}(this),Promise.resolve()}}function gu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Tn(e,mu);const i=z(t),a=e._getSettings(),s=c(c({},a),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(async function(e){(await fetch(e,{credentials:"include"})).ok}("https://".concat(o)),U("Firestore",!0)),a.host!==hu&&a.host!==o&&Gt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},a),{},{host:o,ssl:i,emulatorOptions:r});if(!Y(l,s)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ft.MOCK_USER;else{var u;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[j(JSON.stringify({alg:"none",type:"JWT"})),j(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Jt($t.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ft(i)}e._authCredentials=new nn(new en(t,n))}}class yu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yu(this.firestore,e,this._query)}}class vu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vu(this.firestore,e,this._key)}toJSON(){return{type:vu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(jn(t,vu._jsonSchema))return new vu(e,n||null,new kn(bn.fromString(t.referencePath)))}}vu._jsonSchemaVersion="firestore/documentReference/1.0",vu._jsonSchema={type:An("string",vu._jsonSchemaVersion),referencePath:An("string")};class bu extends yu{constructor(e,t,n){super(e,t,Ji(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vu(this.firestore,null,new kn(e))}withConverter(e){return new bu(this.firestore,e,this._path)}}function wu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),Sn("collection","path",t),e instanceof mu){const n=bn.fromString(t,...r);return Nn(n),new bu(e,null,n)}{if(!(e instanceof vu||e instanceof bu))throw new Jt($t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bn.fromString(t,...r));return Nn(n),new bu(e.firestore,null,n)}}function xu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),1===arguments.length&&(t=un.newId()),Sn("doc","path",t),e instanceof mu){const n=bn.fromString(t,...r);return En(n),new vu(e,null,new kn(n))}{if(!(e instanceof vu||e instanceof bu))throw new Jt($t.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(bn.fromString(t,...r));return En(n),new vu(e.firestore,e instanceof bu?e.converter:null,new kn(n))}}const ku="AsyncQueue";class Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gl(this,"async_queue_retry"),this._c=()=>{const e=pl();e&&qt(ku,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=pl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Zt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Kn(e))throw e;qt(ku,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Ht("INTERNAL UNHANDLED ERROR: ",Eu(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=tc.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Kt(47125,{Pc:Eu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Eu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Nu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class _u extends mu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Su,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Su(e),this._firestoreClient=void 0,await e}}}function Cu(e){if(e._terminated)throw new Jt($t.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Tu(e),e._firestoreClient}function Tu(e){var t,n,r;const i=e._freezeSettings(),a=function(e,t,n,r){return new Wr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,uu(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new eu(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(Or.fromBase64String(e))}catch(e){throw new Jt($t.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Iu(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Iu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jn(e,Iu._jsonSchema))return Iu.fromBase64String(e.bytes)}}Iu._jsonSchemaVersion="firestore/bytes/1.0",Iu._jsonSchema={type:An("string",Iu._jsonSchemaVersion),bytes:An("string")};class Au{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Jt($t.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ju{constructor(e){this._methodName=e}}class Du{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Jt($t.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Jt($t.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dn(this._lat,e._lat)||dn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Du._jsonSchemaVersion}}static fromJSON(e){if(jn(e,Du._jsonSchema))return new Du(e.latitude,e.longitude)}}Du._jsonSchemaVersion="firestore/geoPoint/1.0",Du._jsonSchema={type:An("string",Du._jsonSchemaVersion),latitude:An("number"),longitude:An("number")};class Mu{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jn(e,Mu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Mu(e.vectorValues);throw new Jt($t.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mu._jsonSchemaVersion="firestore/vectorValue/1.0",Mu._jsonSchema={type:An("string",Mu._jsonSchemaVersion),vectorValues:An("object")};const Pu=/^__.*__$/;class Lu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Za(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ja(e,this.data,t,this.fieldTransforms)}}class Ou{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ru(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kt(40011,{Ac:e})}}class zu{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zu(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Ru(this.Ac)&&Pu.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Fu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ml(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new zu({Ac:e,methodName:t,Dc:n,path:xn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vu(e){const t=e._freezeSettings(),n=ml(e._databaseId);return new Fu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Uu(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);Ju("Data must be an object, but it was:",s,r);const o=Xu(r,s);let l,c;if(a.merge)l=new Pr(s.fieldMask),c=s.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const i=Zu(t,r,n);if(!s.contains(i))throw new Jt($t.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));rd(e,i)||e.push(i)}l=new Pr(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new Lu(new wi(o),l,c)}class Bu extends ju{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bu}}function qu(e,t,n){return new zu({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Hu extends ju{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=qu(this,e,!0),n=this.vc.map(e=>Yu(e,t)),r=new La(n);return new Ba(e.path,r)}isEqual(e){return e instanceof Hu&&Y(this.vc,e.vc)}}class Gu extends ju{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=qu(this,e,!0),n=this.vc.map(e=>Yu(e,t)),r=new Ra(n);return new Ba(e.path,r)}isEqual(e){return e instanceof Gu&&Y(this.vc,e.vc)}}function Qu(e,t,n,r){const i=e.Cc(1,t,n);Ju("Data must be an object, but it was:",i,r);const a=[],s=wi.empty();Cr(r,(e,r)=>{const o=td(t,e,n);r=$(r);const l=i.yc(o);if(r instanceof Bu)a.push(o);else{const e=Yu(r,l);null!=e&&(a.push(o),s.set(o,e))}});const o=new Pr(a);return new Ou(s,o,i.fieldTransforms)}function Ku(e,t,n,r,i,a){const s=e.Cc(1,t,n),o=[Zu(t,r,n)],l=[i];if(a.length%2!=0)throw new Jt($t.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<a.length;h+=2)o.push(Zu(t,a[h])),l.push(a[h+1]);const c=[],u=wi.empty();for(let h=o.length-1;h>=0;--h)if(!rd(c,o[h])){const e=o[h];let t=l[h];t=$(t);const n=s.yc(e);if(t instanceof Bu)c.push(e);else{const r=Yu(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Pr(c);return new Ou(u,d,s.fieldTransforms)}function Wu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Yu(n,e.Cc(r?4:3,t))}function Yu(e,t){if($u(e=$(e)))return Ju("Unsupported field value:",t,e),Xu(e,t);if(e instanceof ju)return function(e,t){if(!Ru(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Yu(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=$(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ia(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Pn.fromDate(e);return{timestampValue:Ps(t.serializer,n)}}if(e instanceof Pn){const n=new Pn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ps(t.serializer,n)}}if(e instanceof Du)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Iu)return{bytesValue:Ls(t.serializer,e._byteString)};if(e instanceof vu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:zs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Mu)return function(e,t){return{mapValue:{fields:{[$r]:{stringValue:ei},[ti]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ca(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Cn(e)))}(e,t)}function Xu(e,t){const n={};return Tr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cr(e,(e,r)=>{const i=Yu(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function $u(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Pn||e instanceof Du||e instanceof Iu||e instanceof vu||e instanceof ju||e instanceof Mu)}function Ju(e,t,n){if(!$u(n)||!_n(n)){const r=Cn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Zu(e,t,n){if((t=$(t))instanceof Au)return t._internalPath;if("string"==typeof t)return td(e,t);throw nd("Field path arguments must be of type string or ",e,!1,void 0,n)}const ed=new RegExp("[~\\*/\\[\\]]");function td(e,t,n){if(t.search(ed)>=0)throw nd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Au(...t.split("."))._internalPath}catch(r){throw nd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function nd(e,t,n,r,i){const a=r&&!r.isEmpty(),s=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Jt($t.INVALID_ARGUMENT,o+e+l)}function rd(e,t){return e.some(e=>e.isEqual(t))}class id{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ad(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ad extends id{data(){return super.data()}}function sd(e,t){return"string"==typeof t?td(e,t):t instanceof Au?t._internalPath:t._delegate._internalPath}function od(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Jt($t.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ld{}class cd extends ld{}function ud(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof ld&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof hd).length,n=e.filter(e=>e instanceof dd).length;if(t>1||t>0&&n>0)throw new Jt($t.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class dd extends cd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new dd(e,t,n)}_apply(e){const t=this._parse(e);return vd(e._query,t),new yu(e.firestore,e.converter,ia(e._query,t))}_parse(e){const t=Vu(e.firestore),n=function(e,t,n,r,i,a,s){let o;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Jt($t.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){yd(s,a);const t=[];for(const n of s)t.push(gd(r,e,n));o={arrayValue:{values:t}}}else o=gd(r,e,s)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||yd(s,a),o=Wu(n,t,s,"in"===a||"not-in"===a);return Ii.create(i,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class hd extends ld{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hd(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)vd(n,i),n=ia(n,i)}(e._query,t),new yu(e.firestore,e.converter,ia(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fd extends cd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fd(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Jt($t.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Jt($t.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _i(t,n)}(e._query,this._field,this._direction);return new yu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function pd(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=sd("orderBy",e);return fd._create(n,t)}class md extends cd{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new md(e,t,n)}_apply(e){return new yu(e.firestore,e.converter,aa(e._query,this._limit,this._limitType))}}function gd(e,t,n){if("string"==typeof(n=$(n))){if(""===n)throw new Jt($t.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ea(t)&&-1!==n.indexOf("/"))throw new Jt($t.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(bn.fromString(n));if(!kn.isDocumentKey(r))throw new Jt($t.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return di(e,new kn(r))}if(n instanceof vu)return di(e,n._key);throw new Jt($t.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Cn(n),"."))}function yd(e,t){if(!Array.isArray(e)||0===e.length)throw new Jt($t.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function vd(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Jt($t.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Jt($t.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class bd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Kt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Cr(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[ti].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Fr(e.doubleValue));return new Mu(n)}convertGeoPoint(e){return new Du(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Qr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Kr(e));default:return null}}convertTimestamp(e){const t=zr(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=bn.fromString(e);Yt(so(n),9688,{name:e});const r=new Xr(n.get(1),n.get(3)),i=new kn(n.popFirst(5));return r.isEqual(t)||Ht("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function wd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class xd extends bd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vu(this.firestore,null,t)}}class kd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sd extends id{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(sd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Jt($t.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Sd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Sd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sd._jsonSchema={type:An("string",Sd._jsonSchemaVersion),bundleSource:An("string","DocumentSnapshot"),bundleName:An("string"),bundle:An("string")};class Ed extends Sd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Nd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new kd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Ed(this._firestore,this._userDataWriter,n.key,n,new kd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Jt($t.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Ed(e._firestore,e._userDataWriter,n.doc.key,n.doc,new kd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Ed(e._firestore,e._userDataWriter,t.doc.key,t.doc,new kd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,a=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:_d(t.type),doc:r,oldIndex:i,newIndex:a}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Jt($t.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=un.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _d(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kt(61501,{type:e})}}function Cd(e){e=Tn(e,vu);const t=Tn(e.firestore,_u);return lu(Cu(t),e._key).then(n=>Od(t,e,n))}Nd._jsonSchemaVersion="firestore/querySnapshot/1.0",Nd._jsonSchema={type:An("string",Nd._jsonSchemaVersion),bundleSource:An("string","QuerySnapshot"),bundleName:An("string"),bundle:An("string")};class Td extends bd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vu(this.firestore,null,t)}}function Id(e){e=Tn(e,yu);const t=Tn(e.firestore,_u),n=Cu(t),r=new Td(t);return od(e._query),cu(n,e._query).then(n=>new Nd(t,r,e,n))}function Ad(e,t,n){e=Tn(e,vu);const r=Tn(e.firestore,_u),i=wd(e.converter,t,n);return Ld(r,[Uu(Vu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ha.none())])}function jd(e,t,n){e=Tn(e,vu);const r=Tn(e.firestore,_u),i=Vu(r);let a;for(var s=arguments.length,o=new Array(s>3?s-3:0),l=3;l<s;l++)o[l-3]=arguments[l];return a="string"==typeof(t=$(t))||t instanceof Au?Ku(i,"updateDoc",e._key,t,n,o):Qu(i,"updateDoc",e._key,t),Ld(r,[a.toMutation(e._key,Ha.exists(!0))])}function Dd(e){return Ld(Tn(e.firestore,_u),[new rs(e._key,Ha.none())])}function Md(e,t){const n=Tn(e.firestore,_u),r=xu(e),i=wd(e.converter,t);return Ld(n,[Uu(Vu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ha.exists(!1))]).then(()=>r)}function Pd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=$(e);let i={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof n[a]||Nu(n[a])||(i=n[a++]);const s={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Nu(n[a])){var o,l,c;const e=n[a];n[a]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[a+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[a+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof vu)d=Tn(e.firestore,_u),h=Ji(e._key.path),u={next:t=>{n[a]&&n[a](Od(d,e,t))},error:n[a+1],complete:n[a+2]};else{const t=Tn(e,yu);d=Tn(t.firestore,_u),h=t._query;const r=new Td(d);u={next:e=>{n[a]&&n[a](new Nd(d,r,t,e))},error:n[a+1],complete:n[a+2]},od(e._query)}return function(e,t,n,r){const i=new Xc(r),a=new gc(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>cc(await ou(e),a)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>uc(await ou(e),a))}}(Cu(d),h,s,u)}function Ld(e,t){return function(e,t){const n=new Zt;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Qc(e);try{const e=await function(e,t){const n=Xt(e),r=Pn.now(),i=t.reduce((e,t)=>e.add(t.key),Ea());let a,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=ma(),l=Ea();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{a=i;const s=[];for(const e of t){const t=Xa(e,a.get(e.key).overlayedDocument);null!=t&&s.push(new Za(e.key,t,xi(t.value.mapValue),Ha.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:va(a)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Ir(dn)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Bc(r,e.changes),await Bl(r.remoteStore)}catch(e){const t=nc(e,"Failed to persist write");n.reject(t)}}(await au(e),t,n)),n.promise}(Cu(e),t)}function Od(e,t,n){const r=n.docs.get(t._key),i=new Td(e);return new Sd(e,i,t._key,r,new kd(n.hasPendingWrites,n.fromCache),t.converter)}const Rd={maxAttempts:5};class zd{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vu(e)}set(e,t,n){this._verifyNotCommitted();const r=Fd(e,this._firestore),i=wd(r.converter,t,n),a=Uu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ha.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Fd(e,this._firestore);let i;for(var a=arguments.length,s=new Array(a>3?a-3:0),o=3;o<a;o++)s[o-3]=arguments[o];return i="string"==typeof(t=$(t))||t instanceof Au?Ku(this._dataReader,"WriteBatch.update",r._key,t,n,s):Qu(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Ha.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Fd(e,this._firestore);return this._mutations=this._mutations.concat(new rs(t._key,Ha.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt($t.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fd(e,t){if((e=$(e)).firestore!==t)throw new Jt($t.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Vd{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vu(e)}get(e){const t=Fd(e,this._firestore),n=new xd(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Kt(24041);const r=e[0];if(r.isFoundDocument())return new id(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new id(this._firestore,n,t._key,null,t.converter);throw Kt(18433,{doc:r})})}set(e,t,n){const r=Fd(e,this._firestore),i=wd(r.converter,t,n),a=Uu(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}update(e,t,n){const r=Fd(e,this._firestore);let i;for(var a=arguments.length,s=new Array(a>3?a-3:0),o=3;o<a;o++)s[o-3]=arguments[o];return i="string"==typeof(t=$(t))||t instanceof Au?Ku(this._dataReader,"Transaction.update",r._key,t,n,s):Qu(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Fd(e,this._firestore);return this._transaction.delete(t._key),this}}class Ud extends Vd{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Fd(e,this._firestore),n=new Td(this._firestore);return super.get(e).then(e=>new Sd(this._firestore,n,t._key,e._document,new kd(!1,!1),t.converter))}}function Bd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hu("arrayUnion",t)}function qd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gu("arrayRemove",t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Vt=e}("12.6.0"),ot(new J("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),s=new _u(new rn(e.getProvider("auth-internal")),new ln(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Jt($t.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xr(e.options.projectId,t)}(a,r),a);return i=c({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),ht(Rt,zt,e),ht(Rt,zt,"esm2020")}();ht("firebase","12.6.0","app");const Hd={apiKey:"AIzaSyCwQjAtEjJGhVv2KuB0HwazdqQ4lhP2I_w",authDomain:"nmsl-accounting.firebaseapp.com",projectId:"nmsl-accounting",storageBucket:"nmsl-accounting.firebasestorage.app",messagingSenderId:"623278577938",appId:"1:623278577938:web:a7fa005c80168303437bcb",measurementId:"G-0B3WN5F2CP"};let Gd,Qd;try{Gd=dt(Hd),Qd=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt;const t=rt.get(e);if(!t&&e===tt&&O())return dt();if(!t)throw ct.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||Yr,i=lt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=L("firestore");e&&gu(i,...e)}return i}(Gd)}catch(of){console.error("Firebase \u521d\u59cb\u5316\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u8a2d\u5b9a\u6a94",of)}const Kd=y("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Wd=y("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Yd=y("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Xd=y("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),$d=y("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Jd=y("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Zd=y("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),eh="1219v1",th=["\u6c34\u91ce","vina","Avalon","Ricky","\u4e94\u5341\u5d50","\u6c34\u6708","\u5f4c\u7802","Wolf","UBS"],nh={"\u6c34\u91ce":"1571",vina:"7720",Avalon:"1018",Ricky:"0721","\u4e94\u5341\u5d50":"1225","\u6c34\u6708":"5230","\u5f4c\u7802":"3210",Wolf:"0821",UBS:"0663","\u8a2a\u5ba2":"0000"},rh={WORLD:{label:"\u4e16\u754c",tax:.2},GENERAL:{label:"\u4e00\u822c",tax:.1}},ih=(()=>{try{return"/team-accounting/map.jpg"}catch(e){return"/map.jpg"}})(),ah=async(e,t)=>{if(e)try{await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})}catch(of){console.error("Discord \u901a\u77e5\u767c\u9001\u5931\u6557",of)}},sh=e=>ah("https://discord.com/api/webhooks/1450050856094535745/0dvodClTjDzQEc_t5z_cCXNjPTF2wCyilpcWtJJNyX0xGhp4lYcRYOgzOam1IWT9Zqgo",e),oh=(e,t,n)=>{const r=(new Date).toLocaleString("zh-TW",{hour12:!1}),i="`[".concat(r,"]` **").concat(e||"\u672a\u5177\u540d","** ").concat(t,"\uff1a").concat(n);ah("https://discord.com/api/webhooks/1450325286062260296/_cNDE7s-GKL0QHVGKye5qIRA-xsQH-iOXUyFLWaDsGc0LwXTU94HC4yFdRW-eJm6KmTF",i)},lh=e=>{if(!e)return"\u7121\u7d00\u9304";try{return new Date(e).toLocaleString("zh-TW",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch(t){return"\u65e5\u671f\u932f\u8aa4"}},ch=e=>{if(!e)return"--:--";try{return new Date(e).toLocaleString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(t){return"--:--"}},uh=e=>{try{return e.toLocaleString("zh-TW",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch(t){return"--:--:--"}},dh=e=>{try{const t=new Date(e),n=new Date;n.setHours(0,0,0,0);const r=new Date(t);r.setHours(0,0,0,0);const i=r.getTime()-n.getTime(),a=Math.round(i/864e5);return-1===a?"yesterday":0===a?"today":1===a?"tomorrow":"other"}catch(t){return"other"}},hh=()=>{const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)},fh=()=>{const e=new Date,t=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),r=String(e.getSeconds()).padStart(2,"0");return"".concat(t,":").concat(n,":").concat(r)},ph=()=>{const e=Math.floor(360*Math.random()),t=70+30*Math.random(),n=(45+15*Math.random())/100,r=t*Math.min(n,1-n)/100,i=t=>{const i=(t+e/30)%12,a=n-r*Math.max(Math.min(i-3,9-i,1),-1);return Math.round(255*a).toString(16).padStart(2,"0")};return"#".concat(i(0)).concat(i(8)).concat(i(4))},mh=e=>{if(!e)return"";const t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&11===t[2].length?t[2]:e};var gh=n(579);const yh=e=>{let{isDarkMode:t,currentUser:n}=e;const[i,a]=(0,r.useState)({}),[s,o]=(0,r.useState)(th),[l,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)({}),m={Avalon:["\u6210\u90fd[\u827e\u840a]","\u6210\u90fd\u58de\u5973\u4eba[\u827e\u840a]","\u6210\u90fd\u5927\u5e2b\u59ca[\u827e\u840a]","\u5929\u65cf\u8089\u4fbf\u5668[\u827e\u840a]","\u6210\u90fd\u5c0f\u58de\u86cb[\u827e\u840a]","\u91cd\u6176[\u827e\u840a]","\u5929\u65cf\u5c0f\u8ff7\u59b9[\u827e\u840a]","\u6210\u90fd\u5c0f\u8ff7\u59b9[\u827e\u840a]"],Ricky:["Hoshiyomi[\u827e\u840a]","\u7bad\u7bad\u7bad[\u827e\u840a]","\u51fa\u8ca8\u5c0f\u9ad8\u624b[\u827e\u840a]","\u9b54\u65cf\u5c0f\u4ed9\u5973[\u827e\u840a]","\u50b3\u7d71\u7f8e\u5fb7[\u827e\u840a]","\u5931\u696d\u88dc\u52a9[\u827e\u840a]","\u60c5\u7dd2\u50f9\u503c[\u827e\u840a]","\u96dc\u71f4\u5154[\u827e\u840a]"],"\u6c34\u91ce":["\u671d\u82b1[\u827e\u840a]","\u671d\u8349[\u827e\u840a]","\u66ae\u82b1[\u827e\u840a]","\u66ae\u8349[\u827e\u840a]","\u5915\u82b1[\u827e\u840a]","\u5915\u8349[\u827e\u840a]","\u6668\u82b1[\u827e\u840a]","\u6668\u8349[\u827e\u840a]"],vina:["\u9761[\u827e\u840a]","\u7db4[\u827e\u840a]","\u9de5[\u827e\u840a]","\u6211\u4e0d\u8981\u8dd1\u4e3b\u7dda[\u827e\u840a]","\u4ab0[\u827e\u840a]","\u963f\u54c8\u6700\u5f8c\u4e00\u53ea\u5566[\u827e\u840a]","\u8fa3\u96de\u9eb5\u8981\u914d\u5510\u5fc3\u86cb[\u827e\u840a]","x936[\u827e\u840a]"],Wolf:["MrAirWolf[\u827e\u840a]","FarmerWolf1[\u827e\u840a]","FarmerWolf2[\u827e\u840a]","FarmerWolf3[\u827e\u840a]"],UBS:["\u6002\u90a3\u628a\u5361\u62ff[\u4f0a\u65af]","\u6002\u90a3\u9a6c\u8428\u5361[\u4f0a\u65af]","\u538b\u529b\u9a6c\u65af\u5185[\u4f0a\u65af]","\u4e9a\u8def\u52a0\u5185\u5676[\u4f0a\u65af]","\u6240\u7d2f\u54c7\u591a\u5361\u7eb3[\u4f0a\u65af]","\u86c7\u55b0\u5922\u5b50[\u827e\u840a]","\u79c1\u5bc6\u9a6c\u8d5b[\u4f0a\u65af]","\u7259\u767d\u4e00[\u4f0a\u65af]"],"\u6c34\u6708":["\u6c99\u5948\u8eb2\u907f\u7403[\u827e\u840a]","\u6709\u7d00[\u827e\u840a]","\u4f60\u5fd9\u5427[\u827e\u840a]","\u6930\u86cb\u6a39\u862d\u53eb[\u827e\u840a]","\u5c0f\u62c9\u9054\u624b\u69cd[\u827e\u840a]"],"\u4e94\u5341\u5d50":["\u91d1\u5477[\u827e\u840a]","\u975c\u975c\u54c1\u9451[\u827e\u840a]","\u7d30\u7d30\u54c1\u528d[\u827e\u840a]","\u7a57\u5f13\u57a3[\u827e\u840a]"],"\u5f4c\u7802":[],"\u8a2a\u5ba2":[]};(0,r.useEffect)(()=>{if(!Qd)return;const e=Pd(xu(Qd,"member_characters","data"),e=>{e.exists()?a(e.data()):a({})});return()=>e()},[]);const g=async e=>{var t;if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");const r=null===(t=f[e])||void 0===t?void 0:t.trim();if(r)try{const t=xu(Qd,"member_characters","data");await Ad(t,{[e]:Bd(r)},{merge:!0}),p(t=>c(c({},t),{},{[e]:""})),oh(n,"\u65b0\u589e\u89d2\u8272","".concat(e,": ").concat(r))}catch(i){console.error("\u65b0\u589e\u5931\u6557",i),alert("\u65b0\u589e\u5931\u6557")}};return(0,gh.jsxs)("div",{className:"p-4 md:p-6 max-w-7xl mx-auto pb-20",children:[(0,gh.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,gh.jsxs)("div",{children:[(0,gh.jsx)("h2",{className:"text-2xl font-bold border-l-4 pl-3 border-green-500 mb-1",style:{color:"var(--app-text)"},children:"\u89d2\u8272 ID \u540d\u9304"}),(0,gh.jsx)("p",{className:"text-sm opacity-60",style:{color:"var(--app-text)"},children:"\u52fe\u9078\u6210\u54e1\u4ee5\u6aa2\u8996\u5176\u5206\u8eab ID\uff0c\u9ede\u64ca\u5361\u7247\u5373\u53ef\u8907\u88fd\u3002"})]}),(0,gh.jsx)("div",{className:"flex gap-2",children:n&&"\u8a2a\u5ba2"!==n&&(0,gh.jsxs)(gh.Fragment,{children:[0===Object.keys(i).length&&(0,gh.jsxs)("button",{onClick:async()=>{if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(window.confirm("\u9019\u5c07\u6703\u8986\u5beb/\u5408\u4f75\u76ee\u524d\u7684\u8cc7\u6599\u5eab\u5167\u5bb9\u70ba\u5716\u7247\u4e2d\u7684\u9810\u8a2d\u503c\uff0c\u78ba\u5b9a\u8981\u57f7\u884c\u55ce\uff1f"))try{await Ad(xu(Qd,"member_characters","data"),m,{merge:!0}),alert("\u532f\u5165\u6210\u529f\uff01"),oh(n,"\u7cfb\u7d71\u64cd\u4f5c","\u532f\u5165\u521d\u59cb\u89d2\u8272\u8cc7\u6599")}catch(e){console.error(e),alert("\u532f\u5165\u5931\u6557")}},className:"flex items-center gap-2 px-3 py-2 rounded bg-yellow-600 text-white shadow hover:bg-yellow-700",children:[(0,gh.jsx)(Kd,{size:16})," \u532f\u5165\u9810\u8a2d\u8cc7\u6599"]}),(0,gh.jsxs)("button",{onClick:()=>u(!l),className:"flex items-center gap-2 px-3 py-2 rounded text-white shadow transition-all ".concat(l?"bg-green-600":"bg-gray-500"),children:[l?(0,gh.jsx)(Wd,{size:16}):(0,gh.jsx)(Yd,{size:16}),l?"\u5b8c\u6210\u7de8\u8f2f":"\u7de8\u8f2f\u6a21\u5f0f"]})]})})]}),(0,gh.jsxs)("div",{className:"p-4 rounded-xl shadow-sm mb-6 flex flex-wrap gap-2 transition-colors",style:{background:"var(--app-card-bg)"},children:[(0,gh.jsx)("button",{onClick:()=>o(s.length===th.length?[]:th),className:"px-3 py-1.5 rounded-full text-sm font-bold border transition-all ".concat(s.length===th.length?"bg-blue-600 text-white border-blue-600":"bg-transparent opacity-60 border-gray-500"),style:{color:s.length===th.length?"white":"var(--app-text)"},children:s.length===th.length?"\u5168\u9078":"\u5168\u4e0d\u9078"}),(0,gh.jsx)("div",{className:"w-px h-6 bg-gray-500/30 mx-2 self-center"}),th.map(e=>(0,gh.jsxs)("button",{onClick:()=>(e=>{s.includes(e)?o(s.filter(t=>t!==e)):o([...s,e])})(e),className:"px-3 py-1.5 rounded-full text-sm border transition-all flex items-center gap-1\n              ".concat(s.includes(e)?"bg-blue-500/20 border-blue-500 text-blue-500 font-bold":"bg-transparent border-gray-500/50 opacity-50"),style:{color:s.includes(e)?t?"#60a5fa":"#2563eb":"var(--app-text)",borderColor:s.includes(e)?t?"#60a5fa":"#2563eb":void 0},children:[s.includes(e)&&(0,gh.jsx)(Xd,{size:12}),e]},e))]}),(0,gh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:th.filter(e=>s.includes(e)).map(e=>{const t=i[e]||[];return(0,gh.jsxs)("div",{className:"rounded-xl overflow-hidden shadow-md flex flex-col border border-white/10 transition-colors",style:{background:"var(--app-card-bg)"},children:[(0,gh.jsx)("div",{className:"p-3 border-b border-white/10 flex justify-between items-center bg-black/10",children:(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("div",{className:"p-1.5 rounded-full bg-blue-500 text-white",children:(0,gh.jsx)(S,{size:16})}),(0,gh.jsx)("h3",{className:"font-bold text-lg",style:{color:"var(--app-text)"},children:e}),(0,gh.jsxs)("span",{className:"text-xs opacity-50 bg-black/20 px-2 py-0.5 rounded-full",style:{color:"var(--app-text)"},children:[t.length," \u89d2"]})]})}),(0,gh.jsxs)("div",{className:"p-3 flex-1 flex flex-col gap-2",children:[t.length>0?t.map((t,r)=>(0,gh.jsxs)("div",{className:"group flex items-center justify-between p-2 rounded transition-colors relative hover:pl-3",style:{background:"var(--card-bg)",color:"var(--card-text)"},children:[(0,gh.jsx)("span",{className:"font-mono text-sm truncate select-all",children:t}),(0,gh.jsx)("div",{className:"flex items-center gap-1",children:l?(0,gh.jsx)("button",{onClick:()=>(async(e,t)=>{if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(window.confirm("\u78ba\u5b9a\u8981\u522a\u9664 ".concat(e,' \u7684\u89d2\u8272 "').concat(t,'" \u55ce\uff1f')))try{const r=xu(Qd,"member_characters","data");await jd(r,{[e]:qd(t)}),oh(n,"\u522a\u9664\u89d2\u8272","".concat(e,": ").concat(t))}catch(r){console.error("\u522a\u9664\u5931\u6557",r),alert("\u522a\u9664\u5931\u6557")}})(e,t),className:"p-1.5 rounded hover:bg-red-500/20 text-gray-400 hover:text-red-500 transition-colors",children:(0,gh.jsx)($d,{size:16})}):(0,gh.jsx)("button",{onClick:()=>{return e=t,navigator.clipboard.writeText(e),h(e),void setTimeout(()=>h(null),1500);var e},className:"p-1.5 rounded transition-colors flex items-center gap-1 ".concat(d===t?"bg-green-500 text-white":"hover:bg-white/10 text-gray-400 hover:text-white"),title:"\u8907\u88fd\u540d\u7a31",children:d===t?(0,gh.jsx)(Xd,{size:16}):(0,gh.jsx)(Jd,{size:16})})})]},r)):(0,gh.jsx)("div",{className:"text-center py-4 opacity-30 text-sm italic",style:{color:"var(--app-text)"},children:"\u5c1a\u7121\u89d2\u8272\u8cc7\u6599"}),l&&(0,gh.jsxs)("div",{className:"mt-2 flex gap-2 animate-in fade-in slide-in-from-top-2",children:[(0,gh.jsx)("input",{type:"text",placeholder:"\u8f38\u5165 ID...",className:"flex-1 p-2 text-sm rounded border border-gray-500/30 bg-black/20 outline-none focus:border-blue-500 transition-colors",style:{color:"var(--app-text)"},value:f[e]||"",onChange:t=>p(c(c({},f),{},{[e]:t.target.value})),onKeyDown:t=>"Enter"===t.key&&g(e)}),(0,gh.jsx)("button",{onClick:()=>g(e),className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",disabled:!f[e],children:(0,gh.jsx)(Zd,{size:18})})]})]})]},e)})})]})},vh=y("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),bh=y("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),wh=y("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),xh=y("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),kh=y("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Sh=y("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),Eh=y("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Nh=e=>{let{videoId:t,isDarkMode:n}=e;const[i,a]=(0,r.useState)(null),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!0),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(50),[p,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)(!1),v=(0,r.useRef)(g);(0,r.useEffect)(()=>{const e=localStorage.getItem("accounting_player_settings");if(e)try{const t=JSON.parse(e);void 0!==t.volume&&f(t.volume),void 0!==t.isMuted&&m(t.isMuted),void 0!==t.isLoop&&(y(t.isLoop),v.current=t.isLoop)}catch(t){console.error("\u8b80\u53d6\u64ad\u653e\u5668\u8a2d\u5b9a\u5931\u6557",t)}},[]),(0,r.useEffect)(()=>{const e={volume:h,isMuted:p,isLoop:g};localStorage.setItem("accounting_player_settings",JSON.stringify(e)),v.current=g},[h,p,g]),(0,r.useEffect)(()=>{if(!window.YT){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},[]),(0,r.useEffect)(()=>{if(t&&window.YT&&window.YT.Player){if(i)return void i.loadVideoById(t);const e=new window.YT.Player("youtube-player",{height:"0",width:"0",videoId:t,playerVars:{autoplay:0,controls:0,rel:0,playsinline:1},events:{onReady:e=>{d(!0),p?e.target.mute():e.target.unMute(),e.target.setVolume(h)},onStateChange:e=>{o(e.data===window.YT.PlayerState.PLAYING),0===e.data&&v.current&&e.target.playVideo()}}});a(e)}else if(t){const e=setInterval(()=>{window.YT&&window.YT.Player&&(clearInterval(e),a(null))},500);return()=>clearInterval(e)}},[t]);return t?(0,gh.jsxs)("div",{className:"fixed bottom-4 left-4 z-40 transition-all duration-300 shadow-xl rounded-lg border overflow-hidden\n      ".concat(n?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800","\n      ").concat(l?"w-10 h-10 rounded-full":"w-64 p-3","\n    "),children:[(0,gh.jsx)("div",{id:"youtube-player",className:"hidden"}),l?(0,gh.jsx)("button",{onClick:()=>c(!1),className:"w-full h-full flex items-center justify-center hover:bg-gray-200/20 rounded-full",children:(0,gh.jsx)(vh,{size:20,className:s?"animate-pulse text-green-500":"text-gray-400"})}):(0,gh.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,gh.jsxs)("div",{className:"flex justify-between items-center border-b pb-1 border-gray-500/20",children:[(0,gh.jsxs)("span",{className:"text-xs font-bold flex items-center gap-1",children:[(0,gh.jsx)(vh,{size:14})," \u97f3\u6a02\u64ad\u653e\u5668"]}),(0,gh.jsx)("button",{onClick:()=>c(!0),children:(0,gh.jsx)(bh,{size:16})})]}),(0,gh.jsxs)("div",{className:"flex items-center gap-2 justify-center py-1",children:[(0,gh.jsx)("button",{onClick:()=>{i&&u&&(s?i.pauseVideo():i.playVideo())},className:"p-2 rounded-full transition-colors ".concat(s?"bg-red-500 text-white":"bg-green-500 text-white"),title:s?"\u66ab\u505c":"\u64ad\u653e",children:s?(0,gh.jsx)(wh,{size:16}):(0,gh.jsx)(xh,{size:16})}),(0,gh.jsx)("button",{onClick:()=>{i&&u&&(p?i.unMute():i.mute(),m(!p))},className:"p-2 rounded-full transition-colors ".concat(p?"bg-gray-600 text-white":"bg-gray-200 text-gray-700"),title:"\u975c\u97f3/\u53d6\u6d88\u975c\u97f3",children:p?(0,gh.jsx)(kh,{size:16}):(0,gh.jsx)(Sh,{size:16})}),(0,gh.jsx)("button",{onClick:()=>{y(!g)},className:"p-2 rounded-full transition-colors ".concat(g?"bg-blue-500 text-white":"bg-gray-200 text-gray-400"),title:"\u5faa\u74b0\u64ad\u653e",children:(0,gh.jsx)(Eh,{size:16})})]}),(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)(Sh,{size:12,className:"opacity-50"}),(0,gh.jsx)("input",{type:"range",min:"0",max:"100",value:h,onChange:e=>{const t=parseInt(e.target.value);f(t),i&&u&&(i.setVolume(t),t>0&&p&&(i.unMute(),m(!1)))},className:"w-full h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer"})]}),(0,gh.jsxs)("div",{className:"text-[10px] opacity-60 text-center truncate",children:["ID: ",t]})]})]}):null},_h=y("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ch=y("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Th=y("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Ih=y("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Ah=y("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),jh=e=>{let{isOpen:t,onClose:n,theme:i,currentSettings:a,isDarkMode:s,currentUser:o}=e;const[l,u]=(0,r.useState)({appVersion:eh,mapShowMins:60,mapBlinkMins:10,mapLineGapSecs:120,youtubeVideoId:"",geminiApiKey:""});if((0,r.useEffect)(()=>{a&&u(a)},[a]),!t)return null;return(0,gh.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:(0,gh.jsxs)("div",{className:"w-full max-w-lg p-6 rounded-xl shadow-2xl ".concat(i.card," max-h-[90vh] overflow-y-auto"),children:[(0,gh.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-2 border-gray-600",children:[(0,gh.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2 ".concat(i.text),children:[(0,gh.jsx)(k,{size:24})," \u7cfb\u7d71\u5168\u57df\u8a2d\u5b9a"]}),(0,gh.jsx)("button",{onClick:n,className:"p-1 rounded hover:bg-red-500 hover:text-white transition-colors",children:(0,gh.jsx)(_h,{size:24})})]}),(0,gh.jsxs)("div",{className:"space-y-6",children:[(0,gh.jsxs)("div",{className:"p-4 bg-blue-900/20 rounded-lg border border-blue-500/30",children:[(0,gh.jsxs)("h4",{className:"font-bold text-blue-500 mb-2 flex items-center gap-2",children:[(0,gh.jsx)(Ch,{size:16})," \u7248\u672c\u865f\u63a7\u7ba1","Wolf"!==o&&(0,gh.jsxs)("span",{className:"text-xs text-red-400 bg-red-900/20 px-2 py-0.5 rounded ml-2 flex items-center gap-1",children:[(0,gh.jsx)(Th,{size:10})," \u6b0a\u9650\u4e0d\u8db3"]})]}),(0,gh.jsx)("p",{className:"text-xs mb-3 opacity-70 ".concat(i.text),children:"* \u4fee\u6539\u6b64\u865f\u78bc\u8207\u4f7f\u7528\u8005\u7576\u524d\u7248\u672c\u4e0d\u540c\u6642\uff0c\u6703\u8df3\u51fa\u66f4\u65b0\u63d0\u793a\u3002"}),(0,gh.jsxs)("div",{className:"flex items-center gap-3",children:[(0,gh.jsx)("label",{className:"text-sm w-24 font-bold ".concat(i.text),children:"\u96f2\u7aef\u7248\u672c"}),(0,gh.jsx)("input",{type:"text",className:"flex-1 p-2 rounded border ".concat(i.input," ").concat("Wolf"!==o?"opacity-50 cursor-not-allowed":""),value:l.appVersion||"",onChange:e=>u(c(c({},l),{},{appVersion:e.target.value})),disabled:"Wolf"!==o,title:"Wolf"!==o?"\u53ea\u6709 Wolf \u53ef\u4ee5\u4fee\u6539\u6b64\u6b04\u4f4d":""})]}),(0,gh.jsxs)("div",{className:"text-xs text-right mt-1 opacity-50",children:["\u60a8\u7684\u672c\u6a5f\u7248\u672c: ",eh]})]}),(0,gh.jsxs)("div",{className:"p-4 bg-yellow-900/20 rounded-lg border border-yellow-500/30",children:[(0,gh.jsxs)("h4",{className:"font-bold text-yellow-500 mb-2 flex items-center gap-2",children:[(0,gh.jsx)(Ih,{size:16})," AI \u8a2d\u5b9a (Gemini)"]}),(0,gh.jsx)("p",{className:"text-xs mb-3 opacity-70 ".concat(i.text),children:"* \u586b\u5165 Google Gemini API Key \u4ee5\u555f\u7528\u667a\u6167\u554f\u7b54\u529f\u80fd\u3002"}),(0,gh.jsx)("div",{className:"flex flex-col gap-2",children:(0,gh.jsx)("input",{type:"password",placeholder:"API Key (\u4f8b\u5982: AIzaSy...)",className:"w-full p-2 rounded border ".concat(i.input),value:l.geminiApiKey||"",onChange:e=>u(c(c({},l),{},{geminiApiKey:e.target.value}))})})]}),(0,gh.jsxs)("div",{className:"p-4 bg-purple-900/20 rounded-lg border border-purple-500/30",children:[(0,gh.jsxs)("h4",{className:"font-bold text-purple-500 mb-4 flex items-center gap-2",children:[(0,gh.jsx)(Ah,{size:16})," Boss \u5730\u5716\u53c3\u6578"]}),(0,gh.jsxs)("div",{className:"space-y-4",children:[(0,gh.jsxs)("div",{className:"flex items-center gap-3",children:[(0,gh.jsx)("label",{className:"text-sm w-32 ".concat(i.text),children:"\u986f\u793a\u7bc4\u570d (\u5206)"}),(0,gh.jsx)("input",{type:"number",className:"w-24 p-2 rounded border ".concat(i.input),value:l.mapShowMins||60,onChange:e=>u(c(c({},l),{},{mapShowMins:Number(e.target.value)}))}),(0,gh.jsx)("span",{className:"text-xs opacity-50",children:"\u91cd\u751f\u524d N \u5206\u9418\u986f\u793a"})]}),(0,gh.jsxs)("div",{className:"flex items-center gap-3",children:[(0,gh.jsx)("label",{className:"text-sm w-32 ".concat(i.text),children:"\u9583\u720d\u63d0\u793a (\u5206)"}),(0,gh.jsx)("input",{type:"number",className:"w-24 p-2 rounded border ".concat(i.input),value:l.mapBlinkMins||10,onChange:e=>u(c(c({},l),{},{mapBlinkMins:Number(e.target.value)}))}),(0,gh.jsx)("span",{className:"text-xs opacity-50",children:"\u91cd\u751f\u524d N \u5206\u9418\u958b\u59cb\u9583\u720d"})]}),(0,gh.jsxs)("div",{className:"flex items-center gap-3",children:[(0,gh.jsx)("label",{className:"text-sm w-32 ".concat(i.text),children:"\u9023\u7dda\u7fa4\u7d44 (\u79d2)"}),(0,gh.jsx)("input",{type:"number",className:"w-24 p-2 rounded border ".concat(i.input),value:l.mapLineGapSecs||120,onChange:e=>u(c(c({},l),{},{mapLineGapSecs:Number(e.target.value)}))}),(0,gh.jsx)("span",{className:"text-xs opacity-50",children:"\u9593\u9694 N \u79d2\u5167\u8996\u70ba\u540c\u4e00\u7d44"})]})]})]}),(0,gh.jsxs)("div",{className:"p-4 bg-green-900/20 rounded-lg border border-green-500/30",children:[(0,gh.jsxs)("h4",{className:"font-bold text-green-500 mb-4 flex items-center gap-2",children:[(0,gh.jsx)(vh,{size:16})," \u80cc\u666f\u97f3\u6a02\u8a2d\u5b9a"]}),(0,gh.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,gh.jsx)("label",{className:"text-sm ".concat(i.text),children:"YouTube \u7db2\u5740\u6216 ID"}),(0,gh.jsx)("input",{type:"text",placeholder:"\u4f8b\u5982: dQw4w9WgXcQ",className:"w-full p-2 rounded border ".concat(i.input),value:l.youtubeVideoId||"",onChange:e=>u(c(c({},l),{},{youtubeVideoId:e.target.value}))}),(0,gh.jsx)("span",{className:"text-xs opacity-50",children:"* \u66f4\u65b0\u5f8c\uff0c\u6240\u6709\u5728\u7dda\u6210\u54e1\u7684\u64ad\u653e\u5668\u6703\u540c\u6b65\u8f09\u5165\u6b64\u5f71\u7247\u3002"})]})]})]}),(0,gh.jsxs)("div",{className:"mt-8 flex justify-end gap-3",children:[(0,gh.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"\u53d6\u6d88"}),(0,gh.jsxs)("button",{onClick:async()=>{if(Qd)try{const e=c(c({},l),{},{youtubeVideoId:mh(l.youtubeVideoId)});await Ad(xu(Qd,"system_data","global_settings"),e,{merge:!0}),oh(o,"\u4fee\u6539\u7cfb\u7d71\u8a2d\u5b9a","\u7248\u672c:".concat(e.appVersion,", \u97f3\u6a02:").concat(e.youtubeVideoId)),alert("\u8a2d\u5b9a\u5df2\u5132\u5b58\uff01"),n()}catch(e){console.error(e),alert("\u5132\u5b58\u5931\u6557")}},className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-bold flex items-center gap-2",children:[(0,gh.jsx)(Wd,{size:18})," \u5132\u5b58\u8a2d\u5b9a"]})]})]})})},Dh=e=>{let{isOpen:t,onSelectUser:n,theme:i}=e;const[a,s]=(0,r.useState)("SELECT"),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)("");if(!t)return null;const f=()=>{c===nh[o]?(n(o),oh(o,"\u7d81\u5b9a\u8a2d\u5099","\u767b\u5165\u6210\u529f (\u65b0\u8a2d\u5099\u7d81\u5b9a)")):(h("\u5bc6\u78bc\u932f\u8aa4"),oh(o,"\u767b\u5165\u5931\u6557","\u5bc6\u78bc\u932f\u8aa4\u5617\u8a66"))};return(0,gh.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md p-4",children:(0,gh.jsxs)("div",{className:"w-full max-w-md p-6 rounded-2xl shadow-2xl ".concat(i.card," text-center"),children:["SELECT"===a?(0,gh.jsxs)(gh.Fragment,{children:[(0,gh.jsx)(S,{size:64,className:"mx-auto mb-4 text-blue-500"}),(0,gh.jsx)("h2",{className:"text-2xl font-bold mb-2 ".concat(i.text),children:"\u6b61\u8fce\uff01\u8acb\u554f\u60a8\u662f\u54ea\u4f4d\u6210\u54e1\uff1f"}),(0,gh.jsx)("p",{className:"text-sm mb-6 ".concat(i.subText),children:"\u8acb\u9078\u64c7\u60a8\u7684\u8eab\u4efd\u4ee5\u7d81\u5b9a\u6b64\u8a2d\u5099\u3002"}),(0,gh.jsx)("div",{className:"grid grid-cols-3 gap-3",children:th.map(e=>(0,gh.jsx)("button",{onClick:()=>(e=>{nh[e]?(l(e),s("PASSWORD"),h(""),u("")):alert("\u5c1a\u672a\u63d0\u4f9b\u5bc6\u78bc\uff0c\u8acb\u79c1\u8a0a Wolf \u7372\u53d6\u4e00\u7d44\u56db\u4f4d\u6578\u5bc6\u78bc\u3002")})(e),className:"p-3 rounded-xl bg-blue-600 hover:bg-blue-500 text-white font-bold transition-transform hover:scale-105 active:scale-95",children:e},e))})]}):(0,gh.jsxs)(gh.Fragment,{children:[(0,gh.jsx)(Th,{size:64,className:"mx-auto mb-4 text-yellow-500"}),(0,gh.jsx)("h2",{className:"text-2xl font-bold mb-2 ".concat(i.text),children:"\u8acb\u8f38\u5165\u5bc6\u78bc"}),(0,gh.jsxs)("p",{className:"text-sm mb-4 ".concat(i.subText),children:["\u6b63\u5728\u9a57\u8b49\u8eab\u4efd\uff1a",(0,gh.jsx)("span",{className:"font-bold text-blue-500",children:o})]}),(0,gh.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,gh.jsx)("input",{type:"password",maxLength:"4",placeholder:"4\u4f4d\u6578\u5bc6\u78bc",className:"w-full p-3 rounded-lg text-center text-xl tracking-widest border-2 outline-none ".concat(d?"border-red-500":"border-gray-300"),value:c,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key&&f()}),d&&(0,gh.jsx)("p",{className:"text-red-500 text-sm font-bold animate-pulse",children:d}),(0,gh.jsxs)("div",{className:"flex gap-2",children:[(0,gh.jsx)("button",{onClick:()=>{s("SELECT"),l(null),u(""),h("")},className:"flex-1 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"\u8fd4\u56de"}),(0,gh.jsx)("button",{onClick:f,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold",children:"\u78ba\u8a8d"})]})]})]}),(0,gh.jsx)("div",{className:"mt-6 text-xs ".concat(i.subText),children:"* \u7d81\u5b9a\u5f8c\uff0c\u4e0b\u6b21\u958b\u555f\u7db2\u9801\u7121\u9700\u518d\u6b21\u767b\u5165\u3002"})]})})},Mh=e=>{let{show:t,remoteVersion:n,onRefresh:r}=e;return t?(0,gh.jsx)("div",{className:"fixed bottom-6 right-6 z-[100] animate-[bounceIn_0.5s_ease-out]",children:(0,gh.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-5 rounded-2xl shadow-2xl border-2 border-white/20 max-w-sm",children:(0,gh.jsxs)("div",{className:"flex items-start gap-4",children:[(0,gh.jsx)("div",{className:"bg-white/20 p-2 rounded-full animate-pulse",children:(0,gh.jsx)(Ch,{size:24,className:"text-white"})}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("h3",{className:"font-bold text-lg mb-1",children:"\ud83d\ude80 \u767c\u73fe\u65b0\u7248\u672c\uff01"}),(0,gh.jsxs)("p",{className:"text-sm opacity-90 mb-3 leading-relaxed",children:["\u70ba\u4e86\u78ba\u4fdd\u529f\u80fd\u6b63\u5e38\u8207\u8cc7\u6599\u540c\u6b65\uff0c\u8acb\u7acb\u5373\u66f4\u65b0\u7db2\u9801\u3002",(0,gh.jsx)("br",{}),(0,gh.jsxs)("span",{className:"text-xs opacity-70 font-mono mt-1 block",children:["Local: ",eh," ",(0,gh.jsx)("br",{})," New: ",n]})]}),(0,gh.jsx)("button",{onClick:r,className:"w-full bg-white text-blue-700 font-bold py-2 rounded-lg hover:bg-blue-50 transition-colors shadow-md active:scale-95",children:"\u7acb\u5373\u91cd\u65b0\u6574\u7406"})]})]})})}):null},Ph=y("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Lh=e=>{let{message:t,isVisible:n}=e;return(0,gh.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[70] transition-all duration-300 pointer-events-none\n      ".concat(n?"translate-y-0 opacity-100":"-translate-y-10 opacity-0"),children:(0,gh.jsxs)("div",{className:"bg-green-600 text-white px-6 py-2 rounded-full shadow-lg font-bold flex items-center gap-2",children:[(0,gh.jsx)(Ph,{size:18}),t]})})},Oh=y("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Rh=e=>{let{isOpen:t,onClose:n,currentTheme:i,onSave:a}=e;const s={bgType:"solid",bgColor1:"#0f172a",bgColor2:"#1e293b",bgDirection:135,bgPosition:50,primaryType:"solid",primaryColor1:"#2563eb",primaryColor2:"#4f46e5",primaryDirection:90,textColor:"#ffffff",cardBgColor:"#1f2937",cardItemBg:"#374151",cardItemText:"#ffffff"},[o,l]=(0,r.useState)(i||s);if((0,r.useEffect)(()=>{i&&l(i)},[i]),!t)return null;const u=(e,t)=>{l(n=>c(c({},n),{},{[e]:t}))};return(0,gh.jsx)("div",{className:"fixed inset-0 z-[110] flex items-center justify-end pointer-events-none",children:(0,gh.jsxs)("div",{className:"h-full w-80 bg-white dark:bg-gray-900 shadow-2xl pointer-events-auto overflow-y-auto border-l border-gray-200 dark:border-gray-700 flex flex-col",children:[(0,gh.jsxs)("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800",children:[(0,gh.jsxs)("h3",{className:"font-bold flex items-center gap-2 dark:text-white",children:[(0,gh.jsx)(x,{size:18,className:"text-purple-500"})," \u5916\u89c0\u4e3b\u984c\u8a2d\u5b9a"]}),(0,gh.jsx)("button",{onClick:n,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 dark:text-gray-400",children:(0,gh.jsx)(_h,{size:20})})]}),(0,gh.jsxs)("div",{className:"p-4 space-y-6 flex-1",children:[(0,gh.jsxs)("div",{className:"space-y-3",children:[(0,gh.jsx)("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"\u5168\u7ad9\u80cc\u666f (Background)"}),(0,gh.jsxs)("div",{className:"flex gap-2 text-sm bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[(0,gh.jsx)("button",{onClick:()=>u("bgType","solid"),className:"flex-1 py-1 rounded ".concat("solid"===o.bgType?"bg-white shadow text-blue-600 font-bold":"text-gray-500"),children:"\u55ae\u8272"}),(0,gh.jsx)("button",{onClick:()=>u("bgType","gradient"),className:"flex-1 py-1 rounded ".concat("gradient"===o.bgType?"bg-white shadow text-blue-600 font-bold":"text-gray-500"),children:"\u6f38\u5c64"})]}),(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("input",{type:"color",value:o.bgColor1,onChange:e=>u("bgColor1",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"}),(0,gh.jsx)("span",{className:"text-xs text-gray-500",children:"\u4e3b\u8272"})]}),"gradient"===o.bgType&&(0,gh.jsxs)("div",{className:"space-y-2 pl-2 border-l-2 border-purple-500/30",children:[(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("input",{type:"color",value:o.bgColor2,onChange:e=>u("bgColor2",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"}),(0,gh.jsx)("span",{className:"text-xs text-gray-500",children:"\u6f38\u5c64\u8272"})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsxs)("label",{className:"text-xs text-gray-500 flex justify-between",children:["\u65b9\u5411: ",o.bgDirection,"\xb0"]}),(0,gh.jsx)("input",{type:"range",min:"0",max:"360",value:o.bgDirection,onChange:e=>u("bgDirection",e.target.value),className:"w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsxs)("label",{className:"text-xs text-gray-500 flex justify-between",children:["\u6f38\u5c64\u91cf: ",o.bgPosition,"%"]}),(0,gh.jsx)("input",{type:"range",min:"0",max:"100",value:o.bgPosition,onChange:e=>u("bgPosition",e.target.value),className:"w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]})]}),(0,gh.jsx)("hr",{className:"dark:border-gray-700"}),(0,gh.jsxs)("div",{className:"space-y-3",children:[(0,gh.jsx)("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"\u6309\u9215\u8207\u5f37\u8abf\u8272 (Buttons)"}),(0,gh.jsxs)("div",{className:"flex gap-2 text-sm bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[(0,gh.jsx)("button",{onClick:()=>u("primaryType","solid"),className:"flex-1 py-1 rounded ".concat("solid"===o.primaryType?"bg-white shadow text-blue-600 font-bold":"text-gray-500"),children:"\u55ae\u8272"}),(0,gh.jsx)("button",{onClick:()=>u("primaryType","gradient"),className:"flex-1 py-1 rounded ".concat("gradient"===o.primaryType?"bg-white shadow text-blue-600 font-bold":"text-gray-500"),children:"\u6f38\u5c64"})]}),(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("input",{type:"color",value:o.primaryColor1,onChange:e=>u("primaryColor1",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"}),(0,gh.jsx)("span",{className:"text-xs text-gray-500",children:"\u4e3b\u8272"})]}),"gradient"===o.primaryType&&(0,gh.jsxs)("div",{className:"space-y-2 pl-2 border-l-2 border-blue-500/30",children:[(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("input",{type:"color",value:o.primaryColor2,onChange:e=>u("primaryColor2",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"}),(0,gh.jsx)("span",{className:"text-xs text-gray-500",children:"\u6f38\u5c64\u8272"})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsxs)("label",{className:"text-xs text-gray-500 flex justify-between",children:["\u65b9\u5411: ",o.primaryDirection,"\xb0"]}),(0,gh.jsx)("input",{type:"range",min:"0",max:"360",value:o.primaryDirection,onChange:e=>u("primaryDirection",e.target.value),className:"w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]})]})]}),(0,gh.jsx)("hr",{className:"dark:border-gray-700"}),(0,gh.jsxs)("div",{className:"space-y-3",children:[(0,gh.jsx)("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"\u5361\u7247\u8207\u5217\u8868 (Cards)"}),(0,gh.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gh.jsx)("span",{className:"text-sm dark:text-gray-300",children:"\u9805\u76ee\u80cc\u666f\u8272"}),(0,gh.jsx)("input",{type:"color",value:o.cardItemBg||"#374151",onChange:e=>u("cardItemBg",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"})]}),(0,gh.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gh.jsx)("span",{className:"text-sm dark:text-gray-300",children:"\u9805\u76ee\u6587\u5b57\u8272"}),(0,gh.jsx)("input",{type:"color",value:o.cardItemText||"#ffffff",onChange:e=>u("cardItemText",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"})]})]}),(0,gh.jsx)("hr",{className:"dark:border-gray-700"}),(0,gh.jsxs)("div",{className:"space-y-3",children:[(0,gh.jsx)("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"\u5176\u4ed6 (Global)"}),(0,gh.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gh.jsx)("span",{className:"text-sm dark:text-gray-300",children:"\u5168\u7ad9\u6587\u5b57\u984f\u8272"}),(0,gh.jsx)("input",{type:"color",value:o.textColor,onChange:e=>u("textColor",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"})]}),(0,gh.jsxs)("div",{className:"flex items-center justify-between",children:[(0,gh.jsx)("span",{className:"text-sm dark:text-gray-300",children:"\u4e3b\u8981\u5bb9\u5668\u80cc\u666f"}),(0,gh.jsx)("input",{type:"color",value:o.cardBgColor,onChange:e=>u("cardBgColor",e.target.value),className:"w-8 h-8 rounded cursor-pointer border-0"})]})]})]}),(0,gh.jsxs)("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between gap-2",children:[(0,gh.jsxs)("button",{onClick:()=>{l(s)},className:"px-3 py-2 text-sm text-gray-500 hover:text-red-500 flex items-center gap-1",children:[(0,gh.jsx)(Oh,{size:14})," \u91cd\u7f6e"]}),(0,gh.jsxs)("button",{onClick:()=>a(o),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-bold flex items-center justify-center gap-2",children:[(0,gh.jsx)(Wd,{size:16})," \u5132\u5b58\u4e26\u5957\u7528"]})]})]})})},zh=y("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Fh=y("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Vh=e=>{var t,n,r,i;let{item:a,isHistory:s,theme:o,updateItemValue:l,handleSettleAll:c,handleDelete:u,confirmSettleId:d,setConfirmSettleId:h,confirmDeleteId:f,setConfirmDeleteId:p,currentUser:m}=e;const g=a.listingHistory||[],{perPersonSplit:y,totalListingFee:v}=function(e,t,n){var r;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const s=parseFloat(e)||0,o=parseFloat(i)||0,l=s*((null===(r=rh[t])||void 0===r?void 0:r.tax)||0),c=a.reduce((e,t)=>e+Math.floor(.02*(parseFloat(t)||0)),0),u=Math.floor(s-l-o-c),d=n>0?n:1;let h=Math.floor(u/d);return{afterTaxPrice:u,perPersonSplit:1e4*Math.floor(h/1e4),taxAmount:l,cost:o,totalListingFee:c}}(a.price,a.exchangeType,(null===(t=a.participants)||void 0===t?void 0:t.length)||0,a.cost,g);return(0,gh.jsxs)("div",{className:"rounded-xl shadow-md border-l-4 p-6 relative transition-colors ".concat(s?"border-gray-500 opacity-90":"border-blue-500"),style:{background:"var(--card-bg)",color:"var(--card-text)"},children:[(0,gh.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,gh.jsxs)("div",{className:"flex flex-col gap-1 w-full pr-10",children:[(0,gh.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,gh.jsx)("span",{className:"bg-blue-100 text-blue-800 font-bold px-2 py-1 rounded text-xs",children:a.seller}),(0,gh.jsx)("h3",{className:"text-xl font-bold",children:a.itemName}),(0,gh.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full border bg-green-100 text-green-700 border-green-200",children:(null===(n=rh[a.exchangeType])||void 0===n?void 0:n.label)||"\u672a\u77e5"})]}),s&&(0,gh.jsxs)("div",{className:"text-xs text-gray-400 flex gap-2",children:[(0,gh.jsxs)("span",{children:["\u5efa: ",lh(a.createdAt)]}),(0,gh.jsxs)("span",{children:["\u7d50: ",lh(a.settledAt)]})]})]}),(0,gh.jsx)("div",{className:"absolute top-4 right-4 z-10",children:f===a.id?(0,gh.jsxs)("div",{className:"flex gap-2 bg-red-50 p-1 rounded border border-red-200",children:[(0,gh.jsx)("button",{onClick:()=>u(a.id),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 transition-colors",children:"\u522a\u9664"}),(0,gh.jsx)("button",{onClick:()=>p(null),className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded hover:bg-gray-300 transition-colors",children:"\u53d6\u6d88"})]}):(0,gh.jsx)("button",{onClick:()=>{if(a.seller!==m)return alert("\u6b0a\u9650\u4e0d\u8db3\uff1a\u53ea\u6709\u8ca9\u8ce3\u4eba (".concat(a.seller,") \u53ef\u4ee5\u522a\u9664\u6b64\u9805\u76ee")),void oh(m,"\u6b0a\u9650\u4e0d\u8db3","\u5617\u8a66\u522a\u9664\u975e\u672c\u4eba\u7269\u54c1\uff1a".concat(a.itemName," (\u8ce3\u5bb6: ").concat(a.seller,")"));p(a.id),h(null)},className:"text-gray-400 hover:text-red-500 p-1 rounded hover:bg-gray-100 transition-colors",children:(0,gh.jsx)($d,{size:18})})})]}),(0,gh.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-4 rounded mb-4 bg-black/5",children:[(0,gh.jsxs)("div",{className:"flex flex-col",children:[(0,gh.jsx)("span",{className:"text-xs opacity-70",children:"\u552e\u50f9 (\u542b\u7a05)"}),(0,gh.jsx)("div",{className:"text-lg font-bold",children:s?a.price:(0,gh.jsx)("input",{type:"number",className:"bg-transparent w-full border-b border-gray-400/30 outline-none cursor-not-allowed opacity-80",value:a.price,readOnly:!0,title:"\u8acb\u900f\u904e\u53f3\u5074\u300c\u520a\u767b\u8cbb\u300d\u7684 + \u865f\u4f86\u66f4\u65b0\u552e\u50f9"})}),(0,gh.jsxs)("div",{className:"text-[10px] opacity-60 mt-1",children:["\u7a05: ",(a.price*((null===(r=rh[a.exchangeType])||void 0===r?void 0:r.tax)||0)).toFixed(0)]})]}),(0,gh.jsxs)("div",{className:"flex flex-col",children:[(0,gh.jsxs)("span",{className:"text-xs opacity-70 flex items-center gap-1",children:["\u520a\u767b\u8cbb (2%)",!s&&(0,gh.jsx)("button",{onClick:()=>{const e=prompt("\u8acb\u8f38\u5165\u300c\u91cd\u65b0\u520a\u767b\u300d\u7684\u65b0\u50f9\u683c (\u7cfb\u7d71\u5c07\u81ea\u52d5\u66f4\u65b0\u552e\u50f9\u4e26\u8a08\u7b972%\u520a\u767b\u8cbb):",a.price);if(e){const t=parseFloat(e);if(!isNaN(t)){const e=[...g,t];l(a.id,"listingHistory",e),l(a.id,"price",t)}}},className:"bg-blue-500 text-white rounded-full p-0.5 hover:bg-blue-600 shadow",title:"\u91cd\u65b0\u520a\u767b (\u66f4\u65b0\u552e\u50f9)",children:(0,gh.jsx)(Zd,{size:10})})]}),(0,gh.jsxs)("div",{className:"flex flex-col gap-1 mt-1 max-h-20 overflow-y-auto",children:[g.map((e,t)=>(0,gh.jsxs)("div",{className:"flex items-center justify-between text-xs bg-black/10 p-1 rounded",children:[(0,gh.jsxs)("span",{children:["$",e," ",(0,gh.jsxs)("span",{className:"opacity-60",children:["\u2192 ",Math.floor(.02*e)]})]}),!s&&(0,gh.jsx)("button",{onClick:()=>(e=>{const t=g.filter((t,n)=>n!==e);l(a.id,"listingHistory",t)})(t),className:"text-red-400 hover:text-red-600",children:(0,gh.jsx)(_h,{size:10})})]},t)),0===g.length&&(0,gh.jsx)("span",{className:"opacity-40 text-xs",children:"- \u7121\u7d00\u9304 -"})]}),(0,gh.jsxs)("div",{className:"text-[10px] text-blue-500 mt-1 font-bold",children:["\u7e3d\u8a08: ",v]})]}),(0,gh.jsxs)("div",{className:"flex flex-col",children:[(0,gh.jsx)("span",{className:"text-xs opacity-70",children:"\u984d\u5916\u6210\u672c (\u624b\u52d5)"}),(0,gh.jsx)("div",{className:"flex items-center gap-2",children:s?(0,gh.jsxs)("span",{className:"text-red-400 font-mono",children:["-",a.cost||0]}):(0,gh.jsx)("input",{type:"number",className:"w-full text-right rounded border bg-transparent border-gray-400 text-sm p-1",value:a.cost||0,onChange:e=>l(a.id,"cost",e.target.value)})}),(0,gh.jsxs)("div",{className:"text-xs text-green-500 mt-2 font-bold border-t pt-1 border-gray-300",children:["\u6de8\u5229/\u4eba: ",y.toLocaleString()]})]})]}),(0,gh.jsx)("div",{className:"flex flex-wrap gap-2",children:null===(i=a.participants)||void 0===i?void 0:i.map((e,t)=>(0,gh.jsx)("div",{className:"px-2 py-1 rounded border text-xs flex items-center select-none bg-black/10 opacity-80",children:e.name},t))}),!s&&(0,gh.jsx)("div",{className:"mt-4 flex justify-end",children:d===a.id?(0,gh.jsxs)("div",{className:"flex gap-2 items-center flex-wrap justify-end",children:[(0,gh.jsxs)("span",{className:"text-sm text-red-500",children:["\u5c07 ",(0,gh.jsxs)("b",{children:["$",y]}),"/\u4eba \u52a0\u5165\u9918\u984d\u8868?"]}),(0,gh.jsx)("button",{onClick:()=>c(a,y),className:"bg-red-500 text-white px-3 py-1 rounded text-sm",children:"\u78ba\u8a8d"}),(0,gh.jsx)("button",{onClick:()=>h(null),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm",children:"\u53d6\u6d88"})]}):(0,gh.jsxs)("button",{onClick:()=>{if(a.seller!==m)return alert("\u6b0a\u9650\u4e0d\u8db3\uff1a\u53ea\u6709\u8ca9\u8ce3\u4eba (".concat(a.seller,") \u53ef\u4ee5\u57f7\u884c\u6b64\u64cd\u4f5c")),void oh(m,"\u6b0a\u9650\u4e0d\u8db3","\u5617\u8a66\u51fa\u552e\u975e\u672c\u4eba\u7269\u54c1\uff1a".concat(a.itemName," (\u8ce3\u5bb6: ").concat(a.seller,")"));h(a.id),p(null)},className:"flex items-center gap-2 px-4 py-2 rounded font-bold text-sm bg-blue-600 text-white shadow hover:bg-blue-700",children:[(0,gh.jsx)(Ph,{size:16})," \u5df2\u51fa\u552e"]})})]})},Uh=y("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Bh=e=>{let{isOpen:t,onClose:n,theme:i,isDarkMode:a,currentUser:s}=e;const[o,l]=(0,r.useState)({}),[u,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!t||!Qd)return;const e=Pd(xu(Qd,"settlement_data","main_grid"),e=>{e.exists()?l(e.data().matrix||{}):l({}),d(!1)});return()=>e()},[t]);const h=e=>{const t=[];return Object.keys(e).forEach(n=>{const r=e[n];if(r>0){const[e,i]=n.split("_");t.push("".concat(e.padEnd(4,"\u3000")," \u2794 ").concat(i.padEnd(4,"\u3000")," : $").concat(r.toLocaleString()))}}),t.length>0?t.join("\n"):"(\u7121\u50b5\u52d9)"};if(!t)return null;const f={headerCell:a?"bg-gray-700 text-gray-200 border-gray-600":"bg-gray-100 text-gray-700 border-gray-300",headerCellSticky:a?"bg-gray-800 text-gray-200 border-gray-600":"bg-gray-50 text-gray-700 border-gray-300",totalHeader:a?"bg-blue-900/50 text-blue-200 border-gray-600":"bg-blue-50 text-blue-800 border-gray-300",rowHeader:a?"bg-gray-800 text-gray-200 border-gray-600":"bg-gray-50 text-gray-800 border-gray-300",cell:a?"border-gray-600":"border-gray-300",input:a?"text-gray-100":"text-gray-800",selfCell:a?"bg-black/50":"bg-black/80",rowTotal:a?"bg-blue-900/30 text-blue-400 border-gray-600":"bg-blue-50/30 text-blue-600 border-gray-300",incomeHeader:a?"bg-green-900/50 text-green-200 border-gray-600":"bg-green-100 text-green-800 border-gray-300",incomeLabel:a?"bg-green-900/30 text-green-200 border-gray-600":"bg-green-50/50 text-green-800 border-gray-300",incomeCell:a?"text-green-400 border-gray-600":"text-green-600 border-gray-300",emptyCorner:a?"bg-gray-700 border-gray-600":"bg-gray-200 border-gray-300"};return(0,gh.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-auto",children:(0,gh.jsxs)("div",{className:"w-full max-w-6xl rounded-xl p-6 h-[90vh] flex flex-col ".concat(i.card),children:[(0,gh.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b pb-2 ".concat(a?"border-gray-700":"border-gray-200"),children:[(0,gh.jsxs)("div",{className:"flex items-center gap-4",children:[(0,gh.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2 ".concat(i.text),children:[(0,gh.jsx)(zh,{size:24})," \u6210\u54e1\u9918\u984d\u8868 (Excel \u6a21\u5f0f)"]}),(0,gh.jsxs)("button",{onClick:async()=>{if("\u8a2a\u5ba2"===s)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(!Qd)return;if(!window.confirm("\u78ba\u5b9a\u8981\u57f7\u884c\u300c\u81ea\u52d5\u5283\u5e33\u300d\u55ce\uff1f\n\u9019\u5c07\u6703\u91cd\u65b0\u8a08\u7b97\u4e26\u8986\u84cb\u76ee\u524d\u7684\u8868\u683c\uff0c\u5c07\u6240\u6709\u8907\u96dc\u7684\u50b5\u52d9\u7c21\u5316\u70ba\u6700\u5c11\u7b46\u6578\u3002"))return;const e=h(o),t={};th.forEach(e=>t[e]=0),th.forEach(e=>{th.forEach(n=>{if(e===n)return;const r=parseFloat(o["".concat(e,"_").concat(n)])||0;t[e]-=r,t[n]+=r})});let n=[],r=[];th.forEach(e=>{const i=t[e];i<-1?n.push({name:e,balance:Math.abs(i)}):i>1&&r.push({name:e,balance:i})}),n.sort((e,t)=>t.balance-e.balance),r.sort((e,t)=>t.balance-e.balance);const i={};let a=0,l=0;for(;a<n.length&&l<r.length;){let e=n[a],t=r[l],s=Math.min(e.balance,t.balance);const o="".concat(e.name,"_").concat(t.name);i[o]=(i[o]||0)+s,e.balance-=s,t.balance-=s,e.balance<1&&a++,t.balance<1&&l++}const c=h(i);try{await Ad(xu(Qd,"settlement_data","main_grid"),{matrix:i},{merge:!1});const t="\n\u2696\ufe0f **[\u81ea\u52d5\u5283\u5e33\u5831\u544a]** \u7531 ".concat(s," \u57f7\u884c\n\n**\ud83d\udccb \u5283\u5e33\u524d (\u539f\u59cb\u50b5\u52d9):**\n```text\n").concat(e,"\n```\n\n**\u2728 \u5283\u5e33\u5f8c (\u7c21\u5316\u50b5\u52d9):**\n```text\n").concat(c,"\n```\n");sh(t),oh(s,"\u57f7\u884c\u81ea\u52d5\u5283\u5e33","\u91cd\u7f6e\u4e26\u7c21\u5316\u6240\u6709\u50b5\u52d9"),alert("\u5283\u5e33\u5b8c\u6210\uff01\u8a73\u7d30\u5831\u8868\u5df2\u767c\u9001\u81f3 Discord\u3002")}catch(u){console.error("Auto balance failed",u),alert("\u5283\u5e33\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002")}},className:"flex items-center gap-2 px-3 py-1 text-sm bg-purple-600 text-white rounded shadow transition-colors ".concat("\u8a2a\u5ba2"===s?"opacity-50 cursor-not-allowed":"hover:bg-purple-700"),title:"\u91cd\u65b0\u8a08\u7b97\u4e26\u7c21\u5316\u6240\u6709\u50b5\u52d9",children:[(0,gh.jsx)(Uh,{size:16})," \u81ea\u52d5\u5283\u5e33"]})]}),(0,gh.jsx)("button",{onClick:n,className:"p-1 rounded ".concat(a?"hover:bg-gray-700 text-gray-400":"hover:bg-gray-200 text-gray-500"),children:(0,gh.jsx)(_h,{size:24})})]}),(0,gh.jsx)("div",{className:"flex-1 overflow-auto",children:u?(0,gh.jsx)("div",{className:"p-10 text-center ".concat(i.subText),children:"\u8f09\u5165\u4e2d..."}):(0,gh.jsxs)("table",{className:"w-full border-collapse min-w-[1000px]",children:[(0,gh.jsx)("thead",{children:(0,gh.jsxs)("tr",{children:[(0,gh.jsx)("th",{className:"p-2 border min-w-[100px] sticky top-0 left-0 z-20 font-bold ".concat(f.headerCell),children:"\u4ed8\u6b3e\\\u6536\u6b3e"}),th.map(e=>(0,gh.jsx)("th",{className:"p-2 border min-w-[100px] sticky top-0 z-10 font-bold ".concat(f.headerCellSticky),children:e},e)),(0,gh.jsx)("th",{className:"p-2 border min-w-[100px] sticky top-0 z-10 font-bold ".concat(f.totalHeader),children:"\u7e3d\u8a08\u652f\u51fa"})]})}),(0,gh.jsxs)("tbody",{children:[th.map(e=>{let t=0;return(0,gh.jsxs)("tr",{className:i.card,children:[(0,gh.jsx)("th",{className:"p-2 border sticky left-0 z-10 font-bold ".concat(f.rowHeader),children:e}),th.map(n=>{const r=e===n,i="".concat(e,"_").concat(n),a=o[i]||0;r||(t+=a);const u=e===s||n===s||"Wolf"===s;return(0,gh.jsx)("td",{className:"p-1 border text-center ".concat(f.cell," ").concat(r?f.selfCell:""),children:!r&&(0,gh.jsx)("input",{type:"number",className:"w-full h-full p-1 text-center bg-transparent outline-none font-mono ".concat(f.input," ").concat(a>0?"text-red-500 font-bold":"opacity-60"," ").concat(u&&"\u8a2a\u5ba2"!==s?"":"cursor-not-allowed opacity-30"),value:0===a?"":a,placeholder:"0",readOnly:!u||"\u8a2a\u5ba2"===s,onClick:()=>{"\u8a2a\u5ba2"!==s&&(u||(oh(s,"\u6b0a\u9650\u4e0d\u8db3","\u5617\u8a66\u4fee\u6539\u9918\u984d\u8868\uff1a".concat(e," -> ").concat(n)),alert("\u6b0a\u9650\u4e0d\u8db3\uff1a\u60a8\u53ea\u80fd\u4fee\u6539\u8207\u81ea\u5df1\u6709\u95dc\u7684\u5e33\u52d9\uff08\u60a8\u662f\u4ed8\u6b3e\u4eba\u6216\u6536\u6b3e\u4eba\uff09")))},onChange:e=>{if(!u||"\u8a2a\u5ba2"===s)return;const t=e.target.value;l(e=>c(c({},e),{},{[i]:t}))},onBlur:t=>(async(e,n,r)=>{if("\u8a2a\u5ba2"===s)return;const i="".concat(e,"_").concat(n),a=parseFloat(r)||0;if(e===s||n===s||"Wolf"===s)try{const t=xu(Qd,"settlement_data","main_grid"),r=await Cd(t);let u=0;if(r.exists()){const e=r.data().matrix||{};u=parseFloat(e[i])||0}if(u!==a){const t="\ud83d\udcdd [\u5e33\u52d9\u4fee\u6539] ".concat(e," \u5c0d ").concat(n," \u7684\u6b20\u6b3e\u5df2\u7531 $").concat(u.toLocaleString()," \u4fee\u6539\u70ba $").concat(a.toLocaleString());sh(t),oh(s,"\u4fee\u6539\u9918\u984d\u8868","".concat(e," -> ").concat(n," : ").concat(u," -> ").concat(a))}l(e=>c(c({},e),{},{[i]:a})),await Ad(t,{matrix:c(c({},o),{},{[i]:a})},{merge:!0})}catch(t){console.error("\u66f4\u65b0\u5931\u6557",t),alert("\u66f4\u65b0\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u7db2\u8def\u6216\u6b0a\u9650")}})(e,n,t.target.value)})},n)}),(0,gh.jsx)("td",{className:"p-2 border text-center font-bold ".concat(f.rowTotal),children:t.toLocaleString()})]},e)}),(0,gh.jsxs)("tr",{className:f.incomeLabel,children:[(0,gh.jsx)("td",{className:"p-2 border text-right sticky left-0 z-10 ".concat(f.incomeHeader),children:"\u9810\u5b9a\u6536\u5165"}),th.map(e=>{let t=0;return th.forEach(n=>{n!==e&&(t+=parseFloat(o["".concat(n,"_").concat(e)]||0))}),(0,gh.jsx)("td",{className:"p-2 border text-center ".concat(f.incomeCell),children:t.toLocaleString()},e)}),(0,gh.jsx)("td",{className:"p-2 border ".concat(f.emptyCorner)})]})]})]})}),(0,gh.jsxs)("div",{className:"mt-2 text-xs ".concat(i.subText),children:["* \u8aaa\u660e\uff1a\u8868\u683c\u6578\u5b57\u4ee3\u8868\u300c\u4ed8\u6b3e\u4eba\u300d\u6b20\u300c\u6536\u6b3e\u4eba\u300d\u7684\u91d1\u984d\u3002 ",(0,gh.jsx)("br",{}),"* \ud83d\udd12 \u60a8\u53ea\u80fd\u4fee\u6539\u8207\u81ea\u5df1\u6709\u95dc\u7684\u6b04\u4f4d\uff08\u60a8\u662f\u4ed8\u6b3e\u4eba\u6216\u6536\u6b3e\u4eba\uff09\u3002Wolf \u64c1\u6709\u6240\u6709\u4fee\u6539\u6b0a\u9650\u3002"]})]})})},qh=e=>{let{isDarkMode:t,dbReady:n,currentUser:i}=e;const[a,s]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)({name:"",date:"",dateType:"created"}),[k,S]=(0,r.useState)({seller:i||th[0],itemName:"",price:"",cost:0,exchangeType:"GENERAL",participants:[...th]});(0,r.useEffect)(()=>{i&&S(e=>c(c({},e),{},{seller:i}))},[i]);const[E,N]=(0,r.useState)(th[0]);(0,r.useEffect)(()=>{if(!Qd)return;const e=Pd(ud(wu(Qd,"active_items"),pd("createdAt","desc")),e=>{s(e.docs.map(e=>c(c({},e.data()),{},{id:e.id})))}),t=Pd(ud(wu(Qd,"history_items"),pd("settledAt","desc")),e=>{l(e.docs.map(e=>c(c({},e.data()),{},{id:e.id})))});return()=>{e(),t()}},[n]);const _=async(e,t,n)=>{"\u8a2a\u5ba2"!==i&&Qd&&await jd(xu(Qd,"active_items",e),{[t]:n})},C=async(e,t)=>{if("\u8a2a\u5ba2"===i)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(Qd)try{await function(e,t,n){e=Tn(e,_u);const r=c(c({},Rd),n);return function(e){if(e.maxAttempts<1)throw new Jt($t.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Zt;return e.asyncQueue.enqueueAndForget(async()=>{const i=await su(e);new Jc(e.asyncQueue,i,n,t,r).ju()}),r.promise}(Cu(e),n=>t(new Ud(e,n)),r)}(Qd,async n=>{const r=xu(Qd,"settlement_data","main_grid"),i=await n.get(r);let a={};i.exists()&&(a=i.data().matrix||{});const s=e.seller;e.participants.forEach(e=>{if(e.name!==s){const n="".concat(s,"_").concat(e.name),r=parseFloat(a[n])||0;a[n]=r+t}}),n.set(r,{matrix:a},{merge:!0})}),await Md(wu(Qd,"history_items"),c(c({},e),{},{settledAt:(new Date).toISOString()})),await Dd(xu(Qd,"active_items",e.id)),m(null);const n="\ud83d\udcb0 [\u51fa\u552e\u901a\u77e5] \n**".concat(e.seller,"** \u6210\u529f\u51fa\u552e\u4e86 **").concat(e.itemName,"**\uff01\n\u6bcf\u4eba\u5206\u7d05: **$").concat(t.toLocaleString(),"**\n(\u5df2\u81ea\u52d5\u8a08\u5165\u9918\u984d\u8868)");sh(n),oh(i,"\u51fa\u552e\u7269\u54c1","".concat(e.itemName," (\u5206\u7d05: $").concat(t,")")),alert("\u5df2\u51fa\u552e\uff01\u6bcf\u4eba\u5206\u7d05 $".concat(t," \u5df2\u52a0\u5165\u9918\u984d\u8868\u3002"))}catch(n){console.error("Settle transaction failed: ",n),alert("\u51fa\u552e\u5931\u6557\uff0c\u8acb\u91cd\u8a66")}},T=async e=>{if("\u8a2a\u5ba2"===i)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(Qd)try{const t=xu(Qd,h?"history_items":"active_items",e),n=await Cd(t);if(!n.exists())return void alert("\u627e\u4e0d\u5230\u8a72\u9805\u76ee\uff0c\u53ef\u80fd\u5df2\u88ab\u522a\u9664");const r=n.data();if(r.seller!==i)return alert("\u6b0a\u9650\u4e0d\u8db3\uff1a\u53ea\u6709\u8ca9\u8ce3\u4eba (".concat(r.seller,") \u53ef\u4ee5\u522a\u9664\u6b64\u9805\u76ee")),oh(i,"\u6b0a\u9650\u4e0d\u8db3","\u5617\u8a66\u522a\u9664\u975e\u672c\u4eba\u7269\u54c1\uff1a".concat(r.itemName," (\u8ce3\u5bb6: ").concat(r.seller,")")),void y(null);await Dd(t),oh(i,"\u522a\u9664\u8a18\u5e33\u9805\u76ee","".concat(r.itemName," (").concat(h?"\u6b77\u53f2\u7d00\u9304":"\u9032\u884c\u4e2d",")")),y(null)}catch(of){console.error("Delete failed",of),alert("\u522a\u9664\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}},I={card:t?"bg-gray-800 border-gray-700":"bg-white border-gray-200",text:t?"text-gray-100":"text-gray-800",subText:t?"text-gray-400":"text-gray-500",input:t?"bg-gray-700 border-gray-600 text-white":"bg-gray-50 border-gray-200 text-gray-800",sectionBg:t?"bg-gray-700/30":"bg-gray-50"},A=o.filter(e=>{if(w.name&&!e.itemName.toLowerCase().includes(w.name.toLowerCase()))return!1;if(w.date){const t="created"===w.dateType?e.createdAt:e.settledAt;if(!t||!t.startsWith(w.date))return!1}return!0});return(0,gh.jsxs)("div",{className:"p-4 md:p-6 max-w-7xl mx-auto",children:[(0,gh.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gh.jsx)("h2",{className:"text-xl font-bold border-l-4 pl-3 ".concat(h?"border-gray-500":"border-blue-500"," ").concat(I.text),children:h?"\u6b77\u53f2\u7d00\u9304 (".concat(A.length,")"):"\u9032\u884c\u4e2d\u9805\u76ee (".concat(a.length,")")}),(0,gh.jsxs)("div",{className:"flex gap-2",children:[(0,gh.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-3 py-2 rounded text-white shadow hover:opacity-80 transition-opacity",style:{background:"var(--app-primary)"},children:[(0,gh.jsx)(zh,{size:18})," \u9918\u984d\u8868\u683c"]}),(0,gh.jsxs)("button",{onClick:()=>f(!h),className:"flex items-center gap-2 px-3 py-2 rounded ".concat(h?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"),children:[(0,gh.jsx)(Fh,{size:18})," ",h?"\u8fd4\u56de":"\u6b77\u53f2"]}),!h&&(0,gh.jsxs)("button",{onClick:()=>{"\u8a2a\u5ba2"===i?alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd"):d(!0)},className:"flex items-center gap-2 px-3 py-2 rounded text-white shadow hover:opacity-80 transition-opacity ".concat("\u8a2a\u5ba2"===i?"opacity-50 cursor-not-allowed":""),style:{background:"var(--app-primary)"},children:[(0,gh.jsx)(Zd,{size:18})," \u65b0\u589e\u9805\u76ee"]})]})]}),h&&(0,gh.jsxs)("div",{className:"p-4 rounded mb-6 flex flex-wrap gap-4 items-end shadow-sm transition-colors",style:{background:"var(--app-card-bg)",color:"var(--app-text)"},children:[(0,gh.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,gh.jsx)("label",{className:"text-xs ".concat(I.subText),children:"\u641c\u5c0b\u540d\u7a31"}),(0,gh.jsx)("input",{type:"text",className:"w-full p-2 rounded border ".concat(I.input),value:w.name,onChange:e=>x(c(c({},w),{},{name:e.target.value}))})]}),(0,gh.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,gh.jsx)("label",{className:"text-xs ".concat(I.subText),children:"\u65e5\u671f"}),(0,gh.jsx)("input",{type:"date",className:"w-full p-2 rounded border ".concat(I.input),value:w.date,onChange:e=>x(c(c({},w),{},{date:e.target.value}))})]}),(0,gh.jsx)("button",{onClick:()=>x({name:"",date:"",dateType:"created"}),className:"p-2 bg-gray-200 rounded hover:bg-red-200",children:(0,gh.jsx)(_h,{size:20})})]}),(0,gh.jsxs)("div",{className:"space-y-6",children:[(h?A:a).map(e=>(0,gh.jsx)(Vh,{item:e,isHistory:h,theme:I,updateItemValue:_,handleSettleAll:C,handleDelete:T,confirmSettleId:p,setConfirmSettleId:m,confirmDeleteId:g,setConfirmDeleteId:y,currentUser:i},e.id)),0===(h?A:a).length&&(0,gh.jsx)("div",{className:"text-center py-20 ".concat(I.subText),children:"\u6c92\u6709\u8cc7\u6599"})]}),u&&(0,gh.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,gh.jsxs)("div",{className:"w-full max-w-2xl rounded-xl p-6 ".concat(t?"bg-gray-800 text-white":"bg-white text-gray-800"),children:[(0,gh.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\u5efa\u7acb\u65b0\u8a18\u5e33\u9805\u76ee"}),(0,gh.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"block text-xs mb-1 opacity-70",children:"\u8ca9\u8ce3\u4eba"}),(0,gh.jsx)("select",{className:"w-full p-2 rounded border ".concat(I.input," bg-gray-100 cursor-not-allowed"),value:k.seller,disabled:!0,children:th.map(e=>(0,gh.jsx)("option",{value:e,children:e},e))})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"block text-xs mb-1 opacity-70",children:"\u50f9\u683c"}),(0,gh.jsx)("input",{type:"number",className:"w-full p-2 rounded border ".concat(I.input),value:k.price,onChange:e=>S(c(c({},k),{},{price:e.target.value}))})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"block text-xs mb-1 opacity-70",children:"\u7269\u54c1\u540d\u7a31"}),(0,gh.jsx)("input",{type:"text",className:"w-full p-2 rounded border ".concat(I.input),value:k.itemName,onChange:e=>S(c(c({},k),{},{itemName:e.target.value}))})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"block text-xs mb-1 opacity-70",children:"\u984d\u5916\u6210\u672c (\u624b\u52d5)"}),(0,gh.jsx)("input",{type:"number",className:"w-full p-2 rounded border ".concat(I.input),value:k.cost,onChange:e=>S(c(c({},k),{},{cost:e.target.value}))})]})]}),(0,gh.jsx)("div",{className:"mb-4 flex gap-2",children:Object.keys(rh).map(e=>(0,gh.jsx)("button",{onClick:()=>S(c(c({},k),{},{exchangeType:e})),className:"flex-1 py-1 rounded border ".concat(k.exchangeType===e?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200 opacity-60"),children:rh[e].label},e))}),(0,gh.jsxs)("div",{className:"mb-4 pt-4 border-t border-gray-200",children:[(0,gh.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,gh.jsx)("select",{className:"flex-1 p-2 rounded border ".concat(I.input),value:E,onChange:e=>N(e.target.value),children:th.map(e=>(0,gh.jsx)("option",{value:e,children:e},e))}),(0,gh.jsx)("button",{onClick:()=>{k.participants.includes(E)||S(c(c({},k),{},{participants:[...k.participants,E]}))},className:"bg-green-500 text-white p-2 rounded",children:(0,gh.jsx)(Zd,{})})]}),(0,gh.jsx)("div",{className:"flex flex-wrap gap-2",children:k.participants.map(e=>(0,gh.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded text-sm flex items-center gap-1 text-gray-700",children:[e,(0,gh.jsx)("button",{onClick:()=>{return t=e,void S(c(c({},k),{},{participants:k.participants.filter(e=>e!==t)}));var t},children:(0,gh.jsx)(_h,{size:12})})]},e))})]}),(0,gh.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,gh.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 text-gray-700",children:"\u53d6\u6d88"}),(0,gh.jsx)("button",{onClick:async()=>{if("\u8a2a\u5ba2"===i)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(!Qd)return;if(!k.itemName||!k.price)return void alert("\u8acb\u586b\u5beb\u7269\u54c1\u540d\u7a31\u8207\u50f9\u683c");const e=[...new Set([...k.participants,k.seller])],t=c(c({},k),{},{cost:parseFloat(k.cost)||0,listingHistory:[],participants:e.map(e=>({name:e})),isSold:!1,createdAt:(new Date).toISOString(),settledAt:null});await Md(wu(Qd,"active_items"),t),oh(i,"\u65b0\u589e\u8a18\u5e33\u9805\u76ee","".concat(t.itemName," ($").concat(t.price,")")),S({seller:i||th[0],itemName:"",price:"",cost:0,exchangeType:"GENERAL",participants:[...th]}),d(!1),f(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\u5efa\u7acb\u9805\u76ee"})]})]})}),(0,gh.jsx)(Bh,{isOpen:v,onClose:()=>b(!1),theme:I,isDarkMode:t,currentUser:i})]})},Hh=y("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Gh=y("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Qh=y("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Kh=y("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),Wh=y("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Yh=y("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Xh=y("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),$h=y("skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]),Jh=e=>{let{event:t,theme:n,confirmDeleteId:r,setConfirmDeleteId:i,handleDeleteEvent:a,handleOpenEditEvent:s,handleQuickRefresh:o,currentUser:l}=e;return(0,gh.jsxs)("div",{className:"p-3 mb-2 rounded border-l-4 shadow-sm flex justify-between items-center transition-colors relative group",style:{borderLeftColor:t.color,background:"var(--card-bg)",color:"var(--card-text)"},children:[(0,gh.jsxs)("div",{children:[(0,gh.jsxs)("div",{className:"font-bold text-sm flex items-center gap-2",children:[t.name,t.mapPos&&(0,gh.jsx)(Xh,{size:12,className:"text-blue-500"})]}),(e=>!e||e<=0?null:(0,gh.jsx)("div",{className:"flex -space-x-1 mt-1",children:[...Array(Math.min(e,10))].map((e,t)=>(0,gh.jsx)("img",{src:"/team-accounting/star.png",alt:"star",className:"w-3 h-3 block"},t))}))(t.stars),(0,gh.jsxs)("div",{className:"text-xs opacity-70 flex items-center gap-1 mt-1",children:[(0,gh.jsx)($h,{size:10})," \u4ea1: ",uh(new Date(t.deathTime))]}),(0,gh.jsxs)("div",{className:"text-lg font-mono font-bold text-blue-500 flex items-center gap-1",children:[(0,gh.jsx)(Hh,{size:14})," ",uh(new Date(t.respawnTime))]})]}),(0,gh.jsx)("div",{className:"absolute right-3 top-3 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,gh.jsx)("button",{onClick:e=>{if(e.stopPropagation(),"\u8a2a\u5ba2"===l)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");window.confirm("\u78ba\u5b9a\u8981\u4ee5\u300c\u7576\u524d\u6642\u9593\u300d\u91cd\u7f6e ".concat(t.name," \u7684\u91cd\u751f\u6642\u9593\u55ce\uff1f"))&&o(t)},className:"p-1.5 bg-blue-500 text-white rounded-full shadow hover:bg-blue-600",title:"\u4ee5\u7576\u524d\u6642\u9593\u5237\u65b0\u91cd\u751f (Current Time + CD)",children:(0,gh.jsx)(Wh,{size:14})})})]})},Zh=e=>{let{displayEvents:t,now:n,globalSettings:r}=e;if(!t||0===t.length)return null;const i=(null===r||void 0===r?void 0:r.mapLineGapSecs)||120,a=[...t].sort((e,t)=>new Date(e.respawnTime)-new Date(t.respawnTime)),s=[];if(a.length>0){let e=[a[0]];for(let t=1;t<a.length;t++){const n=e[e.length-1];Math.abs(new Date(a[t].respawnTime)-new Date(n.respawnTime))/1e3<=i?e.push(a[t]):(s.push(e),e=[a[t]])}s.push(e)}if(0===s.length)return null;if((new Date(s[0][0].respawnTime)-n)/1e3/60>10)return null;const o=[];for(let l=0;l<s.length-1;l++){const e=s[l],t=s[l+1];e.forEach(e=>{e.mapPos&&t.forEach(t=>{t.mapPos&&o.push((0,gh.jsx)("line",{x1:"".concat(e.mapPos.x,"%"),y1:"".concat(e.mapPos.y,"%"),x2:"".concat(t.mapPos.x,"%"),y2:"".concat(t.mapPos.y,"%"),stroke:"rgba(255, 255, 255, 0.6)",strokeWidth:"2",strokeDasharray:"5,5",className:"path-flow"},"".concat(e.id,"-").concat(t.id)))})})}return(0,gh.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none z-0",children:[(0,gh.jsx)("style",{children:"\n          .path-flow {\n            animation: dash 1s linear infinite;\n          }\n          @keyframes dash {\n            to {\n              stroke-dashoffset: -10;\n            }\n          }\n        "}),o]})},ef=e=>{let{isOpen:t,onClose:n,bossTemplates:r,handleAddQuickRecord:i,isDarkMode:a,theme:s}=e;return t?(0,gh.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:(0,gh.jsxs)("div",{className:"w-full max-w-5xl h-[85vh] rounded-xl flex flex-col relative shadow-2xl border-2 ".concat(a?"bg-gray-900 border-gray-700":"bg-white border-white"),children:[(0,gh.jsxs)("div",{className:"p-4 border-b flex justify-between items-center ".concat(a?"border-gray-700":"border-gray-200"),children:[(0,gh.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-2 ".concat(s.text),children:[(0,gh.jsx)(Qh,{size:24,className:"text-yellow-500"})," \u5feb\u901f\u6a19\u7c64 (\u9ede\u64ca\u5373\u7d00\u9304)"]}),(0,gh.jsx)("button",{onClick:n,className:"p-2 rounded-full hover:bg-red-500 hover:text-white transition-colors",children:(0,gh.jsx)(_h,{size:24})})]}),(0,gh.jsxs)("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[(0,gh.jsxs)("div",{className:"flex-1 relative overflow-hidden flex items-center justify-center ".concat(a?"bg-gray-800":"bg-gray-100"),children:[(0,gh.jsxs)("div",{className:"relative w-auto h-auto max-w-full max-h-full",style:{aspectRatio:"1152/851"},children:[(0,gh.jsx)("img",{src:ih,alt:"Map",className:"w-full h-full block pointer-events-none opacity-80"}),r.filter(e=>e.mapPos).map((e,t)=>(0,gh.jsx)("div",{onClick:()=>i(e),className:"absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer group hover:scale-110 transition-transform z-10",style:{left:"".concat(e.mapPos.x,"%"),top:"".concat(e.mapPos.y,"%")},title:"\u9ede\u64ca\u7d00\u9304: ".concat(e.name),children:(0,gh.jsxs)("div",{className:"relative",children:[(0,gh.jsx)("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:e.color}}),(0,gh.jsx)("div",{className:"absolute top-5 left-1/2 -translate-x-1/2 text-[10px] px-1.5 py-0.5 rounded whitespace-nowrap font-bold shadow-md\n                        ".concat(a?"bg-black/80 text-white":"bg-white/90 text-gray-800"),children:e.name})]})},e.id))]}),(0,gh.jsx)("div",{className:"absolute bottom-4 left-4 text-xs opacity-50 bg-black/30 px-2 py-1 rounded text-white pointer-events-none",children:"* \u9ede\u64ca\u5730\u5716\u4e0a\u7684\u9ede\u6216\u53f3\u5074\u5217\u8868\u7686\u53ef\u5feb\u901f\u7d00\u9304"})]}),(0,gh.jsx)("div",{className:"w-full lg:w-72 border-l overflow-y-auto ".concat(a?"border-gray-700 bg-gray-900":"border-gray-200 bg-white"),children:(0,gh.jsxs)("div",{className:"p-3",children:[(0,gh.jsx)("h4",{className:"text-sm font-bold mb-3 opacity-70 ".concat(s.text),children:"Boss \u5217\u8868"}),(0,gh.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,gh.jsxs)("button",{onClick:()=>i(e),className:"w-full text-left p-2 rounded flex items-center gap-2 transition-all active:scale-95\n                      ".concat(a?"hover:bg-gray-800 border border-gray-700":"hover:bg-gray-50 border border-gray-100 shadow-sm"),children:[(0,gh.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,gh.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,gh.jsx)("div",{className:"font-bold text-sm truncate ".concat(s.text),children:e.name}),(0,gh.jsxs)("div",{className:"text-xs opacity-60 ".concat(s.text),children:["CD: ",e.respawnMinutes,"m"]})]}),(0,gh.jsx)(Zd,{size:16,className:"opacity-40"})]},e.id))})]})})]})]})}):null},tf=e=>{let{isDarkMode:t,currentUser:n,globalSettings:i}=e;const[a,s]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(new Date),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(null),[k,S]=(0,r.useState)(null),[E,N]=(0,r.useState)(null),[_,C]=(0,r.useState)("LIST"),[T,I]=(0,r.useState)({name:"",respawnMinutes:60,color:"#FF5733",mapPos:null,stars:0}),[A,j]=(0,r.useState)({templateId:"",timeMode:"current",specificDate:"",specificTime:""}),D=(null===i||void 0===i?void 0:i.mapShowMins)||60,M=(null===i||void 0===i?void 0:i.mapBlinkMins)||10,P={text:t?"text-gray-100":"text-gray-800",subText:t?"text-gray-400":"text-gray-500",card:t?"bg-gray-800 border-gray-700":"bg-white border-gray-200",input:t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"};(0,r.useEffect)(()=>{if(!Qd)return;const e=Pd(wu(Qd,"boss_templates"),e=>{s(e.docs.map(e=>c({id:e.id},e.data())))}),t=Pd(ud(wu(Qd,"boss_events"),pd("respawnTime","asc")),e=>{l(e.docs.map(e=>c({id:e.id},e.data())))});return()=>{e(),t()}},[]),(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=new Date;d(e)},1e3);return()=>clearInterval(e)},[o]);const L=e=>{f(e),setTimeout(()=>f(null),2e3)},O=async e=>{if(!Qd)return;const t=a.find(t=>t.id===e.templateId);if(!t)return alert("\u627e\u4e0d\u5230\u539f\u59cb Boss \u8a2d\u5b9a (\u53ef\u80fd\u5df2\u88ab\u522a\u9664)\uff0c\u7121\u6cd5\u8a08\u7b97 CD");const r=new Date,i=new Date(r.getTime()+6e4*t.respawnMinutes);try{await jd(xu(Qd,"boss_events",e.id),{deathTime:r.toISOString(),respawnTime:i.toISOString()}),oh(n,"\u5feb\u901f\u5237\u65b0","".concat(e.name)),L("\ud83d\udd04 \u5df2\u5237\u65b0\uff1a".concat(e.name))}catch(s){console.error(s),alert("\u5237\u65b0\u5931\u6557")}},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");e?(S(e.id),I({name:e.name,respawnMinutes:e.respawnMinutes,color:e.color,mapPos:e.mapPos||null,stars:e.stars||0})):(S(null),I({name:"",respawnMinutes:60,color:ph(),mapPos:null,stars:0})),m(!0)},z=e=>{if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");N(e.id);const t=new Date(e.deathTime),r=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");j({templateId:e.templateId,timeMode:"specific",specificDate:"".concat(r,"-").concat(i,"-").concat(a),specificTime:"".concat(s,":").concat(o,":").concat(l)}),y(!0)},F=async e=>{if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");try{const t=o.find(t=>t.id===e);await Dd(xu(Qd,"boss_events",e)),oh(n,"\u522a\u9664\u6642\u9593\u7d00\u9304",(null===t||void 0===t?void 0:t.name)||"\u672a\u77e5"),x(null)}catch(t){console.error(t)}},V={yesterday:o.filter(e=>"yesterday"===dh(e.respawnTime)),today:o.filter(e=>"today"===dh(e.respawnTime)),tomorrow:o.filter(e=>"tomorrow"===dh(e.respawnTime)),other:o.filter(e=>"other"===dh(e.respawnTime))},U=o.filter(e=>!0).sort((e,t)=>new Date(e.respawnTime)-new Date(t.respawnTime)),B=U.filter(e=>{const t=(new Date(e.respawnTime)-u)/1e3/60;return t<=D&&t>-60}),q=o.filter(e=>new Date(e.respawnTime)>u).sort((e,t)=>new Date(e.respawnTime)-new Date(t.respawnTime))[0];return(0,gh.jsxs)("div",{className:"p-4 h-[calc(100vh-80px)] flex flex-col",children:[(0,gh.jsx)(Lh,{message:h,isVisible:!!h}),(0,gh.jsxs)("div",{className:"mb-6 p-4 rounded-xl shadow-lg flex flex-col md:flex-row items-center justify-between ".concat(t?"bg-indigo-900/50 text-white":"bg-indigo-600 text-white"),children:[(0,gh.jsxs)("div",{className:"flex items-center gap-4",children:[(0,gh.jsx)(Hh,{size:40,className:"opacity-80"}),(0,gh.jsxs)("div",{className:"flex flex-col",children:[(0,gh.jsx)("span",{className:"text-xs opacity-70 font-bold tracking-widest",children:"CURRENT TIME"}),(0,gh.jsx)("span",{className:"text-3xl font-mono font-bold",children:uh(u)})]})]}),q?(0,gh.jsxs)("div",{className:"mt-4 md:mt-0 flex items-center gap-3 bg-white/10 px-4 py-2 rounded-lg backdrop-blur-sm border border-white/20",children:[(0,gh.jsx)("span",{className:"text-xs font-bold opacity-70",children:"NEXT BOSS"}),(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("div",{className:"w-3 h-3 rounded-full shadow-[0_0_8px_rgba(255,255,255,0.8)]",style:{backgroundColor:q.color}}),(0,gh.jsx)("span",{className:"text-xl font-bold",children:q.name}),(0,gh.jsx)("span",{className:"font-mono text-lg ml-2",children:ch(q.respawnTime)})]})]}):(0,gh.jsx)("div",{className:"mt-4 md:mt-0 text-white/50 text-sm italic",children:"\u76ee\u524d\u6c92\u6709\u7b49\u5f85\u4e2d\u7684 Boss"})]}),(0,gh.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,gh.jsxs)("button",{onClick:()=>R(),className:"flex items-center gap-2 text-white px-4 py-2 rounded shadow transition-opacity ".concat("\u8a2a\u5ba2"===n?"opacity-50 cursor-not-allowed":"hover:opacity-80"),style:{background:"var(--app-primary)"},children:[(0,gh.jsx)(Zd,{size:18})," \u5efa\u7acb Boss"]}),(0,gh.jsxs)("button",{onClick:()=>{var e;if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");j({templateId:(null===(e=a[0])||void 0===e?void 0:e.id)||"",timeMode:"current",specificDate:hh(),specificTime:fh(),mapPos:null}),y(!0)},className:"flex items-center gap-2 text-white px-4 py-2 rounded shadow transition-opacity ".concat("\u8a2a\u5ba2"===n?"opacity-50 cursor-not-allowed":"hover:opacity-80"),style:{background:"var(--app-primary)"},children:[(0,gh.jsx)(Gh,{size:18})," \u65b0\u589e\u7d00\u9304"]}),(0,gh.jsxs)("button",{onClick:()=>"\u8a2a\u5ba2"===n?alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd"):b(!0),className:"flex items-center gap-2 bg-yellow-500 text-white px-4 py-2 rounded shadow ".concat("\u8a2a\u5ba2"===n?"opacity-50 cursor-not-allowed":"hover:bg-yellow-400"),children:[(0,gh.jsx)(Qh,{size:18})," \u5feb\u901f\u6a19\u7c64"]}),(0,gh.jsxs)("div",{className:"ml-auto bg-gray-200 rounded-lg p-1 flex",children:[(0,gh.jsxs)("button",{onClick:async()=>{if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(!Qd)return;if(!window.confirm("\u9019\u5c07\u6703\u6839\u64da\u76ee\u524d\u7684 Boss \u8a2d\u5b9a\uff0c\u66f4\u65b0\u6240\u6709\u9032\u884c\u4e2d\u8a08\u6642\u7684\u5730\u5716\u4f4d\u7f6e\u3002\n\u78ba\u5b9a\u8981\u57f7\u884c\u55ce\uff1f"))return;const e=(Cu(t=Tn(t=Qd,_u)),new zd(t,e=>Ld(t,e)));var t;let r=0;if(o.forEach(t=>{const n=a.find(e=>e.id===t.templateId);if(n&&n.mapPos&&(!t.mapPos||t.mapPos.x!==n.mapPos.x||t.mapPos.y!==n.mapPos.y)){const i=xu(Qd,"boss_events",t.id);e.update(i,{mapPos:n.mapPos}),r++}}),r>0)try{await e.commit(),oh(n,"\u540c\u6b65\u4f4d\u7f6e","\u66f4\u65b0\u4e86 ".concat(r," \u7b46\u8a08\u6642")),alert("\u5df2\u66f4\u65b0 ".concat(r," \u7b46\u8a08\u6642\u7684\u5730\u5716\u4f4d\u7f6e\uff01"))}catch(t){console.error("Batch update failed",t),alert("\u66f4\u65b0\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}else alert("\u76ee\u524d\u6240\u6709\u8a08\u6642\u7684\u4f4d\u7f6e\u7686\u70ba\u6700\u65b0\u3002")},className:"px-3 py-1 rounded flex items-center gap-1 text-sm border-r border-gray-300 text-gray-500 hover:text-blue-500 hover:bg-gray-100",children:[(0,gh.jsx)(Ch,{size:14})," \u540c\u6b65\u4f4d\u7f6e"]}),(0,gh.jsxs)("button",{onClick:()=>C("LIST"),className:"px-3 py-1 rounded flex items-center gap-1 text-sm ".concat("LIST"===_?"bg-white shadow text-blue-600":"text-gray-500"),children:[(0,gh.jsx)(Kh,{size:14})," \u5217\u8868"]}),(0,gh.jsxs)("button",{onClick:()=>C("MAP"),className:"px-3 py-1 rounded flex items-center gap-1 text-sm ".concat("MAP"===_?"bg-white shadow text-blue-600":"text-gray-500"),children:[(0,gh.jsx)(Ah,{size:14})," \u5730\u5716"]})]})]}),(0,gh.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 h-full overflow-hidden",children:["LIST"===_?(0,gh.jsx)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 h-full overflow-y-auto pb-20",children:["yesterday","today","tomorrow","other"].map(e=>(0,gh.jsxs)("div",{className:"rounded-xl p-4 flex flex-col border border-white/10 transition-colors",style:{background:"var(--app-card-bg)",color:"var(--app-text)"},children:[(0,gh.jsx)("h3",{className:"font-bold mb-3 capitalize text-center py-2 border-b ".concat(P.text),children:"yesterday"===e?"\u6628\u5929":"today"===e?"\u4eca\u5929":"tomorrow"===e?"\u660e\u5929":"\u5176\u4ed6"}),(0,gh.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:V[e].length>0?V[e].map(e=>(0,gh.jsx)(Jh,{event:e,theme:P,confirmDeleteId:w,setConfirmDeleteId:x,handleDeleteEvent:F,handleOpenEditEvent:z,handleQuickRefresh:O,currentUser:n},e.id)):(0,gh.jsx)("div",{className:"text-center text-sm opacity-40 py-4",children:"\u7121\u91cd\u751f\u7d00\u9304"})})]},e))}):(0,gh.jsx)("div",{className:"flex-1 relative rounded-xl overflow-hidden shadow-inner flex items-center justify-center ".concat(t?"bg-gray-900":"bg-gray-200"),children:(0,gh.jsxs)("div",{className:"relative w-auto h-auto max-w-full max-h-full",style:{aspectRatio:"1152/851"},children:[(0,gh.jsx)("img",{src:ih,alt:"Game Map",className:"w-full h-full block",onError:e=>{const t=e.target.parentElement;t&&(e.target.style.display="none",t.classList.add("flex","items-center","justify-center","text-gray-500","text-xs","bg-gray-300","h-64"),t.innerText="\u8acb\u5c07 map.jpg \u653e\u5165 public \u8cc7\u6599\u593e")}}),(0,gh.jsx)(Zh,{displayEvents:B,now:u,globalSettings:i}),B.filter(e=>e.mapPos).map((e,n)=>{const r=new Date(e.respawnTime)-u<=60*M*1e3;return(0,gh.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center group cursor-pointer z-10",style:{left:"".concat(e.mapPos.x,"%"),top:"".concat(e.mapPos.y,"%")},onClick:()=>z(e),title:"\u9ede\u64ca\u7de8\u8f2f",children:[(0,gh.jsxs)("div",{className:"relative flex items-center justify-center",children:[r&&(0,gh.jsx)("div",{className:"absolute w-full h-full rounded-full animate-ping opacity-75",style:{backgroundColor:e.color,transform:"scale(1.5)"}}),(0,gh.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-white shadow-md flex items-center justify-center relative z-10",style:{backgroundColor:e.color},children:(0,gh.jsx)("span",{className:"text-white text-[10px] font-bold pointer-events-none",children:n+1})})]}),(0,gh.jsx)("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 text-[10px] px-1.5 py-0.5 rounded whitespace-nowrap font-bold shadow-md z-20 pointer-events-none\n                        ".concat(t?"bg-black/80 text-white":"bg-white/90 text-gray-800"),children:e.name}),(0,gh.jsxs)("div",{className:"absolute top-12 bg-black/90 text-white text-[10px] px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity z-30 pointer-events-none border border-white/20",children:[n+1,". ",e.name," (",uh(new Date(e.respawnTime)),")"]})]},e.id)})]})}),(0,gh.jsxs)("div",{className:"w-full lg:w-80 rounded-xl p-4 flex flex-col shadow border border-white/10 transition-colors",style:{background:"var(--app-card-bg)",color:"var(--app-text)"},children:[(0,gh.jsxs)("h3",{className:"font-bold mb-3 flex items-center gap-2 ".concat(P.text),children:[(0,gh.jsx)(Kh,{size:20})," \u91cd\u751f\u9806\u5e8f\u5217\u8868"]}),(0,gh.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:U.length>0?U.map(e=>(0,gh.jsxs)("div",{className:"flex items-center p-2 mb-1 rounded relative transition-colors border-b border-white/5",style:{background:"var(--card-bg)",color:"var(--card-text)"},children:[(0,gh.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0 mr-2",children:[(0,gh.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,gh.jsx)("span",{className:"text-sm truncate ".concat(P.text),title:e.name,children:e.name})]}),(0,gh.jsx)("div",{className:"w-28 mr-2 text-right font-mono font-bold ".concat(new Date(e.respawnTime)-u<=60*M*1e3?"text-red-500 animate-pulse":"text-blue-500"),children:uh(new Date(e.respawnTime))}),(0,gh.jsxs)("div",{className:"flex gap-1",children:[(0,gh.jsx)("button",{onClick:()=>z(e),className:"text-gray-400 p-1 rounded ".concat("\u8a2a\u5ba2"===n?"opacity-30":"hover:text-blue-500"),title:"\u7de8\u8f2f",children:(0,gh.jsx)(Yd,{size:14})}),w===e.id?(0,gh.jsx)("button",{onClick:()=>F(e.id),className:"bg-red-500 text-white text-[10px] px-2 py-0.5 rounded animate-bounce",children:"\u78ba\u8a8d"}):(0,gh.jsx)("button",{onClick:()=>"\u8a2a\u5ba2"===n?alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd"):x(e.id),className:"text-gray-400 p-1 rounded ".concat("\u8a2a\u5ba2"===n?"opacity-30":"hover:text-red-500"),title:"\u522a\u9664",children:(0,gh.jsx)($d,{size:14})})]})]},"list"+e.id)):(0,gh.jsx)("div",{className:"text-center opacity-50 py-4",children:"\u76ee\u524d\u6c92\u6709\u7b49\u5f85\u4e2d\u7684 Boss"})}),(0,gh.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,gh.jsx)("h4",{className:"text-xs font-bold mb-2 opacity-70",children:"Boss \u8a2d\u5b9a\u5217\u8868"}),(0,gh.jsx)("div",{className:"flex flex-col gap-2 max-h-40 overflow-y-auto pr-1",children:a.map(e=>(0,gh.jsxs)("div",{className:"text-xs px-2 py-1.5 rounded flex items-center justify-between mb-1",style:{background:"var(--card-bg)",color:"var(--card-text)"},children:[(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,gh.jsxs)("span",{className:P.text,children:[e.name," (",e.respawnMinutes,"m)"]})]}),(0,gh.jsxs)("div",{className:"flex gap-2",children:[(0,gh.jsx)("button",{onClick:()=>R(e),className:"text-blue-500 ".concat("\u8a2a\u5ba2"===n?"opacity-30":"hover:text-blue-600"),children:(0,gh.jsx)(Yd,{size:12})}),(0,gh.jsx)("button",{onClick:()=>(async e=>{if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u9019\u500b Boss \u8a2d\u5b9a\u55ce\uff1f"))try{const t=a.find(t=>t.id===e);await Dd(xu(Qd,"boss_templates",e)),oh(n,"\u522a\u9664Boss\u8a2d\u5b9a",(null===t||void 0===t?void 0:t.name)||"\u672a\u77e5")}catch(t){console.error(t)}})(e.id),className:"text-gray-400 ".concat("\u8a2a\u5ba2"===n?"opacity-30":"hover:text-red-500"),children:(0,gh.jsx)(_h,{size:12})})]})]},e.id))})]})]})]}),p&&(0,gh.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,gh.jsxs)("div",{className:"w-full max-w-lg rounded-xl p-6 ".concat(t?"bg-gray-800 text-white":"bg-white text-gray-800"),children:[(0,gh.jsx)("h3",{className:"text-lg font-bold mb-4",children:k?"\u7de8\u8f2f Boss \u8a2d\u5b9a":"\u5efa\u7acb Boss \u8a2d\u5b9a"}),(0,gh.jsxs)("div",{className:"space-y-4",children:[(0,gh.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"Boss \u540d\u7a31"}),(0,gh.jsx)("input",{type:"text",className:"w-full p-2 rounded border ".concat(P.input),value:T.name,onChange:e=>I(c(c({},T),{},{name:e.target.value}))})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u91cd\u751f\u6642\u9593 (\u5206\u9418)"}),(0,gh.jsx)("input",{type:"number",className:"w-full p-2 rounded border ".concat(P.input),value:T.respawnMinutes,onChange:e=>I(c(c({},T),{},{respawnMinutes:parseInt(e.target.value)||0}))})]})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u6a19\u7c64\u984f\u8272"}),(0,gh.jsxs)("div",{className:"flex gap-2",children:[(0,gh.jsx)("input",{type:"color",className:"flex-1 h-10 rounded cursor-pointer",value:T.color,onChange:e=>I(c(c({},T),{},{color:e.target.value}))}),(0,gh.jsx)("button",{onClick:()=>I(c(c({},T),{},{color:ph()})),className:"bg-gray-200 text-gray-700 px-3 rounded hover:bg-gray-300",title:"\u96a8\u6a5f\u984f\u8272",children:(0,gh.jsx)(Wh,{size:16})})]})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u661f\u7d1a (0-10)"}),(0,gh.jsxs)("div",{className:"flex items-center gap-2",children:[(0,gh.jsx)("input",{type:"number",min:"0",max:"10",className:"w-20 p-2 rounded border ".concat(P.input),value:T.stars,onChange:e=>I(c(c({},T),{},{stars:parseInt(e.target.value)||0}))}),(0,gh.jsx)("div",{className:"flex gap-0.5",children:[...Array(Math.min(T.stars||0,10))].map((e,t)=>(0,gh.jsx)(Yh,{size:12,className:"fill-yellow-500 text-yellow-500"},t))})]})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u91cd\u751f\u4f4d\u7f6e (\u8acb\u76f4\u63a5\u9ede\u64ca\u5730\u5716)"}),(0,gh.jsxs)("div",{className:"relative w-full h-auto bg-gray-200 mt-1 cursor-crosshair rounded overflow-hidden",onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*100,r=(e.clientY-t.top)/t.height*100;I(e=>c(c({},e),{},{mapPos:{x:n,y:r}}))},children:[(0,gh.jsx)("img",{src:ih,alt:"Map",className:"w-full h-auto block pointer-events-none",onError:e=>{const t=e.target.parentElement;t&&(e.target.style.display="none",t.classList.add("flex","items-center","justify-center","text-gray-500","text-xs","bg-gray-300","h-64"),t.innerText="\u8acb\u5c07 map.jpg \u653e\u5165 public \u8cc7\u6599\u593e")}}),T.mapPos&&(0,gh.jsx)("div",{className:"absolute w-4 h-4 bg-red-500 rounded-full border-2 border-white transform -translate-x-1/2 -translate-y-1/2 pointer-events-none shadow",style:{left:"".concat(T.mapPos.x,"%"),top:"".concat(T.mapPos.y,"%")}})]}),(0,gh.jsx)("div",{className:"text-[10px] text-gray-400 mt-1 text-center",children:T.mapPos?"\u5df2\u8a2d\u5b9a\u4f4d\u7f6e: ".concat(T.mapPos.x.toFixed(1),"%, ").concat(T.mapPos.y.toFixed(1),"%"):"\u5c1a\u672a\u8a2d\u5b9a\u4f4d\u7f6e (\u9078\u586b)"})]})]}),(0,gh.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,gh.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"\u53d6\u6d88"}),(0,gh.jsx)("button",{onClick:async()=>"\u8a2a\u5ba2"===n?alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd"):T.name?(k?(await jd(xu(Qd,"boss_templates",k),T),oh(n,"\u4fee\u6539Boss\u8a2d\u5b9a",T.name)):(await Md(wu(Qd,"boss_templates"),T),oh(n,"\u65b0\u589eBoss\u8a2d\u5b9a",T.name)),void m(!1)):alert("\u8acb\u8f38\u5165 Boss \u540d\u7a31"),className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:k?"\u66f4\u65b0":"\u5efa\u7acb"})]})]})}),g&&(0,gh.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,gh.jsxs)("div",{className:"w-full max-w-sm rounded-xl p-6 ".concat(t?"bg-gray-800 text-white":"bg-white text-gray-800"),children:[(0,gh.jsx)("h3",{className:"text-lg font-bold mb-4",children:E?"\u7de8\u8f2f\u6a19\u7c64\u6642\u9593":"\u65b0\u589e Boss \u6a19\u7c64"}),(0,gh.jsxs)("div",{className:"space-y-4",children:[(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u9078\u64c7 Boss"}),(0,gh.jsxs)("select",{className:"w-full p-2 rounded border ".concat(P.input),value:A.templateId,onChange:e=>j(c(c({},A),{},{templateId:e.target.value})),disabled:!!E,children:[(0,gh.jsx)("option",{value:"",disabled:!0,children:"\u8acb\u9078\u64c7..."}),a.map(e=>(0,gh.jsxs)("option",{value:e.id,children:[e.name," (CD: ",e.respawnMinutes,"m)"]},e.id))]})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u6b7b\u4ea1\u6642\u9593\u57fa\u6e96"}),!E&&(0,gh.jsxs)("div",{className:"flex gap-2 mt-1 mb-2",children:[(0,gh.jsx)("button",{onClick:()=>j(c(c({},A),{},{timeMode:"current"})),className:"flex-1 py-2 rounded text-sm border ".concat("current"===A.timeMode?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200 opacity-60"),children:"\u7576\u524d\u6642\u9593"}),(0,gh.jsx)("button",{onClick:()=>j(c(c({},A),{},{timeMode:"specific"})),className:"flex-1 py-2 rounded text-sm border ".concat("specific"===A.timeMode?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200 opacity-60"),children:"\u6307\u5b9a\u6642\u9593"})]})]}),("specific"===A.timeMode||E)&&(0,gh.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u65e5\u671f"}),(0,gh.jsx)("input",{type:"date",className:"w-full p-2 rounded border ".concat(P.input),value:A.specificDate,onChange:e=>j(c(c({},A),{},{specificDate:e.target.value}))})]}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("label",{className:"text-xs opacity-70",children:"\u6642\u9593 (24h)"}),(0,gh.jsx)("input",{type:"time",step:"1",className:"w-full p-2 rounded border ".concat(P.input),value:A.specificTime,onChange:e=>j(c(c({},A),{},{specificTime:e.target.value}))})]})]})]}),(0,gh.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,gh.jsx)("button",{onClick:()=>{y(!1),N(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"\u53d6\u6d88"}),(0,gh.jsx)("button",{onClick:async()=>{var e;if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(!A.templateId)return alert("\u8acb\u9078\u64c7 Boss");const t=a.find(e=>e.id===A.templateId);let r,i,s,l,c,u=new Date;if("specific"===A.timeMode){if(!A.specificDate||!A.specificTime)return alert("\u8acb\u8f38\u5165\u5b8c\u6574\u7684\u65e5\u671f\u8207\u6642\u9593");u=new Date("".concat(A.specificDate,"T").concat(A.specificTime))}if(t)r=new Date(u.getTime()+6e4*t.respawnMinutes),i=t.name,s=t.color,l=t.mapPos,c=t.stars||0;else{if(!E)return alert("\u627e\u4e0d\u5230 Boss \u8a2d\u5b9a (\u53ef\u80fd\u5df2\u88ab\u522a\u9664)");{const e=o.find(e=>e.id===E);if(!e)return alert("\u627e\u4e0d\u5230\u539f\u59cb Boss \u8a2d\u5b9a\uff0c\u7121\u6cd5\u7de8\u8f2f");{const t=new Date(e.respawnTime)-new Date(e.deathTime);r=new Date(u.getTime()+t),i=e.name,s=e.color,l=e.mapPos,c=e.stars||0}}}const d={templateId:A.templateId,name:i,color:s,mapPos:l||null,stars:c||0,deathTime:u.toISOString(),respawnTime:r.toISOString()};E?(await jd(xu(Qd,"boss_events",E),d),oh(n,"\u4fee\u6539\u6642\u9593\u7d00\u9304",i)):(d.createdAt=(new Date).toISOString(),await Md(wu(Qd,"boss_events"),d),oh(n,"\u624b\u52d5\u65b0\u589e\u7d00\u9304",i)),y(!1),N(null),j({templateId:(null===(e=a[0])||void 0===e?void 0:e.id)||"",timeMode:"current",specificDate:hh(),specificTime:fh()})},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:E?"\u66f4\u65b0":"\u5efa\u7acb"})]})]})}),(0,gh.jsx)(ef,{isOpen:v,onClose:()=>b(!1),bossTemplates:a,handleAddQuickRecord:async e=>{if("\u8a2a\u5ba2"===n)return alert("\u8a2a\u5ba2\u6b0a\u9650\u50c5\u4f9b\u700f\u89bd");if(!Qd||!e)return;const t=new Date,r=new Date(t.getTime()+6e4*e.respawnMinutes),i={templateId:e.id,name:e.name,color:e.color,mapPos:e.mapPos||null,stars:e.stars||0,deathTime:t.toISOString(),respawnTime:r.toISOString(),createdAt:(new Date).toISOString()};try{await Md(wu(Qd,"boss_events"),i),oh(n,"\u5feb\u901f\u7d00\u9304","".concat(e.name)),L("\u2705 \u5df2\u7d00\u9304\uff1a".concat(e.name))}catch(a){console.error("Quick add failed",a),alert("\u65b0\u589e\u5931\u6557")}},isDarkMode:t,theme:P})]})},nf=y("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),rf=e=>{let{isDarkMode:t,currentUser:n,globalSettings:i,theme:a}=e;const[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)([{role:"assistant",content:"\u4f60\u597d\uff01\u6211\u662f\u4f60\u7684\u8a18\u5e33\u52a9\u624b\u3002\u6211\u53ef\u4ee5\u5e6b\u4f60\u67e5\u8a62\u8ab0\u8ce3\u4e86\u591a\u5c11\u9322\u3001\u76ee\u524d\u7684\u6b20\u6b3e\u72c0\u6cc1\u6216\u662f\u6700\u8fd1\u7684\u4ea4\u6613\u7d00\u9304\u3002\u8acb\u554f\u6709\u4ec0\u9ebc\u53ef\u4ee5\u5e6b\u4f60\u7684\u55ce\uff1f"}]),[u,d]=(0,r.useState)(!1),h=(0,r.useRef)(null);(0,r.useEffect)(()=>{(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[l]);const f=async()=>{if(!s.trim())return;if(!i.geminiApiKey)return c(e=>[...e,{role:"user",content:s},{role:"assistant",content:"\u26a0\ufe0f \u8acb\u5148\u81f3\u300c\u7cfb\u7d71\u5168\u57df\u8a2d\u5b9a\u300d\u4e2d\u8a2d\u5b9a Google Gemini API Key \u624d\u80fd\u4f7f\u7528\u6b64\u529f\u80fd\u3002"}]),void o("");const e=s;c(t=>[...t,{role:"user",content:e}]),o(""),d(!0);try{var t,n,r,a,l;const s=ud(wu(Qd,"history_items"),pd("settledAt","desc"),(In("limit",u=50),md._create("limit",u,"F"))),o=await Id(s),d=await Id(wu(Qd,"active_items")),h=await Cd(xu(Qd,"settlement_data","main_grid")),f=o.docs.map(e=>{const t=e.data();return{"\u540d\u7a31":t.itemName,"\u8ce3\u5bb6":t.seller,"\u50f9\u683c":t.price,"\u53c3\u8207\u8005":(t.participants||[]).map(e=>e.name).join(","),"\u6642\u9593":t.settledAt?t.settledAt.split("T")[0]:"\u672a\u77e5"}}),p=d.docs.map(e=>{const t=e.data();return{"\u540d\u7a31":t.itemName,"\u8ce3\u5bb6":t.seller,"\u50f9\u683c":t.price,"\u53c3\u8207\u8005":(t.participants||[]).map(e=>e.name).join(","),"\u72c0\u614b":"\u8ca9\u8ce3\u4e2d"}}),m=h.exists()?h.data().matrix:{},g="\n          \u4f60\u662f\u4e00\u500b\u8a18\u5e33\u52a9\u624b\u3002\n          \u8acb\u6839\u64da\u4ee5\u4e0b\u7684 JSON \u8cc7\u6599\u56de\u7b54\u4f7f\u7528\u8005\u7684\u554f\u984c\u3002\n          \u8acb\u7528\u7e41\u9ad4\u4e2d\u6587\u56de\u7b54\uff0c\u8a9e\u6c23\u53cb\u5584\u3002\n          \n          [\u76ee\u524d\u7684\u6b20\u6b3e\u72c0\u6cc1 (A_B \u4ee3\u8868 A \u6b20 B \u591a\u5c11\u9322)]:\n          ".concat(JSON.stringify(m),"\n\n          [\u6700\u8fd1 50 \u7b46\u5df2\u51fa\u552e\u7d00\u9304]:\n          ").concat(JSON.stringify(f),"\n\n          [\u6b63\u5728\u8ca9\u8ce3\u4e2d\u7684\u7269\u54c1]:\n          ").concat(JSON.stringify(p),"\n\n          \u5982\u679c\u8cc7\u6599\u4e2d\u6c92\u6709\u7b54\u6848\uff0c\u8acb\u76f4\u63a5\u8aaa\u4f60\u4e0d\u77e5\u9053\uff0c\u4e0d\u8981\u7de8\u9020\u3002\n          \u56de\u7b54\u8acb\u7c21\u6f54\u6709\u529b\u3002\n        "),y=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=".concat(i.geminiApiKey),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:g+"\n\n\u4f7f\u7528\u8005\u554f\u984c: "+e}]}]})}),v=await y.json();if(v.error)throw new Error(v.error.message);const b=(null===(t=v.candidates)||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.content)||void 0===r||null===(a=r.parts)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.text)||"\u62b1\u6b49\uff0c\u6211\u7121\u6cd5\u89e3\u8b80\u8cc7\u6599\u3002";c(e=>[...e,{role:"assistant",content:b}])}catch(u){console.error("AI Error:",u),c(e=>[...e,{role:"assistant",content:"\u767c\u751f\u932f\u8aa4: ".concat(u.message)}])}finally{d(!1)}var u};return(0,gh.jsxs)("div",{className:"flex flex-col h-full rounded-xl overflow-hidden ".concat(a.card," shadow-xl border-2 border-yellow-500/30"),children:[(0,gh.jsxs)("div",{className:"p-4 border-b flex items-center gap-3 ".concat(t?"bg-yellow-900/20 border-yellow-500/30":"bg-yellow-50 border-yellow-200"),children:[(0,gh.jsx)("div",{className:"bg-yellow-500 p-2 rounded-full text-white shadow-lg",children:(0,gh.jsx)(w,{size:24})}),(0,gh.jsxs)("div",{children:[(0,gh.jsx)("h3",{className:"font-bold text-lg ".concat(a.text),children:"AI \u8ca1\u52d9\u52a9\u624b"}),(0,gh.jsx)("p",{className:"text-xs opacity-60 ".concat(a.text),children:"Powered by Gemini 1.5 Flash"})]})]}),(0,gh.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-black/5",children:[l.map((e,n)=>(0,gh.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,gh.jsx)("div",{className:"max-w-[80%] p-3 rounded-2xl shadow-sm whitespace-pre-wrap ".concat("user"===e.role?"bg-blue-600 text-white rounded-br-none":"".concat(t?"bg-gray-700 text-gray-100":"bg-white text-gray-800"," rounded-bl-none")),children:e.content})},n)),u&&(0,gh.jsx)("div",{className:"flex justify-start",children:(0,gh.jsxs)("div",{className:"p-3 rounded-2xl rounded-bl-none flex items-center gap-2 ".concat(t?"bg-gray-700":"bg-white"),children:[(0,gh.jsx)(Ih,{size:16,className:"animate-spin text-yellow-500"}),(0,gh.jsx)("span",{className:"text-xs opacity-50",children:"AI \u6b63\u5728\u601d\u8003\u4e2d..."})]})}),(0,gh.jsx)("div",{ref:h})]}),(0,gh.jsxs)("div",{className:"p-4 border-t ".concat(t?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"),children:[(0,gh.jsxs)("div",{className:"flex gap-2",children:[(0,gh.jsx)("input",{type:"text",className:"flex-1 p-3 rounded-xl border focus:ring-2 focus:ring-yellow-500 outline-none transition-all ".concat(a.input),placeholder:"\u8f38\u5165\u554f\u984c\uff0c\u4f8b\u5982\uff1a\u6c34\u91ce\u8ce3\u4e86\u591a\u5c11\u9322\uff1f",value:s,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&f()}),(0,gh.jsx)("button",{onClick:f,disabled:u,className:"p-3 rounded-xl bg-yellow-500 text-white hover:bg-yellow-600 transition-colors shadow-lg ".concat(u?"opacity-50 cursor-not-allowed":""),children:(0,gh.jsx)(nf,{size:20})})]}),(0,gh.jsx)("div",{className:"text-[10px] text-center mt-2 opacity-40",children:"* AI \u56de\u7b54\u50c5\u4f9b\u53c3\u8003\uff0c\u8acb\u4ee5\u5be6\u969b\u8868\u683c\u70ba\u6e96\u3002"})]})]})};function af(){const[e,t]=(0,r.useState)("BOSS_TIMER"),[n,i]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)({appVersion:eh,mapShowMins:60,mapBlinkMins:10,mapLineGapMins:2,youtubeVideoId:"",geminiApiKey:""}),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[T,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!o||!Qd)return;const e=localStorage.getItem("theme_".concat(o));if(e)try{I(JSON.parse(e))}catch(n){}const t=Pd(xu(Qd,"user_settings",o),e=>{e.exists()&&e.data().theme&&I(e.data().theme)});return()=>t()},[o,Qd]);const[A,j]=(0,r.useState)(!1),[D,M]=(0,r.useState)("");(0,r.useEffect)(()=>{Qd&&s(!0);const e=localStorage.getItem("accounting_theme");e&&i("dark"===e);const t=localStorage.getItem("accounting_user");if(t?l(t):d(!0),Qd){const e=Pd(xu(Qd,"system_data","global_settings"),e=>{if(e.exists()){const t=e.data();f(t),t.appVersion&&t.appVersion!==eh?(console.log("\u5075\u6e2c\u5230\u65b0\u7248\u672c:",t.appVersion),M(t.appVersion),j(!0)):j(!1)}});return()=>e()}},[Qd]),(0,r.useEffect)(()=>{localStorage.setItem("accounting_theme",n?"dark":"light")},[n]);const P={bg:n?"bg-gray-900":"bg-slate-100",nav:n?"bg-gray-800":"bg-slate-900",text:n?"text-gray-100":"text-gray-800",card:n?"bg-gray-800":"bg-white",subText:n?"text-gray-400":"text-gray-500",input:n?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-800"};return(0,gh.jsxs)("div",{className:"min-h-screen font-sans transition-colors duration-300",style:c({background:T?"var(--app-bg)":void 0,color:T?"var(--app-text)":void 0},(()=>{if(!T)return{};const e="gradient"===T.bgType?"linear-gradient(".concat(T.bgDirection,"deg, ").concat(T.bgColor1," ").concat(T.bgPosition,"%, ").concat(T.bgColor2," 100%)"):T.bgColor1,t="gradient"===T.primaryType?"linear-gradient(".concat(T.primaryDirection,"deg, ").concat(T.primaryColor1,", ").concat(T.primaryColor2,")"):T.primaryColor1;return{"--app-bg":e,"--app-text":T.textColor,"--app-card-bg":T.cardBgColor,"--app-primary":t,"--card-bg":T.cardItemBg||"#374151","--card-text":T.cardItemText||"#ffffff"}})()),children:[(0,gh.jsxs)("div",{className:"min-h-screen ".concat(T?"":n?"bg-gray-900 text-gray-100":"bg-slate-100 text-gray-800"),children:[!a&&(0,gh.jsx)("div",{className:"bg-red-600 text-white p-2 text-center text-sm font-bold sticky top-0 z-50",children:"\u5c1a\u672a\u521d\u59cb\u5316 Firebase\uff0c\u8acb\u6aa2\u67e5\u91d1\u9470\u8a2d\u5b9a\uff01"}),(0,gh.jsx)("div",{className:"absolute top-0 left-0 p-1 text-[10px] text-gray-500 opacity-50 pointer-events-none z-50",children:eh}),(0,gh.jsx)(Mh,{show:A,remoteVersion:D,onRefresh:()=>{window.location.reload()}}),(0,gh.jsx)("nav",{className:"px-4 py-3 shadow-lg sticky top-0 z-40 transition-colors duration-300",style:{background:"var(--app-card-bg)",color:"var(--app-text)"},children:(0,gh.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,gh.jsxs)("div",{className:"flex items-center gap-3",children:[(0,gh.jsx)("div",{className:"p-2 rounded-lg text-white shadow-md transition-all duration-300",style:{background:"var(--app-primary)"},children:"ACCOUNTING"===e?(0,gh.jsx)(v,{size:24}):"BOSS_TIMER"===e?(0,gh.jsx)(b,{size:24}):(0,gh.jsx)(w,{size:24})}),(0,gh.jsx)("h1",{className:"text-2xl font-bold tracking-wider hidden md:block",children:"ACCOUNTING"===e?"\u5718\u968a\u8a18\u5e33\u8868":"BOSS_TIMER"===e?"Boss \u91cd\u751f\u8a08\u6642":"CHARACTER_LIST"===e?"\u89d2\u8272 ID \u540d\u9304":"AI \u8ca1\u52d9\u52a9\u624b"}),(0,gh.jsxs)("div",{className:"flex md:hidden rounded-lg p-1",style:{background:"rgba(0,0,0,0.2)"},children:[(0,gh.jsx)("button",{onClick:()=>t("ACCOUNTING"),className:"px-2 py-1 rounded text-xs ".concat("ACCOUNTING"===e?"bg-blue-600 text-white":""),children:"\u8a18\u5e33"}),(0,gh.jsx)("button",{onClick:()=>t("BOSS_TIMER"),className:"px-2 py-1 rounded text-xs ".concat("BOSS_TIMER"===e?"bg-purple-600 text-white":""),children:"Boss"}),(0,gh.jsx)("button",{onClick:()=>t("AI_ASSISTANT"),className:"px-2 py-1 rounded text-xs ".concat("AI_ASSISTANT"===e?"bg-yellow-500 text-white":""),children:"AI"}),(0,gh.jsx)("button",{onClick:()=>t("CHARACTER_LIST"),className:"px-2 py-1 rounded text-xs ".concat("CHARACTER_LIST"===e?"bg-green-600 text-white":""),children:"ID\u8868"})]})]}),(0,gh.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,gh.jsx)("button",{onClick:()=>y(!0),className:"p-2 rounded-full hover:bg-black/10 transition-colors",title:"\u81ea\u5b9a\u7fa9\u5916\u89c0",children:(0,gh.jsx)(x,{size:20})}),(0,gh.jsx)("button",{onClick:()=>m(!0),className:"p-2 rounded-full hover:bg-black/10 transition-colors",title:"\u7cfb\u7d71\u5168\u57df\u8a2d\u5b9a",children:(0,gh.jsx)(k,{size:20})}),o&&(0,gh.jsxs)("div",{className:"flex items-center gap-2 bg-black/10 px-3 py-1 rounded-full text-sm",children:[(0,gh.jsx)(S,{size:14})," ",o,(0,gh.jsx)("button",{onClick:()=>{localStorage.removeItem("accounting_user"),l(null),d(!0)},className:"ml-2 p-1 bg-red-500/80 hover:bg-red-600 rounded text-white transition-colors",children:(0,gh.jsx)(E,{size:12})})]}),(0,gh.jsxs)("div",{className:"hidden md:flex gap-2 mr-4 p-1 rounded-lg",style:{background:"rgba(0,0,0,0.1)"},children:[(0,gh.jsxs)("button",{onClick:()=>t("ACCOUNTING"),className:"flex items-center gap-2 px-4 py-1.5 rounded-md transition-all ".concat("ACCOUNTING"===e?"bg-blue-600 text-white shadow":"hover:bg-white/10 opacity-70"),children:[(0,gh.jsx)(v,{size:16})," \u5718\u968a\u8a18\u5e33"]}),(0,gh.jsxs)("button",{onClick:()=>t("BOSS_TIMER"),className:"flex items-center gap-2 px-4 py-1.5 rounded-md transition-all ".concat("BOSS_TIMER"===e?"bg-purple-600 text-white shadow":"hover:bg-white/10 opacity-70"),children:[(0,gh.jsx)(b,{size:16})," Boss \u6642\u9593"]}),(0,gh.jsxs)("button",{onClick:()=>t("AI_ASSISTANT"),className:"flex items-center gap-2 px-4 py-1.5 rounded-md transition-all ".concat("AI_ASSISTANT"===e?"bg-yellow-500 text-white shadow":"hover:bg-white/10 opacity-70"),children:[(0,gh.jsx)(w,{size:16})," AI \u52a9\u624b"]}),(0,gh.jsxs)("button",{onClick:()=>t("CHARACTER_LIST"),className:"flex items-center gap-2 px-4 py-1.5 rounded-md transition-all ".concat("CHARACTER_LIST"===e?"bg-green-600 text-white shadow":"hover:bg-white/10 opacity-70"),children:[(0,gh.jsx)(N,{size:16})," \u89d2\u8272 ID"]})]}),(0,gh.jsx)("button",{onClick:()=>i(!n),className:"p-2 rounded-full hover:bg-black/10 transition-colors",children:n?(0,gh.jsx)(_,{size:20,className:"text-yellow-300"}):(0,gh.jsx)(C,{size:20})})]})]})}),(0,gh.jsxs)("main",{className:"relative h-[calc(100vh-80px)] overflow-hidden",children:[(0,gh.jsx)(Dh,{isOpen:u,onSelectUser:e=>{l(e),localStorage.setItem("accounting_user",e),d(!1)},theme:P}),(0,gh.jsx)(jh,{isOpen:p,onClose:()=>m(!1),theme:P,currentSettings:h,isDarkMode:n,currentUser:o}),(0,gh.jsx)(Rh,{isOpen:g,onClose:()=>y(!1),currentTheme:T,onSave:async e=>{if(I(e),y(!1),localStorage.setItem("theme_".concat(o),JSON.stringify(e)),o&&Qd)try{await Ad(xu(Qd,"user_settings",o),{theme:e,updatedAt:(new Date).toISOString()},{merge:!0})}catch(t){console.error("\u4e3b\u984c\u96f2\u7aef\u5099\u4efd\u5931\u6557",t),alert("\u4e3b\u984c\u50c5\u5132\u5b58\u65bc\u672c\u6a5f (\u96f2\u7aef\u540c\u6b65\u5931\u6557)")}}}),(0,gh.jsx)(Nh,{videoId:h.youtubeVideoId,isDarkMode:n}),(0,gh.jsx)("div",{className:"h-full overflow-y-auto",children:"ACCOUNTING"===e?(0,gh.jsx)(qh,{isDarkMode:n,dbReady:a,currentUser:o}):"BOSS_TIMER"===e?(0,gh.jsx)(tf,{isDarkMode:n,currentUser:o,globalSettings:h}):"CHARACTER_LIST"===e?(0,gh.jsx)(yh,{isDarkMode:n,currentUser:o}):(0,gh.jsx)("div",{className:"p-4 h-full max-w-4xl mx-auto",children:(0,gh.jsx)(rf,{isDarkMode:n,currentUser:o,globalSettings:h,theme:P})})})]})]})," "]})}const sf=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:s}=t;n(e),r(e),i(e),a(e),s(e)})};i.createRoot(document.getElementById("root")).render((0,gh.jsx)(r.StrictMode,{children:(0,gh.jsx)(af,{})})),sf()})();
//# sourceMappingURL=main.c692540d.js.map